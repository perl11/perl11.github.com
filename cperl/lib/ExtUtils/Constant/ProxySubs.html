<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>ExtUtils::Constant::ProxySubs - generate XS ProxySubs code</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:rurban@cpan.org" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#OPTIONS">OPTIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>ExtUtils::Constant::ProxySubs - generate XS ProxySubs code</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>    use ExtUtils::Constant qw (WriteConstants);
    WriteConstants(
        NAME         =&gt; &#39;Package&#39;,
        NAMES        =&gt; [qw(FOO BAR BAZ)],
        PROXYSUBS    =&gt; { autoload =&gt; 1 },
        DEFAULT_TYPE =&gt; &#39;IV&#39;,
    );
    # Generates easier wrapper code, unusable with 5.6</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>With the PROXYSUBS option to WriteConstants, this module generates better XS code, with 4 optional variants.</p>

<p>Each symbol is added as CONSTSUB at BOOT time, as via <code>sub NAME () {value}</code>. Undefined names <i>(#undef NAME)</i> will be stored in a special <code>ExtUtils::Constant::ProxySubs::Missing</code> namespace, because accessing an undefined name should throw a different error &quot;Your vendor has not defined MyPackage macro NAME&quot;, and not &quot;Undefined subroutine &amp;MyPackage::NAME&quot;.</p>

<p>There&#39;s no run-time lookup for matching names in the constant function, but there&#39;s still AUTOLOAD needed to catch unknown names and a short dispatch for matching types.</p>

<p>NOTICE:</p>

<p>ExtUtils::Constant::ProxySubs versions older than 0.23_04 creates code usable only &gt;= 5.14. There is no official CPAN version which creates usable code yet. The CPAN maintainers think p5p should sort it out, which they didn&#39;t for the last 7 years.</p>

<h1 id="OPTIONS">OPTIONS</h1>

<p>PROXYSUBS can be used with an optional hashref of 4 exclusive options.</p>

<p>&#39;autoload&#39;, &#39;croak_on_error&#39; and &#39;croak_on_read&#39; can not be used together. &#39;push&#39; and &#39;croak_on_read&#39; cannot be used together.</p>

<dl>

<dt id="autoload">autoload</dt>
<dd>

<p>This option generates an XS AUTOLOAD function which dispatches to the XS <code>constant</code> function. Only auto-generated C and XS code is needed, no manual addition of <code>sub AUTOLOAD</code> as generated by <a>ExtUtils::Constant::autoload</a>.</p>

<p><b>Limitation:</b> With 5.6 the error message for undefined macros is not &quot;Your vendor has not defined MyPackage macro NAME&quot;, but &quot;Undefined subroutine &amp;MyPackage::NAME&quot;</p>

</dd>
<dt id="push">push</dt>
<dd>

<p>This option keeps a list of all added constants.</p>

<p>E.g. NAME =&gt; &#39;MyPackage&#39;, PROXYSUBS =&gt; { push =&gt; &#39;CONSTNAMES&#39; }, will create <code>@MyPackage::CONSTNAMES</code>.</p>

</dd>
<dt id="croak_on_error">croak_on_error</dt>
<dd>

<p>Errors in run-time name lookup via XS constant is normally handled by AUTOLOAD. With croak_on_error the AUTOLOAD function can be simplified, errors with missing undefined names are thrown directly in the XS <code>constant() </code>function.</p>

<p>The XS caller context might be different to the pure-perl AUTOLOAD context though, identifying the source location of the error.</p>

</dd>
<dt id="croak_on_read">croak_on_read</dt>
<dd>

<p>Similar to croak_on_error, but much more restrictive. For each variable which should report the &quot;Your vendor has not defined MyPackage macro NAME&quot; error, a magic getter and setter hook is added to throw this error.</p>

<p>This option creates code usable only since Perl 5.24, so don&#39;t use it with any CPAN module!</p>

</dd>
</dl>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Reini Urban &lt;rurban@cpan.org&gt; fixed up ProxySubs and took over maintainance. Nicholas Clark &lt;nick@ccl4.org&gt; wrote it from scratch.</p>


</body>

</html>


