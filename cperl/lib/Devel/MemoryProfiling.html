<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>MemoryProfiling</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:rurban@cpan.org" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#Ideas-and-Plans-for-Memory-Profiling-with-NYTProf">Ideas and Plans for Memory Profiling with NYTProf</a></li>
  <li><a href="#Email-threads">Email threads</a></li>
  <li><a href="#Possibly-Relevant-Perl-Modules">Possibly Relevant Perl Modules</a></li>
  <li><a href="#Other-Items-of-Interest">Other Items of Interest</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>MemoryProfiling</p>

<h1 id="Ideas-and-Plans-for-Memory-Profiling-with-NYTProf">Ideas and Plans for Memory Profiling with NYTProf</h1>

<p>XXX <i>This mostly a dumping ground for thoughts, and links at the moment</i>. Somewhere to gather the info so it&#39;ll be easier to find when someone wants to work on it.</p>

<p>It&#39;s also focussed on runtime profiling of total memory usage over time (rather than a detailed analysis of who &#39;owns&#39; what memory as some particular point in time, like the end of the program).</p>

<p>NYTProf currently only measures time and supports a limited range of &quot;clocks&quot; (realtime vs cputime). For profiling memory we need to add a new kind of &quot;clock&quot; that measures memory usage. Since we&#39;re generalizing the concept of what gets measured (and how we get the info from the system) a better name than &quot;clock&quot; would be &quot;probe&quot;.</p>

<p>Conjectural terminology:</p>

<pre><code>    &quot;Probe&quot; means some measuring mechanism like get_clock(), times(), getrusage(),
    that may yield multiple pieces of information with a single call.

    &quot;Measure&quot; is one specific item generated by a probe.

    Probe &quot;time&quot;   uses times(), measures: &quot;time.user&quot;, &quot;time.user+sys&quot; etc
    Probe &quot;clock&quot;  uses clock_gettime(), measures: &quot;clock.realtime&quot;, &quot;clock.monotonic&quot; etc
    Probe &quot;rusage&quot; uses getrusage(), measures: &quot;rusage.majflt&quot;, &quot;rusage.nvcsw&quot; etc
    Probe &quot;memory&quot; measures: &quot;memory.bytes&quot;, &quot;mem.allocs&quot; etc
    Probe &quot;arena&quot;  measures: &quot;arena.svs&quot;, &quot;arena.bytes&quot; etc</code></pre>

<p>Generalize the concepts of probes. Have a structure defining a &#39;probe&#39; with pointers to functions to get the values, subtract values to get relative ticks, return the tick units etc. Give them names and attributes (cpu, realtime etc). User could then pick a probe by name. By default we&#39;d pick the best available realtime probe. Use the subtraction logic where we currently handle times in the statement and subroutine profilers.</p>

<h1 id="Email-threads">Email threads</h1>

<p>&quot;Memory profiling in Devel::NYTProf?: - June 2009 <a href="http://groups.google.com/group/develnytprof-dev/browse_frm/thread/1df4cba3001cd4e4/136812b44e9f7631">http://groups.google.com/group/develnytprof-dev/browse_frm/thread/1df4cba3001cd4e4/136812b44e9f7631</a> Talking about the problems of measuring memory usage of the whole process re: <a href="http://blog.robin.smidsrod.no/index.php/2009/05/26/memory-footprint-of-popular-cpan-modules">http://blog.robin.smidsrod.no/index.php/2009/05/26/memory-footprint-of-popular-cpan-modules</a></p>

<p>&quot;Memory profiling possibilities in NYTProf&quot; - September 2009 <a href="http://groups.google.com/group/develnytprof-dev/browse_frm/thread/c711c132216a3cea/035012e3dc2971ec">http://groups.google.com/group/develnytprof-dev/browse_frm/thread/c711c132216a3cea/035012e3dc2971ec</a> This includes a detailed overview of the issues.</p>

<p>&quot;profiling memory&quot; - Dec 2009 <a href="http://groups.google.com/group/develnytprof-dev/browse_frm/thread/5ffd24200866b0c1/201b58c18d826aaa">http://groups.google.com/group/develnytprof-dev/browse_frm/thread/5ffd24200866b0c1/201b58c18d826aaa</a> Nicholas Clark offers an experimental patch that intercepts malloc and free and makes NYTProf measure memory usage.</p>

<h1 id="Possibly-Relevant-Perl-Modules">Possibly Relevant Perl Modules</h1>

<p>Per-process memory information:</p>

<dl>

<dt id="http:-metacpan.org-pod-Devel::Mallinfo"><a href="http://metacpan.org/pod/Devel::Mallinfo">http://metacpan.org/pod/Devel::Mallinfo</a></dt>
<dd>

</dd>
</dl>

<p>Arena, stash, and pad based memory reporters:</p>

<dl>

<dt id="http:-metacpan.org-pod-Devel::Gladiator"><a href="http://metacpan.org/pod/Devel::Gladiator">http://metacpan.org/pod/Devel::Gladiator</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-release-Internals-DumpArenas"><a href="http://metacpan.org/release/Internals-DumpArenas/">http://metacpan.org/release/Internals-DumpArenas/</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-release-Internals-GraphArenas"><a href="http://metacpan.org/release/Internals-GraphArenas/">http://metacpan.org/release/Internals-GraphArenas/</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-pod-Devel::DumpSizes"><a href="http://metacpan.org/pod/Devel::DumpSizes">http://metacpan.org/pod/Devel::DumpSizes</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-pod-Devel::Arena"><a href="http://metacpan.org/pod/Devel::Arena">http://metacpan.org/pod/Devel::Arena</a></dt>
<dd>

</dd>
</dl>

<p>Per-object memory size reporters:</p>

<dl>

<dt id="http:-metacpan.org-pod-Devel::Size"><a href="http://metacpan.org/pod/Devel::Size">http://metacpan.org/pod/Devel::Size</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-pod-Devel::Size::Report"><a href="http://metacpan.org/pod/Devel::Size::Report">http://metacpan.org/pod/Devel::Size::Report</a></dt>
<dd>

</dd>
</dl>

<p>Others:</p>

<dl>

<dt id="http:-metacpan.org-release-Devel-Memalyzer"><a href="http://metacpan.org/release/Devel-Memalyzer/">http://metacpan.org/release/Devel-Memalyzer/</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-pod-Devel::Memalyzer::Plugin::ProcSmaps"><a href="http://metacpan.org/pod/Devel::Memalyzer::Plugin::ProcSmaps">http://metacpan.org/pod/Devel::Memalyzer::Plugin::ProcSmaps</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-release-B-Stats"><a href="http://metacpan.org/release/B-Stats/">http://metacpan.org/release/B-Stats/</a></dt>
<dd>

</dd>
<dt id="http:-metacpan.org-release-B-C"><a href="http://metacpan.org/release/B-C/">http://metacpan.org/release/B-C/</a></dt>
<dd>

</dd>
</dl>

<h1 id="Other-Items-of-Interest">Other Items of Interest</h1>

<p>&quot;Memory Efficient Perl&quot; slides by jjore</p>

<dl>

<dt id="http:-docs.google.com-present-view-id-dg7kgpct_24cjs3c9fv"><a href="http://docs.google.com/present/view?id=dg7kgpct_24cjs3c9fv">http://docs.google.com/present/view?id=dg7kgpct_24cjs3c9fv</a></dt>
<dd>

</dd>
<dt id="http:-diotalevi.isa-geek.net-josh-090402-frontend.png"><a href="http://diotalevi.isa-geek.net/~josh/090402/frontend.png">http://diotalevi.isa-geek.net/~josh/090402/frontend.png</a></dt>
<dd>

</dd>
</dl>

<p>Other profile/memory visualization tools</p>

<dl>

<dt id="http:-netjam.org-spoon-viz"><a href="http://netjam.org/spoon/viz/">http://netjam.org/spoon/viz/</a></dt>
<dd>

</dd>
<dt id="http:-java.dzone.com-announcements-visualvm-12-great-java"><a href="http://java.dzone.com/announcements/visualvm-12-great-java">http://java.dzone.com/announcements/visualvm-12-great-java</a></dt>
<dd>

</dd>
</dl>

<p><a href="http://blogs.perl.org/users/alex_balhatchet/2012/01/debugging-memory-use-in-perl---help.html">http://blogs.perl.org/users/alex_balhatchet/2012/01/debugging-memory-use-in-perl---help.html</a></p>

<p><a href="http://stackoverflow.com/questions/8715611/can-i-use-dtrace-on-os-x-10-5-to-determine-which-of-my-perl-subs-is-causing-the">http://stackoverflow.com/questions/8715611/can-i-use-dtrace-on-os-x-10-5-to-determine-which-of-my-perl-subs-is-causing-the</a></p>


</body>

</html>


