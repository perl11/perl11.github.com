<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:rurban@cpan.org" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#Notice">Notice</a></li>
  <li><a href="#Core-Enhancements">Core Enhancements</a>
    <ul>
      <li><a href="#study-HASH-CODE-ARRAY">study HASH CODE ARRAY</a></li>
      <li><a href="#New-strict-hashpairs">New strict hashpairs</a></li>
      <li><a href="#Honor-the-BOM">Honor the BOM</a></li>
      <li><a href="#Safer-perl--c:s-cmdline-flag">Safer perl -c:s cmdline flag</a></li>
      <li><a href="#class-role-method-has-fields">class, role, method, has, fields</a></li>
      <li><a href="#Check-and-normalize-stringified-names">Check and normalize stringified names</a></li>
      <li><a href="#strict-names">strict names</a></li>
      <li><a href="#Optimize-static-methods-to-subs">Optimize static methods to subs</a></li>
      <li><a href="#Named-anonymous-CV---usenamedanoncv">Named anonymous CV - usenamedanoncv</a></li>
      <li><a href="#Dump-more-COP-fields">Dump more COP fields</a></li>
      <li><a href="#More-unicode-ops">More unicode ops</a></li>
      <li><a href="#is-a-valid-part-of-a-subroutine-name">&#39; is a valid part of a subroutine name</a></li>
      <li><a href="#delete-on-key-value-slices">delete on key/value slices</a></li>
      <li><a href="#Unicode-10.0-is-supported">Unicode 10.0 is supported</a></li>
      <li><a href="#Experimentally-there-are-now-alphabetic-synonyms-for-some-regular-expression-assertions">Experimentally, there are now alphabetic synonyms for some regular expression assertions</a></li>
      <li><a href="#Re-enable-warnings-illegalproto">Re-enable warnings illegalproto</a></li>
      <li><a href="#In-place-editing-is-now-safer">In-place editing is now safer</a></li>
      <li><a href="#Initialisation-of-aggregate-state-variables">Initialisation of aggregate state variables</a></li>
      <li><a href="#Full-size-inode-numbers">Full-size inode numbers</a></li>
      <li><a href="#Changed-warnings::register-handling-of-all">Changed warnings::register handling of all</a></li>
      <li><a href="#Computed-shaped-array-sizes">Computed shaped array sizes</a></li>
      <li><a href="#New-read-only-predefined-variable-SAFE_LOCALES">New read-only predefined variable ${^SAFE_LOCALES}</a></li>
      <li><a href="#Locales-are-now-thread-safe-on-systems-that-support-them">Locales are now thread-safe on systems that support them</a></li>
      <li><a href="#Mixed-Unicode-scripts-in-strings">Mixed Unicode scripts in strings</a></li>
      <li><a href="#String--and-number-specific-bitwise-ops-are-no-longer-experimental">String- and number-specific bitwise ops are no longer experimental</a></li>
    </ul>
  </li>
  <li><a href="#Security">Security</a>
    <ul>
      <li><a href="#CVE-2017-12837-Heap-buffer-overflow-in-regular-expression-compiler">[CVE-2017-12837] Heap buffer overflow in regular expression compiler</a></li>
      <li><a href="#CVE-2017-12883-Buffer-over-read-in-regular-expression-parser">[CVE-2017-12883] Buffer over-read in regular expression parser</a></li>
      <li><a href="#CVE-2017-12814-ENV-key-stack-buffer-overflow-on-Windows">[CVE-2017-12814] $ENV{$key} stack buffer overflow on Windows</a></li>
      <li><a href="#Unsigned-long-stack-access-of-printf-format-arguments">Unsigned long stack access of printf format arguments</a></li>
      <li><a href="#Disallow-illegal-glob-with-embedded-NUL">Disallow illegal glob with embedded NUL</a></li>
      <li><a href="#Follow-chroot-with-chdir">Follow chroot with chdir(&quot;/&quot;)</a></li>
      <li><a href="#Set-umask-0600-before-calling-mkstemp">Set umask(0600) before calling mkstemp</a></li>
      <li><a href="#Note-on-the-perl5-Hash-Function-Change">Note on the perl5 Hash Function Change</a></li>
    </ul>
  </li>
  <li><a href="#Incompatible-Changes">Incompatible Changes</a>
    <ul>
      <li>
        <ul>
          <li><a href="#use-strict-hashpairs">use strict hashpairs</a></li>
        </ul>
      </li>
      <li><a href="#Comma-less-variable-lists-in-formats-are-no-longer-allowed">Comma-less variable lists in formats are no longer allowed</a></li>
      <li><a href="#The-:locked-and-:unique-attributes-have-been-removed">The :locked and :unique attributes have been removed</a></li>
      <li><a href="#N-with-nothing-between-the-braces-is-now-illegal">\N{} with nothing between the braces is now illegal.</a></li>
      <li><a href="#Opening-the-same-symbol-as-both-a-file-and-directory-handle-is-no-longer-allowed">Opening the same symbol as both a file and directory handle is no longer allowed</a></li>
      <li><a href="#Use-of-bare-to-mean-is-no-longer-allowed">Use of bare &lt;&lt; to mean &lt;&lt;&quot;&quot; is no longer allowed</a></li>
      <li><a href="#Setting-to-a-reference-to-a-non-positive-integer-no-longer-allowed">Setting $/ to a reference to a non-positive integer no longer allowed</a></li>
      <li><a href="#Unicode-code-points-with-values-exceeding-IV_MAX-are-now-fatal">Unicode code points with values exceeding IV_MAX are now fatal.</a></li>
      <li><a href="#B::OP::terse-no-longer-exists">B::OP::terse no longer exists.</a></li>
      <li><a href="#Use-of-inherited-AUTOLOAD-for-non-methods-is-no-longer-allowed">Use of inherited AUTOLOAD for non-methods is no longer allowed.</a></li>
      <li><a href="#Use-of-strings-with-code-points-over-0xFF-is-not-allowed-for-bitwise-string-operators">Use of strings with code points over 0xFF is not allowed for bitwise string operators</a></li>
      <li><a href="#Backslash-no-longer-escapes-colon-in-PATH-for-the--S-switch">Backslash no longer escapes colon in PATH for the -S switch</a></li>
      <li><a href="#Subroutines-no-longer-need-typeglobs">Subroutines no longer need typeglobs</a></li>
      <li><a href="#is-a-term-in-cperl-not-a-statement">... is a term in cperl, not a statement</a></li>
      <li><a href="#Illegal-NUL-syntax-error">Illegal NUL, syntax error</a></li>
      <li><a href="#Only-B::class-is-valid">Only B::class is valid</a></li>
      <li><a href="#Sort-algorithm-can-no-longer-be-specified">Sort algorithm can no longer be specified</a></li>
      <li><a href="#Over-radix-digits-in-floating-point-literals">Over-radix digits in floating point literals</a></li>
      <li><a href="#Return-type-of-unpackstring">Return type of unpackstring()</a></li>
    </ul>
  </li>
  <li><a href="#Deprecations">Deprecations</a>
    <ul>
      <li><a href="#Use-of-vec-on-strings-with-code-points-above-0xFF-is-deprecated">Use of vec on strings with code points above 0xFF is deprecated.</a></li>
      <li><a href="#Some-uses-of-unescaped-are-no-longer-fatal">Some uses of unescaped &quot;{&quot; are no longer fatal</a></li>
      <li><a href="#Use-of-unescaped-immediately-after-a-in-regular-expression-patterns-is-deprecated">Use of unescaped &quot;{&quot; immediately after a &quot;(&quot; in regular expression patterns is deprecated</a></li>
      <li><a href="#Assignment-to-will-be-fatal-in-Perl-5.30">Assignment to $[ will be fatal in Perl 5.30</a></li>
      <li><a href="#hostname-wont-accept-arguments-in-Perl-5.32">hostname() won&#39;t accept arguments in Perl 5.32</a></li>
      <li><a href="#No-autovivification-of-hash-slice-anymore">No autovivification of hash slice anymore</a></li>
      <li><a href="#Module-removals">Module removals</a></li>
    </ul>
  </li>
  <li><a href="#Performance-Enhancements">Performance Enhancements</a></li>
  <li><a href="#Modules-and-Pragmata">Modules and Pragmata</a>
    <ul>
      <li><a href="#Removal-of-use-vars">Removal of use vars</a></li>
      <li><a href="#Use-of-DynaLoader-changed-to-XSLoader-in-many-modules">Use of DynaLoader changed to XSLoader in many modules</a></li>
      <li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a></li>
      <li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></li>
      <li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></li>
    </ul>
  </li>
  <li><a href="#Documentation">Documentation</a>
    <ul>
      <li><a href="#New-Documentation">New Documentation</a>
        <ul>
          <li><a href="#perlclass">perlclass</a></li>
          <li><a href="#PACKAGING">PACKAGING</a></li>
        </ul>
      </li>
      <li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a>
        <ul>
          <li><a href="#perlapi">perlapi</a></li>
          <li><a href="#perlapio">perlapio</a></li>
          <li><a href="#perldtrace">perldtrace</a></li>
          <li><a href="#perldata">perldata</a></li>
          <li><a href="#perldebguts">perldebguts</a></li>
          <li><a href="#perldiag">perldiag</a></li>
          <li><a href="#perlembed">perlembed</a></li>
          <li><a href="#perlfunc">perlfunc</a></li>
          <li><a href="#perlgit">perlgit</a></li>
          <li><a href="#perlguts">perlguts</a></li>
          <li><a href="#perlintern">perlintern</a></li>
          <li><a href="#perlfilter">perlfilter</a></li>
          <li><a href="#perlobj">perlobj</a></li>
          <li><a href="#perlop">perlop</a></li>
          <li><a href="#perlrequick">perlrequick</a></li>
          <li><a href="#perlretut">perlretut</a></li>
          <li><a href="#perlrun">perlrun</a></li>
          <li><a href="#perlsec">perlsec</a></li>
          <li><a href="#perlsyn">perlsyn</a></li>
          <li><a href="#perluniprops">perluniprops</a></li>
          <li><a href="#perlvar">perlvar</a></li>
          <li><a href="#perlxs-perlxstut-perlxstypemap">perlxs, perlxstut, perlxstypemap</a></li>
          <li><a href="#perlfunc-perlop-perlsyn">perlfunc, perlop, perlsyn</a></li>
          <li><a href="#POSIX">POSIX</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#Diagnostics">Diagnostics</a>
    <ul>
      <li><a href="#New-Diagnostics">New Diagnostics</a>
        <ul>
          <li><a href="#New-Errors">New Errors</a></li>
          <li><a href="#New-Warnings">New Warnings</a></li>
        </ul>
      </li>
      <li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></li>
    </ul>
  </li>
  <li><a href="#Utility-Changes">Utility Changes</a>
    <ul>
      <li><a href="#dtrace">dtrace</a></li>
      <li><a href="#cperlivp">cperlivp</a></li>
    </ul>
  </li>
  <li><a href="#Configuration-and-Compilation">Configuration and Compilation</a></li>
  <li><a href="#Testing">Testing</a></li>
  <li><a href="#Packaging">Packaging</a></li>
  <li><a href="#Platform-Support">Platform Support</a>
    <ul>
      <li><a href="#New-Platforms">New Platforms</a></li>
      <li><a href="#Discontinued-Platforms">Discontinued Platforms</a></li>
      <li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></li>
    </ul>
  </li>
  <li><a href="#Internal-Changes">Internal Changes</a></li>
  <li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a></li>
  <li><a href="#Known-Problems">Known Problems</a></li>
  <li><a href="#Acknowledgements">Acknowledgements</a></li>
  <li><a href="#Reporting-Bugs">Reporting Bugs</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#POD-ERRORS">POD ERRORS</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>perl5280cdelta - what is new for cperl v5.28.0</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This document describes differences between the cperl 5.26.2 and the cperl 5.28.0 release.</p>

<p>If you are upgrading from an earlier release such as v5.26.1c, first read <a href="/cperl/perl5262cdelta.html">perl5262cdelta</a>, which describes differences between v5.26.1c and v5.26.2c.</p>

<h1 id="Notice">Notice</h1>

<p>The new cperl classes/roles have still some <a href="/cperl/perlclass.html#LIMITATIONS">&quot;LIMITATIONS&quot; in perlclass</a>.</p>

<p>cperl did not change the <b>subroutine attribute and signature order</b>. This is the most damaging significant syntax change to date, even worse than the unnecessary <code>for (qw())</code> change, rendering all existing attribute based frameworks useless. This change would have required a major version bump to perl7. Any minor problem with the wrong order of evaluation should have been fixed internally and transparent to the established syntax.</p>

<p>For all perl5 changes which were rejected in cperl 5.28 see <a href="https://github.com/perl11/cperl/issues/356">https://github.com/perl11/cperl/issues/356</a> and <a href="https://github.com/perl11/cperl/issues/337">https://github.com/perl11/cperl/issues/337</a>.</p>

<h1 id="Core-Enhancements">Core Enhancements</h1>

<h2 id="study-HASH-CODE-ARRAY">study HASH CODE ARRAY</h2>

<p>study does not stringify hashes anymore, it rather calls the new <a href="/cperl/perlapi.html#hv_study">hv_study</a> function on hashes, which optimizes the internal structure of a hash. Currently clears all placeholders, and optionally shrinks its size if the new size falls below a power of two. On code, regex and arrays it does nothing yet, but might add type optimizations on the current dynamic status. cperl-only.</p>

<h2 id="New-strict-hashpairs">New strict hashpairs</h2>

<p>Added <code>use strict &#39;hashpairs&#39;</code> to allow only pairs for hash assignments, within a map even only an empty or single pair. See <a href="https://github.com/perl11/cperl/issues/281">[cperl #281</a>. cperl-only.</p>

<h2 id="Honor-the-BOM">Honor the BOM</h2>

<p>With any of three supported BOMs set <code>use utf8</code> and <code>use feature &#39;unicode_strings&#39;</code> at compile-time as documented until perl 5.26.</p>

<p>With 5.26 perl5 decided to change the documentation to match the broken implementation. With cperl 5.27.0c the implementation was fixed instead. See <a href="https://github.com/perl11/cperl/issues/269">[cperl #269]</a> and <a href="https://rt.perl.org/Public/Bug/Display.html?id=121292">[perl #121292]</a>. cperl-only.</p>

<h2 id="Safer-perl--c:s-cmdline-flag">Safer perl -c:s cmdline flag</h2>

<p>Avoid undoable and unsafe sideeffects (io, ...) in the CHECK mode, esp. for editor syntax checks. See <a href="https://github.com/perl11/cperl/issues/263">[cperl #263]</a></p>

<p>Essentially prepend <code>-Mops=:browse,:load,print</code> with <code>-c:s</code>. cperl-only.</p>

<h2 id="class-role-method-has-fields">class, role, method, has, fields</h2>

<p>cperl has now the <code>class</code>, <code>role</code>, <code>method</code> and <code>has</code> keywords as in perl6, <a href="/cperl/lib/fields.html">fields</a> was extended. <b>has</b> fields are lexically scoped variables, available in all methods and internally represented via oelem OPs and fields. <code>multi</code> methods are not yet supported. There are no perl6-like public, private sigils, use the <code>_</code> prefix as convention for private. See <a href="/cperl/perlclass.html">perlclass</a>.</p>

<p>Old user-subroutines or parser-hacks with these names are still supported, but not recommended. <a href="/cperl/lib/B.html">B</a> does not export class anymore.</p>

<h2 id="Check-and-normalize-stringified-names">Check and normalize stringified names</h2>

<p>Before symbols and identifiers created from strings at run-time were added asis. Now those names are treated almost as in the parser at compile-time, i.e. unicode is normalized, mixed Unicode scripts are checked at run-time also. cperl-only.</p>

<p>Behaviour of <a href="/cperl/perlapi.html#valid_ident">&quot;valid_ident&quot; in perlapi</a>:</p>

<pre><code>    ${&quot;\xc3\x28&quot;}       =&gt; FALSE.  Illegal unicode, but no warning or error,
                           unless under strict names.
    ${&quot;E\x{45}\x{301}&quot;} =&gt; TRUE.   Normalized to $E\x{c9}
    ${&quot;&#x90F;x&#x1E70;&#xBB0;::&#x2A6;&#x1356;&#x3121;s&#x228;&quot;}   =&gt; FALSE. Error: Invalid script Tamil in identifier
                            &#xBB0;::&#x2A6;&#x1356;&#x3121;s&#x228; for U+0BB0. Have Devanagari</code></pre>

<p>See below <a href="#strict-names">&quot;strict names&quot;</a>. <code>use strict</code> fatalizes now any run-time identifier parsing problem. cperl-only.</p>

<h2 id="strict-names">strict names</h2>

<p>strict names is the default when using <code>use strict</code>. Reject illegal identifiers at run-time when created dynamically from strings, which would be rejected at compile-time. cperl-only.</p>

<pre><code>    use strict &quot;names&quot;;
    ${&quot;\$var&quot;}    =&gt; Invalid identifier &quot;$var&quot; while &quot;strict names&quot;
    ${&quot;\xff&quot;}     =&gt; Invalid identifier &quot;\377&quot; while &quot;strict names&quot;
    ${&quot;\xc3\x28&quot;} =&gt; Invalid identifier &quot;\303(&quot; while &quot;strict names&quot;</code></pre>

<p>See <a href="/cperl/perldata.html#Identifier-parsing">&quot;Identifier parsing&quot; in perldata</a> and <a href="http://perl11.org/blog/strict-names.html">http://perl11.org/blog/strict-names.html</a> cperl-only.</p>

<h2 id="Optimize-static-methods-to-subs">Optimize static methods to subs</h2>

<p>When a method call can be proven at compile-time to use a specific subroutine, optimize away the run-time method dispatch on a non-threaded perl. When it is for a XS subroutine, such as with e.g. <code>use strict;</code> which does <code>BEGIN {require strict;} strict-&gt;import;</code> the <code>strict-&gt;import</code> part is optimized from the slow <code>entersub</code> op to the <code>enterxssub</code> op, as if via <code>strict::import(&quot;strict&quot;,...)</code>. The slow GV lookup in entersub cannot be converted to a faster CVref lookup, as this would break dynamic method redefinitions. See <a href="http://blogs.perl.org/users/rurban/2011/06/how-perl-calls-subs-and-methods.html">http://blogs.perl.org/users/rurban/2011/06/how-perl-calls-subs-and-methods.html</a>. This is ~4% faster for each such method call. cperl-only.</p>

<h2 id="Named-anonymous-CV---usenamedanoncv">Named anonymous CV - usenamedanoncv</h2>

<p>Support named anonymous CV names, i.e. orphaned or interim subroutine names are not changed to <code>__ANON__</code> anymore, but a <code>@</code> character is appended. The <code>@</code> character is also used to identify numbered special blocks like <code>BEGIN@1</code> in <a href="/cperl/lib/Devel/NYTProf.html">Devel::NYTProf</a> and later to name and identify <b>multi</b> methods (polymorphism).</p>

<h2 id="Dump-more-COP-fields">Dump more COP fields</h2>

<p>Dump the values of a COP <code>$^H</code>, <code>%^H</code> and the lexical warnings via <code>op_dump()</code> and it&#39;s XS module <a href="/cperl/lib/Devel/Peek.html">Devel::Peek</a>. Improve the display of cop SEQ values and ranges, and padnames. Added a DEBUGGING <code>cop_dump()</code> helper, esp. useful for deleted <code>PL_curcop</code>&#39;s. cperl-only.</p>

<h2 id="More-unicode-ops">More unicode ops</h2>

<p>Added the strong unicode fraction op <code>/</code> U+2044, which binds stronger than all other arithmetic ops, and the two unicode multiplication ops <code>&sdot;</code> U+022C5 (dot operator) and <code>&#x2219;</code> U+2219 (multiplication dot), which binds the same as <code>*</code>. cperl-only.</p>

<h2 id="is-a-valid-part-of-a-subroutine-name"><code>&#39;</code> is a valid part of a subroutine name</h2>

<p>Accept <code>&#39;</code> as valid subroutine name character in declarations, if in the middle, just don&#39;t expand it to <code>::</code>. This allows: <code>sub don&#39;t { ... }</code> but not <code>sub do&#39; {}</code> nor <code>sub &#39;do {}</code>.</p>

<p>Unfortunately using this name is not yet as easy as before, when the <code>&#39;</code> was expanded to <code>::</code>. <code>print don&#39;t;</code> is illegal, as the quote looks for the 2nd string delimiter pair, and doesn&#39;t yet check for the existing subroutine name.</p>

<p>In XS you can check for the define <code>PERL_NO_QUOTE_PKGSEPERATOR</code> how the quote is handled.</p>

<h2 id="delete-on-key-value-slices"><a href="/cperl/perlfunc.html#delete-EXPR">delete</a> on key/value slices</h2>

<p><a href="/cperl/perlfunc.html#delete-EXPR">delete</a> can now be used on key/value slices, returning the keys along with the deleted values. <a href="https://rt.perl.org/Ticket/Display.html?id=131328">[perl #131328]</a></p>

<h2 id="Unicode-10.0-is-supported">Unicode 10.0 is supported</h2>

<p>A list of changes is at <a href="http://www.unicode.org/versions/Unicode10.0.0">http://www.unicode.org/versions/Unicode10.0.0</a>.</p>

<h2 id="Experimentally-there-are-now-alphabetic-synonyms-for-some-regular-expression-assertions">Experimentally, there are now alphabetic synonyms for some regular expression assertions</h2>

<p>If you find it difficult to remember how to write certain of the pattern assertions, there are now alphabetic synonyms.</p>

<pre><code> CURRENT                NEW SYNONYMS
 ------                 ------------
 (?=...)        (*pla:...) or (*positive_lookahead:...)
 (?!...)        (*nla:...) or (*negative_lookahead:...)
 (?&lt;=...)       (*plb:...) or (*positive_lookbehind:...)
 (?&lt;!...)       (*nlb:...) or (*negative_lookbehind:...)
 (?&gt;...)        (*atomic:...)</code></pre>

<p>These are considered experimental, so using any of these will raise (unless turned off) a warning in the <code>experimental::alpha_assertions</code> category.</p>

<h2 id="Re-enable-warnings-illegalproto">Re-enable warnings illegalproto</h2>

<p>Parse prototypes for errors again. Either with <code>:prototype()</code> or as signature. Illegal prototypes are not stored. Most illegal protos are subsequently parsed as signature, but some are just wrong protos, such as <code>&#39;[$&#39;</code> missing the <code>&#39;]&#39;</code>, or <code>:prototype($_$)</code>.</p>

<h2 id="In-place-editing-is-now-safer">In-place editing is now safer</h2>

<p>Previously in-place editing would delete or rename the input file as soon as you started working on a new file.</p>

<p>Without backups this would result in loss of data if there was an error, such as a full disk, when writing to the output file.</p>

<p>This has changed so that the input file isn&#39;t replaced until the output file has been completely written and successfully closed.</p>

<p>This works by creating a work file in the same directory, which is renamed over the input file once the output file is complete.</p>

<p>Incompatibilities:</p>

<ul>

<li><p>Since this renaming needs to only happen once, if you create a thread or child process, that renaming will only happen in the original thread or process.</p>

</li>
<li><p>If you change directories while processing a file, and your operating system doesn&#39;t provide the <code>unlinkat()</code>, <code>renameat()</code> and <code>fchmodat()</code> functions, the final rename step may fail.</p>

</li>
</ul>

<p><a href="https://rt.perl.org/Public/Bug/Display.html?id=127663">[perl #127663]</a></p>

<h2 id="Initialisation-of-aggregate-state-variables">Initialisation of aggregate state variables</h2>

<p>A persistent lexical array or hash variable can now be initialized, by an expression such as <code>state @a = qw(x y z)</code>. Initialization of a list of persistent lexical variables is still not possible.</p>

<h2 id="Full-size-inode-numbers">Full-size inode numbers</h2>

<p>On platforms where inode numbers are of a type larger than perl&#39;s native integer numerical types, <a href="/cperl/perlfunc.html#stat">stat</a> will preserve the full content of large inode numbers by returning them in the form of strings of decimal digits. Exact comparison of inode numbers can thus be achieved by comparing with <code>eq</code> rather than <code>==</code>. Comparison with <code>==</code>, and other numerical operations (which are usually meaningless on inode numbers), work as well as they did before, which is to say they fall back to floating point, and ultimately operate on a fairly useless rounded inode number if the real inode number is too big for the floating point format.</p>

<h2 id="Changed-warnings::register-handling-of-all">Changed warnings::register handling of all</h2>

<p>If a scope used &quot;use warnings &#39;all&#39;&quot; to turn on all warnings and then turned off some specific warnings, then that scope wouldn&#39;t get warnings for subsequently-registered warning categories, because its bitset doesn&#39;t extend to the bit controlling the new category.</p>

<p>Unlike all other warning categories, the bits for &quot;all&quot; used to be set only when there were no warning categories disabled; disabling any would also clear the &quot;all&quot; bits. That was supporting the dynamic nature of warnings::register extending the all-warnings bitset for new categories. This exception is now removed, so the meaning of the &quot;all&quot; bits is now the more obvious meaning, of indicating the default treatment that the scope wants for warnings not falling into any category known to the bitset. In <code>warnings::warnif()</code> et al, if the caller&#39;s bitset is found to be too short to have a bit for the relevant category, then the setting for the &quot;all&quot; category is used instead.</p>

<p>Because the length of a bitset is an integral number of bytes, but only two bits are used per category, the length of a bitset doesn&#39;t precisely indicate which categories had been registered by the time it was constructed. So the standard bitsets for the &quot;all&quot; category are now always filled to their byte length, with bits set preemptively for categories not yet registered that fall within the current bitset length.</p>

<p>When a warnings pragma operates on a bitset, it first expands it to the preferred length, by duplicating the &quot;all&quot; bits for the categories covered by the new length. It is careful to maintain the length when combining the bitset with the standard bitsets for categories. When a bitset is read from <code>${^WARNING_BITS}</code> or from <code>caller()</code>, the standard <code>pWARN_ALL</code> setting is no longer expanded by the core to <code>$warnings::Bits{all}</code>, because the core&#39;s short <code>WARN_ALLstring</code> will now be expanded correctly just like any other bitset.</p>

<p>Fixes <a href="https://rt.perl.org/Public/Bug/Display.html?id=108778">[perl #108778]</a></p>

<h2 id="Computed-shaped-array-sizes">Computed shaped array sizes</h2>

<p>This is now a valid shaped array delaration, with the lhs array size computed from the number of constant elements in the rhs list expressions. The array must only consist of compile-time scalars.</p>

<pre><code>    my @a[] = (0,1,2);</code></pre>

<p><code>my @a[];</code> without assignment is still a syntax error.</p>

<p>See <a href="https://github.com/perl11/cperl/issues/210">[cperl #210]</a> cperl-only.</p>

<h2 id="New-read-only-predefined-variable-SAFE_LOCALES">New read-only predefined variable <code>${^SAFE_LOCALES}</code></h2>

<p>This variable is 1 if the Perl interpreter is operating in an environment where it is safe to use and change locales (see <a href="/cperl/perllocale.html">perllocale</a>.) This variable is true when the perl is unthreaded, or compiled in a platform that supports thread-safe locale operation (see next item).</p>

<h2 id="Locales-are-now-thread-safe-on-systems-that-support-them">Locales are now thread-safe on systems that support them</h2>

<p>These systems include Windows starting with Visual Studio 2005 and POSIX 2008 systems.</p>

<p>The implication is that you are now free to use locales and changes them in a threaded environment. Your changes affect only your thread. See <a href="/cperl/perllocale.html#Multi-threaded-operation">&quot;Multi-threaded operation&quot; in perllocale</a></p>

<h2 id="Mixed-Unicode-scripts-in-strings">Mixed Unicode scripts in strings</h2>

<p>perl5 added a string check via regex for mixed unicode scripts, which might be marginally useful. Note that this feature doesn&#39;t prevent from security attacks as cperl identifier protections. Only cperl detects mixed unicode scripts in identifiers.</p>

<p>A mixture of scripts, such as Cyrillic and Latin, in a string is often the sign of a spoofing attack. A new regular expression construct now allows for easy detection of these. For example, you can say</p>

<pre><code> qr/(*script_run: \d+ \b )/x</code></pre>

<p>And the digits matched will all be from the same set of 10. You won&#39;t get a look-alike digit from a different script that has a different value than what it appears to be.</p>

<p>Or:</p>

<pre><code> qr/(*sr: \b \w+ \b )/x</code></pre>

<p>makes sure that all the characters come from the same script.</p>

<p>You can also combine script runs with <code>(?&gt;...)</code> (or <code>*atomic:...)</code>).</p>

<p>Instead of writing:</p>

<pre><code>    (*sr:(?&lt;...))</code></pre>

<p>you can now run:</p>

<pre><code>    (*asr:...)
    # or
    (*atomic_script_run:...)</code></pre>

<p>This is considered experimental, so using it will raise (unless turned off) a warning in the <code>experimental::script_run</code> category.</p>

<p>See <a href="/cperl/perlre.html#Script-Runs">&quot;Script Runs&quot; in perlre</a>.</p>

<h2 id="String--and-number-specific-bitwise-ops-are-no-longer-experimental">String- and number-specific bitwise ops are no longer experimental</h2>

<p>The new string-specific (<code>&amp;. |. ^. ~.</code>) and number-specific (<code>&amp; | ^ ~</code>) bitwise operators introduced in Perl 5.22 that are available within the scope of <code>use feature &#39;bitwise&#39;</code> are no longer experimental. Because the number-specific ops are spelled the same way as the existing operators that choose their behaviour based on their operands, these operators must still be enabled via the &quot;bitwise&quot; feature, in either of these two ways:</p>

<pre><code>    use feature &quot;bitwise&quot;;

    use v5.28; # &quot;bitwise&quot; now included</code></pre>

<p>They are also now enabled by the <b>-E</b> command-line switch.</p>

<p>The &quot;bitwise&quot; feature no longer emits a warning. Existing code that disables the &quot;experimental::bitwise&quot; warning category that the feature previously used will continue to work.</p>

<p>One caveat that module authors ought to be aware of is that the numeric operators now pass a fifth TRUE argument to overload methods. Any methods that check the number of operands may croak if they do not expect so many. XS authors in particular should be aware that this:</p>

<pre><code>    SV *
    bitop_handler (lobj, robj, swap)</code></pre>

<p>may need to be changed to this:</p>

<pre><code>    SV *
    bitop_handler (lobj, robj, swap, ...)</code></pre>

<h1 id="Security">Security</h1>

<h2 id="CVE-2017-12837-Heap-buffer-overflow-in-regular-expression-compiler">[CVE-2017-12837] Heap buffer overflow in regular expression compiler</h2>

<p>Compiling certain regular expression patterns with the case-insensitive modifier could cause a heap buffer overflow and crash perl. This has now been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131582">[perl #131582]</a></p>

<h2 id="CVE-2017-12883-Buffer-over-read-in-regular-expression-parser">[CVE-2017-12883] Buffer over-read in regular expression parser</h2>

<p>For certain types of syntax error in a regular expression pattern, the error message could either contain the contents of a random, possibly large, chunk of memory, or could crash perl. This has now been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131598">[perl #131598]</a></p>

<h2 id="CVE-2017-12814-ENV-key-stack-buffer-overflow-on-Windows">[CVE-2017-12814] <code>$ENV{$key}</code> stack buffer overflow on Windows</h2>

<p>A possible stack buffer overflow in the <code>%ENV</code> code on Windows has been fixed by removing the buffer completely since it was superfluous anyway. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131665">[perl #131665]</a></p>

<h2 id="Unsigned-long-stack-access-of-printf-format-arguments">Unsigned long stack access of printf format arguments</h2>

<p>perl 5.27.5 started allowing unsigned long/4 stack indices for its sv arguments, and width and precision with the API even allowing <code>unsigned long</code>. Previously those numbers were safely typed to <code>int</code>. Revert that security problem in cperl. The maximal width and precision is also back to INT_MAX. See <a href="https://github.com/perl11/cperl/issues/344">[cperl #344]</a></p>

<h2 id="Disallow-illegal-glob-with-embedded-NUL">Disallow illegal glob with embedded NUL</h2>

<p>E.g. <code>&lt;$fh\000&gt;</code> throws now the safe syscalls warning, and errors with <code>Glob not terminated</code>, and does not pass the illegal glob path to the internal or external glob.</p>

<p>This problem was added with v5.27.5 by replacing strchr with memchr, allowing such illegal strings. See <a href="https://github.com/perl11/cperl/issues/342">[cperl #342]</a> cperl-only.</p>

<h2 id="Follow-chroot-with-chdir">Follow chroot with chdir(&quot;/&quot;)</h2>

<p>Fixed two security issues with the chroot op:</p>

<p>1. fail on embedded NUL in the chroot argument. Set <code>errno</code> to EINVAL.</p>

<p>2. If a call to chroot is not followed by a call to chdir(&quot;/&quot;) the chroot jail confinement can be violated. In Perl_pp_chroot: A call to chroot followed by an operation that may escape from the chroot jail. Coverity CID #165302 Insecure chroot.</p>

<h2 id="Set-umask-0600-before-calling-mkstemp">Set umask(0600) before calling mkstemp</h2>

<p>POSIX 2008 demands such an umask, but it is still problematic on Solaris, HP-UX and AIX and older libcs, e.g. glibc &lt;= 2.06. Temporarily set the umask such that the temp. file has 0600 permissions.</p>

<h2 id="Note-on-the-perl5-Hash-Function-Change">Note on the perl5 Hash Function Change</h2>

<p>perl5 still claims to have improved hash table security by switching to mostly &quot;secure&quot; hash functions: Siphash (2-4 and 1-3 variants), Zaphod32, and StadtX hash. In addition they support SBOX32 (a form of tabular hashing) for hashing short strings, in conjunction with any of the other hash functions provided.</p>

<p>This is a false claim and pure security theatre. Hash tables cannot be made secure by switching to slower but still insecure hash functions. Only hash function with more than 256 bits can be considered secure All 32bit hash functions can be trivially brute-forced (in up to max 4min for the slowest) once you know the secret seed, which is easily exposed in perl5. Hash table security can only be done via a secure collision strategy. Hash table hash functions must be small and fast.</p>

<p>See also <a href="http://perl11.org/blog/cperl-hash-tables.html">cperl hash tables</a> and <a href="http://perl11.org/blog/seed.html">The dangerous SipHash myth</a></p>

<h1 id="Incompatible-Changes">Incompatible Changes</h1>

<h3 id="use-strict-hashpairs">use strict hashpairs</h3>

<p><code>use strict</code> now includes a hashpair enforcement; this will now fail:</p>

<pre><code>  my %xsc = map { /(.*)\.xs$/ ? (&quot;$1.c&quot; =&gt; 1, &quot;$1.cc&quot; =&gt; 1) : () } @files;</code></pre>

<p>Two pairs being added in a map block violates strict hashpairs. Add the second pair in a second loop or assign to an array and then to an hash or add <code>no strict &#39;hashpairs&#39;</code>.</p>

<pre><code>  my %xsc = map { /(.*)\.xs$/ &amp;&amp; (&quot;$1.c&quot; =&gt; 1) } @files;
  /^(.*)\.xs$/) &amp;&amp; $xsc{&quot;$1.cc&quot;} = 1 for @files;</code></pre>

<p>or</p>

<pre><code>  my @xsc = map { /(.*)\.xs$/ ? (&quot;$1.c&quot; =&gt; 1, &quot;$1.cc&quot; =&gt; 1) : () } @files;
  my %xsc = @xsc;</code></pre>

<p>or</p>

<pre><code>  my %xsc;
  {
    no strict &#39;hashpairs&#39;;
    %xsc = map { /(.*)\.xs$/ &amp;&amp; (&quot;$1.c&quot; =&gt; 1) } @files;
    /^(.*)\.xs$/) &amp;&amp; $xsc{&quot;$1.cc&quot;} = 1 for @files;
  }</code></pre>

<p>cperl-only.</p>

<h2 id="Comma-less-variable-lists-in-formats-are-no-longer-allowed">Comma-less variable lists in formats are no longer allowed</h2>

<p>Omitting the commas between variables passed to formats is no longer allowed. This has been deprecated since perl 5.000.</p>

<h2 id="The-:locked-and-:unique-attributes-have-been-removed">The <code>:locked</code> and <code>:unique</code> attributes have been removed</h2>

<p>These have been no-ops and deprecated since perl 5.12 and 5.10, respectively.</p>

<h2 id="N-with-nothing-between-the-braces-is-now-illegal"><code>\N{}</code> with nothing between the braces is now illegal.</h2>

<p>This has been deprecated since Perl 5.24.</p>

<h2 id="Opening-the-same-symbol-as-both-a-file-and-directory-handle-is-no-longer-allowed">Opening the same symbol as both a file and directory handle is no longer allowed</h2>

<p>Using <a href="/cperl/perlfunc.html#open-FILEHANDLE-EXPR">open()</a> and <a href="/cperl/perlfunc.html#opendir-DIRHANDLE-EXPR">opendir()</a> to associate both a filehandle and a dirhandle to the same symbol (glob or scalar) has been deprecated since Perl 5.10.</p>

<h2 id="Use-of-bare-to-mean-is-no-longer-allowed">Use of bare <code>&lt;&lt;</code> to mean <code>&lt;&lt;&quot;&quot;</code> is no longer allowed</h2>

<p>Use of a bare terminator has been deprecated since Perl 5.000.</p>

<h2 id="Setting-to-a-reference-to-a-non-positive-integer-no-longer-allowed">Setting $/ to a reference to a non-positive integer no longer allowed</h2>

<p>This used to work like setting it to <code>undef</code>, but has been deprecated since Perl 5.20.</p>

<h2 id="Unicode-code-points-with-values-exceeding-IV_MAX-are-now-fatal">Unicode code points with values exceeding <code>IV_MAX</code> are now fatal.</h2>

<p>This was deprecated since Perl 5.24.</p>

<h2 id="B::OP::terse-no-longer-exists"><code>B::OP::terse</code> no longer exists.</h2>

<p>Use <code>B::Concise::b_terse</code> instead.</p>

<h2 id="Use-of-inherited-AUTOLOAD-for-non-methods-is-no-longer-allowed">Use of inherited AUTOLOAD for non-methods is no longer allowed.</h2>

<p>This was deprecated in Perl 5.004.</p>

<h2 id="Use-of-strings-with-code-points-over-0xFF-is-not-allowed-for-bitwise-string-operators">Use of strings with code points over 0xFF is not allowed for bitwise string operators</h2>

<p>Code points over 0xFF do not make sense for bitwise operators.</p>

<h2 id="Backslash-no-longer-escapes-colon-in-PATH-for-the--S-switch">Backslash no longer escapes colon in PATH for the -S switch</h2>

<p>Previously the <code>-S</code> switch incorrectly treated backslash (&quot;\&quot;) as an escape for colon when traversing the <code>PATH</code> environment variable. <a href="https://rt.perl.org/Ticket/Display.html?id=129183">[perl #129183]</a></p>

<h2 id="Subroutines-no-longer-need-typeglobs">Subroutines no longer need typeglobs</h2>

<p>Perl 5.22.0 introduced an optimization allowing subroutines to be stored in packages as simple sub refs, not requiring a full typeglob (thus potentially saving large amounts of memeory). However, the optimization was flawed: it only applied to the main package.</p>

<p>This optimization has now been extended to all packages. This may break compatibility with introspection code that looks inside stashes and expects everything in them to be a typeglob.</p>

<p>When this optimization happens, the typeglob still notionally exists, so accessing it will cause the stash entry to be upgraded to a typeglob. The optimization does not apply to XSUBs or exported subroutines, and calling a method will undo it, since method calls cache things in typeglobs.</p>

<h2 id="is-a-term-in-cperl-not-a-statement">... is a term in cperl, not a statement</h2>

<p>perl5.27.6 restricted <code>...</code>, the yada-yada operator, to be a statement only. cperl reserved <code>...</code> for the ellipsis, i.e. unassigned varargs in signatures to be passed through. Which is not a statement, but a term. In cperl <code>...</code> is a TERM. Before <code>...</code> was parsed as an operator, also used for ranges.</p>

<p>This affects illegal code like:</p>

<pre><code>    ... . &quot;foo&quot;;
    ... if $a &lt; $b;
    do{...}</code></pre>

<p>cperl-only.</p>

<h2 id="Illegal-NUL-syntax-error">Illegal NUL, syntax error</h2>

<p>Embedded NUL bytes read from files, not used in filters, are not whitespace anymore, they are syntax errors.</p>

<p>See <a href="https://github.com/perl11/cperl/issues/345">[cperl #345]</a> vs <a href="https://rt.perl.org/Public/Bug/Display.html?id=105920">[perl #105920]</a>.</p>

<p>Parsing NUL bytes is now consistent from files with eval string. <code>\0</code> delimited <code>q</code> quote is still valid though.</p>

<h2 id="Only-B::class-is-valid">Only B::class is valid</h2>

<p>The <a href="/cperl/lib/B.html">B</a> module does not export the <b>class</b> method anymore. You need to use the full <code>B::class</code> name to avoid confusion with the new <a href="/cperl/perlclass.html">class</a> keyword. cperl-only.</p>

<h2 id="Sort-algorithm-can-no-longer-be-specified">Sort algorithm can no longer be specified</h2>

<p>Since Perl 5.8, the <a href="/cperl/lib/sort.html">sort</a> pragma has had subpragmata <code>_mergesort</code>, <code>_quicksort</code>, and <code>_qsort</code> that can be used to specify which algorithm perl should use to implement the <a href="/cperl/perlfunc.html#sort">sort</a> builtin. This was always considered a dubious feature that might not last, hence the underscore spellings, and they were documented as not being portable beyond Perl 5.8. These subpragmata have now been deleted, and any attempt to use them is an error. The <a href="/cperl/lib/sort.html">sort</a> pragma otherwise remains, and the algorithm-neutral <code>stable</code> subpragma can be used to control sorting behaviour. <a href="https://rt.perl.org/Ticket/Display.html?id=119635">[perl #119635]</a></p>

<h2 id="Over-radix-digits-in-floating-point-literals">Over-radix digits in floating point literals</h2>

<p>Octal and binary floating point literals used to permit any hexadecimal digit to appear after the radix point. The digits are now restricted to those appropriate for the radix, as digits before the radix point always were.</p>

<h2 id="Return-type-of-unpackstring">Return type of <code>unpackstring()</code></h2>

<p>The return types of the C API functions <code>unpackstring()</code> and <code>unpack_str()</code> have changed from <code>I32</code> to <code>SSize_t</code>, in order to accommodate datasets of more than two billion items.</p>

<h1 id="Deprecations">Deprecations</h1>

<h2 id="Use-of-vec-on-strings-with-code-points-above-0xFF-is-deprecated">Use of <a href="/cperl/perlfunc.html#vec-EXPR-OFFSET-BITS"><code>vec</code></a> on strings with code points above 0xFF is deprecated.</h2>

<p>Use of these is nonsensical, as <code>vec</code> is a bit-oriented operation, which operates on the underlying UTF-8 representation these strings must be in, and will likely give unexpected results.</p>

<h2 id="Some-uses-of-unescaped-are-no-longer-fatal">Some uses of unescaped <code>&quot;{&quot;</code> are no longer fatal</h2>

<p>Perl 5.26.0 fatalized some uses of an unescaped left brace, but an exception was made at the last minute, specifically crafted to be a minimal change to allow GNU Autoconf to work. This code is heavily depended upon, and continues to use the deprecated usage. Its use of an unescaped left brace is one where we have no intention of repurposing <code>&quot;{&quot;</code> to be something other than itself.</p>

<p>That exception is now generalized to include various other such cases where the <code>&quot;{&quot;</code> will not be repurposed. This is to get real experience with this more complicated change now, in case we need to issue a dot release if we find other things like Autoconf that are important to work around.</p>

<p>Note that these uses continue to raise a deprecation message.</p>

<h2 id="Use-of-unescaped-immediately-after-a-in-regular-expression-patterns-is-deprecated">Use of unescaped <code>&quot;{&quot;</code> immediately after a <code>&quot;(&quot;</code> in regular expression patterns is deprecated</h2>

<p>Using unescaped left braces is officially deprecated everywhere, but it is not enforced in contexts where their use does not interfere with expected extensions to the language. A deprecation is added in this release when the brace appears immediately after an opening parenthesis. Before this, even if the brace was part of a legal quantifier, it was not interpreted as such, but as the literal characters, unlike other quantifiers that follow a <code>&quot;(&quot;</code> which are considered errors. Now, their use will raise a deprecation message, unless turned off.</p>

<h2 id="Assignment-to-will-be-fatal-in-Perl-5.30">Assignment to <code>$[</code> will be fatal in Perl 5.30</h2>

<p>Assigning a non-zero value to <a href="/cperl/perlvar.html#pod"><code>$[</code></a> has been deprecated since Perl 5.12, but was never given a deadline for removal. This has now been scheduled for Perl 5.30.</p>

<h2 id="hostname-wont-accept-arguments-in-Perl-5.32">hostname() won&#39;t accept arguments in Perl 5.32</h2>

<p>Passing arguments to <code>Sys::Hostname::hostname()</code> was already deprecated, but didn&#39;t have a removal date. This has now been scheduled for Perl 5.32. <a href="https://rt.perl.org/Ticket/Display.html?id=124349">[perl #124349]</a></p>

<h2 id="No-autovivification-of-hash-slice-anymore">No autovivification of hash slice anymore</h2>

<p>This is a new syntax warning, which is deprecated, and will disappear with v5.30c. Hash slices and key/value hash slices autovivified in subroutine arguments. This was a bug, but to check all your code for correctness and portability we keep this warning for 2 releases. See <a href="https://github.com/perl11/cperl/issues/347">[cperl #347]</a> and <a href="/cperl/perldiag.html#No-autovivification-of-hash-slice-anymore">&quot;No autovivification of hash slice anymore&quot; in perldiag</a>. cperl-only.</p>

<h2 id="Module-removals">Module removals</h2>

<p>The following modules will be removed from the core distribution in a future release, and will at that time need to be installed from CPAN. Distributions on CPAN which require these modules will need to list them as prerequisites.</p>

<p>The core versions of these modules will now issue <code>&quot;deprecated&quot;</code>-category warnings to alert you to this fact. To silence these deprecation warnings, install the modules in question from CPAN.</p>

<p>Note that these are (with rare exceptions) fine modules that you are encouraged to continue to use. Their disinclusion from core primarily hinges on their necessity to bootstrapping a fully functional, CPAN-capable Perl installation, not usually on concerns over their design.</p>

<dl>

<dt id="Locale::Codes"><a>Locale::Codes</a></dt>
<dd>

<p>was removed with 5.28 in perl and cperl.</p>

</dd>
<dt id="B::Debug"><a>B::Debug</a></dt>
<dd>

<p>will be removed from core with 5.30, and needs to be installed from CPAN then. Best together with <a>B::Flags</a>.</p>

</dd>
<dt id="DirHandle"><a href="/cperl/lib/DirHandle.html">DirHandle</a></dt>
<dd>

<p>is marked as deprecated and obsolete.</p>

</dd>
</dl>

<h1 id="Performance-Enhancements">Performance Enhancements</h1>

<ul>

<li><p>The start up overhead for creating regular expression patterns for /i case-folding and with Unicode properties (<code>\p{...}</code>) has been greatly reduced in most cases.</p>

</li>
<li><p>On hash split and shrink the rounding up to a power of 2 has been improved by a factor of 10^8 on modern hardware (that&#39;s 8 zeros: 100000000). On old hardware by a factor of 2. cperl-only.</p>

</li>
<li><p>Replaced the old quadratic bsd glob with a linear glob, detected by Russ Cox <a href="https://research.swtch.com/glob">https://research.swtch.com/glob</a>.</p>

</li>
<li><p>XS calls and static method calls were made faster again. Previously cperl (with 5.22.1c) fell from pure perl calls to XS calls and changed the call type to ENTERXSSUB for faster subsequent invocations. This made bigger examples ~10% faster. Now the compiler detects calls to XS code and changes the type to ENTERXSSUB. Also the method cache code checks now for an XS call and changes the type of the next OP. Overall the improvement is ~3.5%, but it depends on the frequency of XS calls. It&#39;s 0.5-1% slower without any XS call. Note that p5p decided to delete this feature request from it&#39;s TODO list.</p>

<p>All static method calls are now optimized to function calls at compile-time.</p>

<p>Before:</p>

<pre><code>    $ cperl5.27.0d-nt -Dt -e&#39;use strict&#39;
    (-e:1)      nextstate
    (-e:1)      const(PV(&quot;strict.pm&quot;))
    (-e:1)      require
    (-e:1)      nextstate
    (-e:1)      pushmark
    (-e:1)      const(PV(&quot;strict&quot;))
    (-e:1)      method_named(-&gt;import)
    (-e:1)      entersub(strict::import)
    (-e:1)      enterxssub(strict::import)
    (-e:1)      leavesub</code></pre>

<p>v5.27.1c:</p>

<pre><code>    $ cperl5.27.1d-nt -Dt -e&#39;use strict&#39;
    (-e:1)      nextstate
    (-e:1)      const(PV(&quot;strict.pm&quot;))
    (-e:1)      require
    (-e:1)      nextstate
    (-e:1)      pushmark
    (-e:1)      const(PV(&quot;strict&quot;))
    (-e:1)      method_named(-&gt;import)
    (-e:1)      enterxssub(strict::import)
    (-e:1)      leavesub</code></pre>

<p>v5.27.2c:</p>

<pre><code>    $ cperl5.27.2d-nt -Dt -e&#39;use strict&#39;
    (-e:1)      nextstate
    (-e:1)      const(PV(&quot;strict.pm&quot;))
    (-e:1)      require
    (-e:1)      nextstate
    (-e:1)      pushmark
    (-e:1)      const(PV(&quot;strict&quot;))
    (-e:1)      gv(strict::import)
    (-e:1)      enterxssub(strict::import)
    (-e:1)      leavesub</code></pre>

<p>See <a href="http://blogs.perl.org/users/rurban/2011/06/how-perl-calls-subs-and-methods.html">http://blogs.perl.org/users/rurban/2011/06/how-perl-calls-subs-and-methods.html</a></p>

<p>We don&#39;t yet optimize typed scalars to a static call. We don&#39;t walk the subtypes yet to find the method. The remaining <code>const(PV(&quot;strict&quot;))</code> op looks superfluous also, as the package is already resolved at compile-time. cperl-only.</p>

</li>
<li><p>Most checks for readonly packages are now avoided, needed to bypass the &quot;Attempt to access disallowed key %s in the restricted hash %CLASS::&quot; errors. Stash lookup now got a <b>GV_CLASS</b> flag and <code>hv_fetch*_ifexists</code> macros, which does the EXISTS and FETCH hash actions in the stash on one. cperl-only.</p>

</li>
<li><p>Optimized the loop ITER ops to jump directly to the subsequent AND op. For an empty body, this cuts about 20% off the time of an iteration. Backported from perl-5.27.3. This is a simplier implementation of the cperl <i>feature/gh138-iter-and</i> branch from <a href="https://github.com/perl11/cperl/issues/138">[cperl #138]</a>.</p>

<p>Thus inner loops are now smaller and faster: 15%-50%.</p>

<p>e.g. before:</p>

<pre><code>     f  &lt;{&gt; enteriter(next-&gt;q last-&gt;t redo-&gt;g) KS/DEF
     r  &lt;0&gt; iter_ary s
     s  &lt;|&gt; and(other-&gt;g) K/1
     g      &lt;;&gt; nextstate(main 559 (eval 15):1) v:{
     h      &lt;$&gt; gvsv(*_) s</code></pre>

<p>Now:</p>

<pre><code>     f  &lt;{&gt; enteriter(next-&gt;q last-&gt;s redo-&gt;g) KS/DEF
     r  &lt;|&gt; iter_ary(other-&gt;g) sK
     g      &lt;;&gt; nextstate(main 559 (eval 15):1) v:{
     h      &lt;$&gt; gvsv(*_) s</code></pre>

<p>cperl-only, <a href="https://github.com/perl11/cperl/issues/138">[cperl #138]</a>. Upstream 5.27 improved also a bit by skipping the AND op at run-time. cperl removed it from the optree at compile-time.</p>

</li>
<li><p>The <a href="/cperl/lib/fields.html">fields</a> API refactor using a local <a href="/cperl/perlapi.html#HvFIELDS">&quot;HvFIELDS&quot; in perlapi</a> buffer and not globals <code>%FIELDS</code> and <code>@FIELDS</code> SVs anymore gained 25% speed and similar memory improvements. cperl-only.</p>

</li>
<li><p>Optimize field method calls to faster oelemfast OPs, accessing the field directly. cperl-only.</p>

</li>
<li><p>Removed <code>PL_sv_count</code> variable and updates on every <code>new_SV</code> and <code>del_SV</code> on non-DEBUGGING builds. For refcount leak checks scan the arenas. cperl-only.</p>

</li>
<li><p><code>SvTRUE()</code> is now more efficient.</p>

</li>
<li><p>The <code>ref()</code> builtin is now much faster in boolean context, since it no longer bothers to construct a temporary string like <code>Foo=ARRAY(0x134af48)</code>.</p>

</li>
<li><p><code>keys()</code> in void and scalar contexts is now more efficient.</p>

</li>
<li><p>Various integer-returning ops are now more efficient in scalar/boolean context.</p>

</li>
<li><p>The common idiom of comparing the result of index() with -1 is now specifically optimised, e.g.</p>

<pre><code>    if (index(...) != -1) { ... }</code></pre>

</li>
<li><p>Slightly improved performance when parsing stash names. <a href="https://rt.perl.org/Public/Bug/Display.html?id=129990">[perl #129990]</a></p>

<p>cperl added the optimization to skip expanding <code>&#39;</code> to <code>::</code>. The <code>&#39;</code> as valid perl4-style package seperator was removed. In XS you can check for the define PERL_NO_QUOTE_PKGSEPERATOR if the quote as package seperator is disallowed. <code>&#39;</code> is now a valid part of a subroutine name.</p>

</li>
<li><p>Calls to <code>require</code> for an already loaded module are now slightly faster. <a href="https://rt.perl.org/Public/Bug/Display.html?id=132171">[perl #132171]</a></p>

</li>
<li><p>Many string concatenation expressions are now considerably faster, due to the introduction internally of a <code>multiconcat</code> opcode which combines multiple concatenations, and optionally a <code>=</code> or <code>.=</code>, into a single action. For example, apart from retrieving <code>$s</code>, <code>$a</code> and <code>$b</code>, this whole expression is now handled as a single op:</p>

<pre><code>    $s .= &quot;a=$a b=$b\n&quot;</code></pre>

<p>As a special case, if the LHS of an assign is a lexical variable or <code>my $s</code>, the op itself handles retrieving the lexical variable, which is faster.</p>

<p>In general, the more the expression includes a mix of constant strings and variable expressions, the longer the expression, and the more it mixes together non-utf8 and utf8 strings, the more marked the performance improvement. For example on a <code>x86_64</code> system, this code has been benchmarked running four times faster:</p>

<pre><code>    my $s;
    my $a = &quot;ab\x{100}cde&quot;;
    my $b = &quot;fghij&quot;;
    my $c = &quot;\x{101}klmn&quot;;

    for my $i (1..10_000_000) {
        $s = &quot;\x{100}wxyz&quot;;
        $s .= &quot;foo=$a bar=$b baz=$c&quot;;
    }</code></pre>

<p>In addition, <code>sprintf</code> expressions which have a constant format containing only <code>%s</code> and <code>%%</code> format elements, and which have a fixed number of arguments, are now also optimised into a <code>multiconcat</code> op.</p>

<p>This is not yet supported by the <a href="/cperl/lib/B/C.html">B::C</a> compiler modules.</p>

</li>
<li><p>Subroutines in packages no longer need to be stored in typeglobs, saving large amounts of memory. See <a href="#Subroutines-no-longer-need-typeglobs">&quot;Subroutines no longer need typeglobs&quot;</a> under <a href="#Incompatible-Changes">&quot;Incompatible Changes&quot;</a>, above.</p>

</li>
<li><p>The performance of pattern matching <code>[[:ascii:]]</code> and <code>[[:^ascii:]]</code> has been improved significantly except on EBCDIC platforms.</p>

</li>
<li><p>Various optimizations have been applied to matching regular expression patterns, so under the right circumstances, significant performance gains may be noticed. But in an application with many varied patterns, little overall improvement likely will be seen.</p>

</li>
<li><p>Other optimizations have been applied to UTF-8 handling, but these are not typically a major factor in most applications.</p>

</li>
</ul>

<h1 id="Modules-and-Pragmata">Modules and Pragmata</h1>

<p>Key highlights in this release across several modules:</p>

<h2 id="Removal-of-use-vars">Removal of use vars</h2>

<p>The usage of <code>use vars</code> has been discouraged since the introduction of <code>our</code> in Perl 5.6.0. Where possible the usage of this pragma has now been removed from the Perl source code.</p>

<p>This had a slight effect (for the better) on the output of <code>WARNING_BITS</code> in <a href="/cperl/lib/B/Deparse.html">B::Deparse</a>.</p>

<p>Several core modules released on CPAN will not work anymore with perl versions prior to 5.6.</p>

<h2 id="Use-of-DynaLoader-changed-to-XSLoader-in-many-modules">Use of DynaLoader changed to XSLoader in many modules</h2>

<p>XSLoader is more modern, and most modules already require perl 5.6 or greater, so no functionality is lost by switching. In some cases, we have also made changes to the local implementation that may not be reflected in the version on CPAN due to a desire to maintain more backwards compatibility.</p>

<p>Note that XSLoader is just an convenience extension over DynaLoader, for pure speed or less codesize DynaLoader is still the best solution.</p>

<h2 id="New-Modules-and-Pragmata">New Modules and Pragmata</h2>

<dl>

<dt id="Mu-0.01"><a href="/cperl/lib/Mu.html">Mu</a> 0.01</dt>
<dd>

<p>For now only the <code>new</code>, <code>CREATE</code> and <code>fields</code> methods, implemented as XS builtins.</p>

</dd>
<dt id="Metamodel"><a href="/cperl/lib/Metamodel.html">Metamodel</a></dt>
<dd>

<p>Just the documentation for the perl6 MOP.</p>

</dd>
</dl>

<h2 id="Updated-Modules-and-Pragmata">Updated Modules and Pragmata</h2>

<dl>

<dt id="Archive::Tar-2.30"><a href="/cperl/lib/Archive/Tar.html">Archive::Tar</a> 2.30</dt>
<dd>

<p>&#39;0&#39; is a valid name for an archive, change &#39;iter&#39; to check definedness. See <a href="https://metacpan.org/changes/distribution/Archive-Tar">https://metacpan.org/changes/distribution/Archive-Tar</a></p>

<p>Fix creating file with trailing whitespace on filename - fixes 103279</p>

<p>Allow archiving with absolute pathnames - fixes 97748</p>

<p>Small POD fix</p>

<p>Speed up extract when archive contains lots of files</p>

<p>CVE-2018-12015 directory traversal vulnerability <a href="https://rt.cpan.org/Ticket/Display.html?id=125523">[cpan #125523]</a></p>

</dd>
<dt id="arybase-0.15"><a href="/cperl/lib/arybase.html">arybase</a> 0.15</dt>
<dd>

<p>Remove #ifdef USE_ITHREADS around MUTEX_* calls</p>

</dd>
<dt id="attributes-1.14c"><a href="/cperl/lib/attributes.html">attributes</a> 1.14c</dt>
<dd>

<p>Remove deprecated no-op attributes :unique, :locked. Added another param to validate_proto.</p>

<p>Fixed :const parsing with SVs (cperl-only). Previously :const would set the containing sub to :const, now it sets the lexical to readonly, with deferring the attributes::import call after an assignment.</p>

<pre><code>    my %h :const = (a =&gt; 1);
=&gt;
    assign %h = (...);
    attributes-&gt;import(PACKAGE, \%h, const);</code></pre>

<p>See <a href="https://github.com/perl11/cperl/issues/294">[cperl #294]</a>.</p>

</dd>
<dt id="Attribute::Handlers-1.01_01"><a href="/cperl/lib/Attribute/Handlers.html">Attribute::Handlers</a> 1.01_01</dt>
<dd>

<p>Remove deprecated no-op attributes :unique, :locked</p>

<p>Fix autovivification bug with hash slice args to a function.</p>

</dd>
<dt id="B-1.71_08"><a href="/cperl/lib/B.html">B</a> 1.71_08</dt>
<dd>

<p>Support PL_sv_zero</p>

<p>Add non-destructive $cv-&gt;PUREGV method, which does not create a GV from a CvNAMED $cv. Warning: $cv-&gt;GV does create a GV from a CvNAMED $cv.</p>

<p>Internal Refactor: thread API</p>

<p>Add many missing methods and docs. Some from B::C.</p>

<p>Don&#39;t export class anymore.</p>

</dd>
<dt id="B::C-1.55_08"><a href="/cperl/lib/B/C.html">B::C</a> 1.55_08</dt>
<dd>

<p>Support pgcc, seperate it from gcc</p>

<p>One global dJMPENV target, not multiple. Esp. for B::CC.</p>

<p>ByteLoader 0.12 fix bytecode types, xgv_flags, xcv_flag were too small. type bs_sv to also include PADNAME, PADLIST, PADNAMELIST as union.</p>

<p>Add t/testc.sh</p>

<p>Fix compile-time REGEXP</p>

<p>Protect from destructive $cv-&gt;GV, renamed is_lexsub to is_named, allow @0, &amp;0, ... types.</p>

<p>Support POK/PVLV REGEXP for v5.27.3/v5.27.2c</p>

<p>VOL =&gt; volatile for v5.27.6/v5.27.2c</p>

<p>Warning: The new multiconcat op is not yet supported.</p>

</dd>
<dt id="B::Concise-1.003c"><a href="/cperl/lib/B/Concise.html">B::Concise</a> 1.003c</dt>
<dd>

<p>Support the new strict hints flags and abbrevate all strict flags as strict.</p>

<p>Support PL_sv_zero</p>

</dd>
<dt id="B::Deparse-1.48_04c"><a href="/cperl/lib/B/Deparse.html">B::Deparse</a> 1.48_04c</dt>
<dd>

<p>Support boolean optims.</p>

<p>Better constant-dumping heuristics.</p>

<p>Many other bug fixes, and in particular, it now deparses variable attributes correctly:</p>

<pre><code>    my $x :foo;  # used to deparse as
                 # &#39;attributes&#39;-&gt;import(&#39;main&#39;, \$x, &#39;foo&#39;), my $x;</code></pre>

</dd>
<dt id="B::Terse-1.09_01"><a href="/cperl/lib/B/Terse.html">B::Terse</a> 1.09_01</dt>
<dd>

<p>Remove internal links to B::Debug</p>

</dd>
<dt id="B::Xref-1.07_02"><a href="/cperl/lib/B/Xref.html">B::Xref</a> 1.07_02</dt>
<dd>

<p>Support sub refs, and named anon subs.</p>

</dd>
<dt id="base-2.27c"><a href="/cperl/lib/base.html">base</a> 2.27c</dt>
<dd>

<p>Turn off HvCLASS again, just turn on SvREADONLY <code>@ISA</code>. With all the new class features, we cannot and should not compete.</p>

<p>The problem is the new sub as :method warning with classes, which would cause all Test::Simple methods to be declared as :method, as they derive from base.</p>

<p>Limit dotless-INC effect on base.pm with guard</p>

</dd>
<dt id="bignum-0.50c"><a href="/cperl/lib/bignum.html">bignum</a> 0.50c</dt>
<dd>

<p>merge with upstream</p>

</dd>
<dt id="blib-1.07"><a href="/cperl/lib/blib.html">blib</a> 1.07</dt>
<dd>

</dd>
<dt id="bytes-1.06"><a href="/cperl/lib/bytes.html">bytes</a> 1.06</dt>
<dd>

</dd>
<dt id="Carp-back-to-1.45_01c"><a href="/cperl/lib/Carp.html">Carp</a> back to 1.45_01c</dt>
<dd>

<p>The perl5.28 Carp 1.49 update broke the B::C compiler by compile-time references to too many packages for no apparent reason: warnings, overloading, overload, UNIVERSAL::isa. Even the simpliest scripts could not be compiled anymore.</p>

<p>We rather suggest fixing the broken code by checking the warnings, as in the changed tests. The infinite recursion bug in t/Carp_overloadless.t is handled by use warnings FATAL =&gt; &#39;recursion&#39; in the test, and your code should also.</p>

<p>The t/rt52610_crash.t with refcounted stack corruption is handled by eval wrapping in the test as your code should also.</p>

<p>The next Carp written in XS will not have these limitations, but a PP Carp should not overdo it. backtraces in critical error cases should be stable and perform no additional unstable dynamic loading.</p>

<p>Fix problems introduced by the partial EBCDIC support from version 1.35, and ISA constants. Not all stash elements are globs.</p>

</dd>
<dt id="charnames-1.45"><code>charnames</code> 1.45</dt>
<dd>

<p>Remove obsolete pod about NBSP</p>

</dd>
<dt id="Compress::Raw::Bzip2-2.081"><a href="/cperl/lib/Compress/Raw/Bzip2.html">Compress::Raw::Bzip2</a> 2.081</dt>
<dd>

<p>Support pgcc, seperate it from gcc</p>

</dd>
<dt id="Compress::Raw::Zlib-2.081"><a href="/cperl/lib/Compress/Raw/Zlib.html">Compress::Raw::Zlib</a> 2.081</dt>
<dd>

<p>Support pgcc, seperate it from gcc</p>

<p>Updated internal zlib from 1.2.8 to latest, past 1.2.11</p>

<p>Silence gcc compiler warnings when -Wsign-compare is enabled #123688: Compilation warnings with clang</p>

<p>Silence gcc compiler warnings when -Wimplicit-fallthrough is enabled #123358: Compilation warnings with gcc-7.*</p>

<p>Windows uses -lzlib. Linux uses -lz #123699: wrong external zlib name used on Windows</p>

<p>Update zlib-src directory to use zlib 1.2.11 #123245: perl 5.26.1 is vulnerable to CVE-2016-9843, CVE-2016-9841, CVE-2016-9840, CVE-2016-9842</p>

<p>Don&#39;t allow offset to be greater than length of buffer in crc32.</p>

<p>Change my_zcalloc to use safecalloc. <a href="https://github.com/madler/zlib/issues/253">https://github.com/madler/zlib/issues/253</a> is the upstream report for the remaining valgrind errors not already dealt with by 1.2.11. Using calloc in Zlib.xs for now as a workaround. #121074: valgrind errors in the test suite</p>

<p>Fixed upstream deflate. See <a href="https://github.com/madler/zlib/pull/327">https://github.com/madler/zlib/pull/327</a> 1.2.11 is not recommended to use.</p>

</dd>
<dt id="Config::Extensions-0.02"><a href="/cperl/lib/Config/Extensions.html">Config::Extensions</a> 0.02</dt>
<dd>

</dd>
<dt id="Config::Perl::V-0.30_01"><a href="/cperl/lib/Config/Perl/V.html">Config::Perl::V</a> 0.30_01</dt>
<dd>

<p>Add test for 5.26.1-RC1, and some cperl -V&#39;s</p>

<p>Fix signature with argument</p>

<p>Ignore ccache and compiler path in signature</p>

<p>Add default_inc_excludes_dot</p>

<p>use vars =&gt; our</p>

</dd>
<dt id="constant-1.34"><code>constant</code> 1.34</dt>
<dd>

</dd>
<dt id="coretypes-0.03c"><code>coretypes</code> 0.03c</dt>
<dd>

<p>Each coretype is now a class.</p>

</dd>
<dt id="CPAN-2.20_01"><a href="/cperl/lib/CPAN.html">CPAN</a> 2.20_01</dt>
<dd>

<p>See <a href="https://github.com/andk/cpanpm/pull/109">https://github.com/andk/cpanpm/pull/109</a></p>

</dd>
<dt id="Cpanel::JSON::XS-4.06"><a href="/cperl/lib/Cpanel/JSON/XS.html">Cpanel::JSON::XS</a> 4.06</dt>
<dd>

<p>MSVC 14.0 support and higher, changed nan in the runtime.</p>

<p>Stringify true again as &quot;1&quot;.</p>

<p>Disallow duplicate keys by default, only allow them in relaxed mode.</p>

<p>De-fragilize t/96_mojo.t false test to &quot;&quot;. It mostly is.</p>

<p>Fix and unify utf8 handling with 5.6.2 and improve many utf8 tests.</p>

<p>Add tests for boolean sv_yes and sv_no.</p>

<p>Check for correct module in %INC.</p>

<p>Relax inf/nan detection for newer msvcrt.dll runtime versions (it&#39;s now almost ANSI).</p>

<p>Fixed locale-insensitive numeric conversion on older perls. Fixed compilation under windows.</p>

<p>Simplify <code>allow_singlequote</code> check, coverity cid #165321. Remove logical dead code.</p>

<p>Added Cpanel::JSON::XS::Type as 2nd optional encode argument.</p>

<p>Removed calling get magic hooks twice in encode.</p>

<p>Fix setlocale thread race for older perls.</p>

<p>Fix overloaded eq/ne comparisons (GH #116 by demerphq, GH #117 by Graham Knopp): detect strings, protect from endless recursion. false is now ne &quot;True&quot;. clarify eq/ne rules in the docs.</p>

<p>Set decoded type (PR #115 by Pali)</p>

<p>Add json_type_weaken (PR #114 by Pali)</p>

<p>Fix tests for 5.6 (rurban, pali)</p>

<p>Add sereal cpanel_json_xs type (#110 James Rouzier)</p>

<p>Improved bencode/bdecode methods in cpanel_json_xs (#111 Fulvio Scapin)</p>

<p>Add encoder indent_length method (#103 rouzier), previously hard-coded to 3.</p>

<p>Fix centos7 locale crash (#101 McA), fix required for all threaded perl&#39;s &lt; 5.22 with glibc.</p>

<p>Fix uselocale() code. Probe for uselocale and xlocale.h with &lt;5.22 threaded.</p>

<p>Avoid setlocale race in threads with non-C locales, where the threads differ in the LC_NUMERIC locale. (#99 pali)</p>

</dd>
<dt id="Data::Dumper-2.170_03"><a href="/cperl/lib/Data/Dumper.html">Data::Dumper</a> 2.170_03</dt>
<dd>

<p>Attempt to work around XS deparse issues on old perls.</p>

<p>XS improvements</p>

<p>Quoting of glob names now obeys the Useqq option <a href="https://rt.perl.org/Ticket/Display.html?id=119831">[perl #119831]</a>.</p>

<p>Attempts to set an option to <code>undef</code> through a combined getter/setter method are no longer mistaken for getter calls <a href="https://rt.perl.org/Ticket/Display.html?id=113090">[perl #113090]</a>.</p>

</dd>
<dt id="Devel::Peek-1.27_03"><a href="/cperl/lib/Devel/Peek.html">Devel::Peek</a> 1.27_03</dt>
<dd>

<p>Add TYPECHECKED, RETTYPE and pad var names and types.</p>

<p>Dump the values of a COP $^H, %^H and lexical warnings. Improved the test a bit.</p>

<p>Use cv_set_call_checker_flags</p>

</dd>
<dt id="Devel::NYTProf-6.06"><a href="/cperl/lib/Devel/NYTProf.html">Devel::NYTProf</a> 6.06</dt>
<dd>

</dd>
<dt id="Devel::PPPort-3.42_04"><a href="/cperl/lib/Devel/PPPort.html">Devel::PPPort</a> 3.42_04</dt>
<dd>

<p>Restore silence under <code>make -s</code>. I broke it in cperl 5.27.0</p>

<p>Add <code>#if { CPERL &amp;&amp; VERSION </code> 5.26.0 }&gt; support, support parser enum expectation.</p>

<p>mkppport called PPPort_pm.PL without passing through MAKEFLAGS. Add --quiet support there</p>

<p>Fix WIDEST_UTYPE.</p>

<p>Support strict hashpairs, fix for . in @INC.</p>

<p>Merge with upstream, changed croak/mess/warn_nocontext/..., add NEED_ macros ...</p>

</dd>
<dt id="deprecate-0.03_01"><a href="/cperl/lib/deprecate.html">deprecate</a> 0.03_01</dt>
<dd>

<p>Add pod synopsis for modules for older perls.</p>

</dd>
<dt id="Digest::SHA-6.02"><a href="/cperl/lib/Digest/SHA.html">Digest::SHA</a> 6.02</dt>
<dd>

<p>Remove deprecated -p option and PurePerl variant.</p>

<p>Replaced DynaLoader with XSLoader.</p>

<p>Silenced compiler warnings from VS2017 RT #124477</p>

<p>Modified addfile to return error when given a directory name, makes behavior consistent with GNU coreutils shaXsum.</p>

</dd>
<dt id="DirHandle-1.05"><a href="/cperl/lib/DirHandle.html">DirHandle</a> 1.05</dt>
<dd>

<p>Document as obsolete</p>

</dd>
<dt id="DB_File-1.842"><a href="/cperl/lib/DB_File.html">DB_File</a> 1.842</dt>
<dd>

<p>Document the MacOS build failures &amp; how MacPort can work around the issue. #125238, #125585, RT#133280</p>

<p>Write all test db files into a directory created by File::Temp Protects against any possible races if running a parallel build.</p>

<p>#96357: DB_File destructor is not thread-safe Added CLONE_SKIP to DB_File.pm and included the test db-threads.t from the patch.</p>

<p>#124944 allow ppport.h-less builds in core</p>

</dd>
<dt id="DynaLoader-2.09c"><a href="/cperl/lib/DynaLoader.html">DynaLoader</a> 2.09c</dt>
<dd>

<p>Fix wrong usage of <code>SvREFCNT_inc_simple_NN</code> with a function, fixes a memory leak.</p>

</dd>
<dt id="Encode-2.98"><a href="/cperl/lib/Encode.html">Encode</a> 2.98</dt>
<dd>

<p>no strict hashpairs in encoding. fixed some -Wsign-compare See <a href="https://metacpan.org/changes/distribution/Encode">https://metacpan.org/changes/distribution/Encode</a></p>

<p>Skip the flapping test <i>t/Aliases.t</i> on threaded smokers, with random segfaults. This is a long standing core bug, with PMOP aliases or clone. First observed at <a href="https://github.com/rurban/perl-compiler/issues/73">https://github.com/rurban/perl-compiler/issues/73</a> (since 5.6)</p>

<p>Stop directory tweaking <code>$Encode::Encoding{utf8}</code></p>

<p>Fix gcc warnings for older gcc &lt; 4.0</p>

<p>Where possible do not depend on value of $@, instead use return value of eval</p>

<p>Fix more XS problems in Encode.xs file</p>

<p>Load modules Encode::MIME::Name and Storable normally</p>

<p>Remove no warnings &#39;redefine&#39;; and correctly loaddependences</p>

<p>Remove PP stubs and reformat predefine_encodings()</p>

<p>Run Encode XS BOOT code at compile time</p>

<p>Use Encode::define_encoding and propagate carp/croak message</p>

<p>cperl fixes: encoding undeprecated, no strict hashpairs</p>

<p>Cleanup code for handling fallback/replacement characters</p>

<p>lib/Encode/MIME/Name.pm t/mime-name.t Pulled: Add &quot;euc-cn&quot; =&gt; &quot;EUC-CN&quot; alias to Encode::MIME::Name https://github.com/dankogai/p5-encode/pull/124</p>

<p>lib/Encode/CN/HZ.pm lib/Encode/JP/JIS7.pm lib/Encode/MIME/Header.pm t/decode.t Pulled: Uninitialized value fixes #122 https://github.com/dankogai/p5-encode/pull/122</p>

<p>Makefile.PL Pulled: Fix -Werror=declaration-after-statement for gcc 4.1.2 https://github.com/dankogai/p5-encode/pull/121</p>

<p>Fixed deep recursion in Encode::find_encoding when decoding.</p>

</dd>
<dt id="experimental-0.020_01"><a href="/cperl/lib/experimental.html">experimental</a> 0.020_01</dt>
<dd>

<p>eval use feature, minor test fix. Add the declared_refs feature. Enable lexical_topic for cperl 5.24, added perl5 compat.</p>

</dd>
<dt id="Exporter-5.73"><a href="/cperl/lib/Exporter.html">Exporter</a> 5.73</dt>
<dd>

<p>More use vars =&gt; our</p>

</dd>
<dt id="ExtUtils::CBuilder-0.280230"><a href="/cperl/lib/ExtUtils/CBuilder.html">ExtUtils::CBuilder</a> 0.280230</dt>
<dd>

<p>Fix C++ compiler detection (RT #131749)</p>

</dd>
<dt id="ExtUtils::Constant-0.25_01"><a href="/cperl/lib/ExtUtils/Constant.html">ExtUtils::Constant</a> 0.25_01</dt>
<dd>

<p>Minor updates from p5p, but they are still distributing a broken module, bumping their version higher than ours. And worse, their version creates broken CPAN modules.</p>

</dd>
<dt id="ExtUtils::Embed-1.35"><a href="/cperl/lib/ExtUtils/Embed.html">ExtUtils::Embed</a> 1.35</dt>
<dd>

</dd>
<dt id="ExtUtils::Install-2.14"><a href="/cperl/lib/ExtUtils/Install.html">ExtUtils::Install</a> 2.14</dt>
<dd>

<p>Fix tests for when perl path contains a space</p>

<p>Fix win32 check</p>

<p>&#39;make -s&#39; support: set $INSTALL_QUIET automatically</p>

<p>Optimisations:</p>

<pre><code>  * use our instead of vars
  * lazy load modules
  * make OS variables into constants
  * move some calculations out of a loop</code></pre>

<p>Removed instructions using Build.PL from README</p>

<p>Load Win32API::File for _move_file_at_boot only when needed</p>

<p>Allow disabling autosplit by omitting autosplit dir</p>

</dd>
<dt id="ExtUtils::MakeMaker-8.35_06"><a href="/cperl/lib/ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a> 8.35_06</dt>
<dd>

<p>Merge our fixes to upstream 7.35_06 (which has e.g. the dlltool mingw and parallel MSVC fixes). Many fixes were already in, but some new upstream bugs crept in.</p>

<p>Support IO::Scalar handle as $parsefile argument to ExtUtils::MM_Unix::parse_version().</p>

<p>fix Invalid Locale symbol name. Invalid identifier &quot;ENCODING_UTF-8&quot; while &quot;strict names&quot;</p>

<p>fix XSMULTI static with strict linkers, avoid duplicate symbol _boot_XS__Test in: Test.o blib/arch/auto/XS/Test/Test.a(Test.o)</p>

<p>xsstatic: fixup MAKE_APERL_FILE, which was Makefile.aperl.aperl, add xs_static_lib_is_xs</p>

<p>MSVC: seperate dbgoutflag</p>

<p>VMS: add static_lib_pure_cmd</p>

<p>Liblist: support libdirs with spaces</p>

</dd>
<dt id="ExtUtils::Miniperl-1.08"><a href="/cperl/lib/ExtUtils/Miniperl.html">ExtUtils::Miniperl</a> 1.08</dt>
<dd>

<p>Support <b>afl-fuzz</b> with <a href="/cperl/perlhacktips.html#afl-fuzz">afl-clang-fast</a></p>

</dd>
<dt id="ExtUtils::ParseXS-3.39_03"><a href="/cperl/lib/ExtUtils/ParseXS.html">ExtUtils::ParseXS</a> 3.39_03</dt>
<dd>

<p>Skip <code>PUTBACK;return;</code> on XSRETURN in PPCODE</p>

<p>Remove perl5 incompatible <code>__attribute__global__</code> needed for -flto. <code>XS_EXTERNAL</code> has it already.</p>

<p>Moved xs pods still missing from the CPAN release completely to core.</p>

</dd>
<dt id="ExtUtils::Typemaps-3.38"><a href="/cperl/lib/ExtUtils/Typemaps.html">ExtUtils::Typemaps</a> 3.38</dt>
<dd>

</dd>
<dt id="ExtUtils::XSSymSet-1.4"><a href="/cperl/lib/ExtUtils/XSSymSet.html">ExtUtils::XSSymSet</a> 1.4</dt>
<dd>

</dd>
<dt id="feature-1.52_01"><a href="/cperl/lib/feature.html">feature</a> 1.52_01</dt>
<dd>

</dd>
<dt id="fields-2.26c"><a href="/cperl/lib/fields.html">fields</a> 2.26c</dt>
<dd>

<p>A cperl class has now fields with <code>@class::FIELDS</code> targ offsets to the lexical fields, and the old <code>%type::FIELDS</code> hash pointing to the <code>*class</code> GV, allowing again compile-time type checks on typed object hash accesses.</p>

<p>Implemented <a href="/cperl/lib/Mu.html#fields">&quot;fields&quot; in Mu</a> returning fields objects, as in perl6 (there called <i>Attributes</i>).</p>

<p>Revert the conversion of a fields package to class. Only close the ISA as with base.</p>

<p>cperl-only.</p>

</dd>
<dt id="File::Copy-2.33"><a href="/cperl/lib/File/Copy.html">File::Copy</a> 2.33</dt>
<dd>

<p>It will now use the sub-second precision variant of <code>utime()</code> supplied by <a href="/cperl/lib/Time/HiRes.html">Time::HiRes</a> where available. <a href="https://rt.perl.org/Ticket/Display.html?id=132401">[perl #132401]</a>.</p>

</dd>
<dt id="File::Fetch-0.56"><a href="/cperl/lib/File/Fetch.html">File::Fetch</a> 0.56</dt>
<dd>

<p>Switch test URL from www.cpan.org to httpbin.org</p>

</dd>
<dt id="File::Glob-1.31"><a href="/cperl/lib/File/Glob.html">File::Glob</a> 1.31</dt>
<dd>

<p>Skip a test when File::Glob not used. Avoid undefined behaviour in Copy() [perl #131746]</p>

</dd>
<dt id="File::Path-3.15_01c"><a href="/cperl/lib/File/Path.html">File::Path</a> 3.15_01c</dt>
<dd>

<p>Remove erroneous documentation.</p>

<p>Correct skip count for Windows.</p>

<p>Comment out two TODO tests.</p>

<p>Make subdirectory names used in tests more random.</p>

</dd>
<dt id="File::Spec::Functions-3.36_05"><a href="/cperl/lib/File/Spec/Functions.html">File::Spec::Functions</a> 3.36_05</dt>
<dd>

<p>Bumped version from unparsable 3.3.65, which prevented e.g. File::chdir to install.</p>

</dd>
<dt id="File::stat-1.08"><a href="/cperl/lib/File/stat.html">File::stat</a> 1.08</dt>
<dd>

</dd>
<dt id="FileCache-1.10"><a href="/cperl/lib/FileCache.html">FileCache</a> 1.10</dt>
<dd>

</dd>
<dt id="Filter::Simple-0.95"><a href="/cperl/lib/Filter/Simple.html">Filter::Simple</a> 0.95</dt>
<dd>

<p>Various small documentation fixes. Swap out base.pm use for parent.pm. Remove use of deprecated \C regex feature. Filter::Simple was erroneously signalling eof if it encountered a &lsquo;no MyFilter&rsquo; right after &lsquo;use&rsquo;: use MyFilter; no MyFilter; In this case it should simply not filter anything.</p>

</dd>
<dt id="File::Temp-0.2308"><a href="/cperl/lib/File/Temp.html">File::Temp</a> 0.2308</dt>
<dd>

<p>- remove File::Temp::Dir from the PAUSE index (it is not in its own .pm file, so it is not &#39;use&#39;able on its own)</p>

<p>- change EXLOCK default from true to false; addresses RT#123959. Note that this option was always a no-op on non-BSD platforms; changing the default to false makes behaviour more predictable and consistent across platforms.</p>

<p>- switch from &#39;use vars&#39; to &#39;our&#39;</p>

<p>- documentation updates for what versions contain what features (thanks, Brian Mowrey! RT#101518)</p>

<p>- fix bad use of skip() in tests (RT#95922)</p>

<p>- Fall back to CSIDL_LOCAL_APPDATA under taint on Windows (RT#60340)</p>

<p>- update distribution tooling</p>

</dd>
<dt id="Filter::Util::Call-1.59"><a href="/cperl/lib/Filter/Util/Call.html">Filter::Util::Call</a> 1.59</dt>
<dd>

<p>XSLoader, our. defer Carp.</p>

<p>Add filter_read_exact tests.</p>

<p>Improve tests using FindBin for filter-util.pl [atoomic #9]</p>

<p>Add int casts, assert on 2GB limitation.</p>

</dd>
<dt id="GDBM_File-1.17"><a>GDBM_File</a> 1.17</dt>
<dd>

<p>Its documentation now explains that <code>each</code> and <code>delete</code> don&#39;t mix in hashes tied to this module <a href="https://rt.perl.org/Ticket/Display.html?id=117449">[perl #117449]</a>.</p>

<p>It will now retry opening with an acceptable block size if asking gdbm to default the block size failed <a href="https://rt.perl.org/Ticket/Display.html?id=119623">[perl #119623]</a>.</p>

</dd>
<dt id="Getopt::Long-2.50"><a href="/cperl/lib/Getopt/Long.html">Getopt::Long</a> 2.50</dt>
<dd>

<p>Fix bug <a href="https://rt.cpan.org/Ticket/Display.html?id=120231">https://rt.cpan.org/Ticket/Display.html?id=120231</a>.</p>

<p>Fix bug <a href="https://rt.cpan.org/Ticket/Display.html?id=120300">https://rt.cpan.org/Ticket/Display.html?id=120300</a>. Unfortunately, this withdraws a small part of fix 114999. GNU <code>getopt_long()</code> does not accept the (optional) argument to be passed to the option without <code>=</code> sign. We do, since not doing so breaks existing scripts.</p>

<p>Provide a default value for options (<b>gnu_compat</b> mode). Thanks to Andrew Gregory.</p>

</dd>
<dt id="Hash::Util-0.22_01"><a href="/cperl/lib/Hash/Util.html">Hash::Util</a> 0.22_01</dt>
<dd>

<p>XS formatting</p>

</dd>
<dt id="Hash::Util::FieldHash-1.20"><a href="/cperl/lib/Hash/Util/FieldHash.html">Hash::Util::FieldHash</a> 1.20</dt>
<dd>

</dd>
<dt id="HTTP::Tiny-0.076_01"><a href="/cperl/lib/HTTP/Tiny.html">HTTP::Tiny</a> 0.076_01</dt>
<dd>

<p>Fix new autovivified hash slice warning, usenamedanoncv in api test</p>

</dd>
<dt id="I18N::Langinfo-0.17"><a href="/cperl/lib/I18N/Langinfo.html">I18N::Langinfo</a> 0.17</dt>
<dd>

<p>Use the new core function <code>Perl_langinfo()</code>.</p>

<p>This module is now available on all platforms, emulating the system <a href="http://man.he.net/man3/nl_langinfo">nl_langinfo(3)</a> on systems that lack it. Some caveats apply, as <a href="/cperl/lib/I18N/Langinfo.html">detailed in its documentation</a>, the most severe being that, except for MS Windows, the <code>CODESET</code> item is not implemented on those systems, always returning <code>&quot;&quot;</code>.</p>

<p>It now sets the UTF-8 flag in its returned scalar if the string contains legal non-ASCII UTF-8, and the locale is UTF-8 <a href="https://rt.perl.org/Ticket/Display.html?id=127288">[perl #127288]</a>.</p>

<p>This update also fixes a bug in which the underlying locale was ignored for the <code>RADIXCHAR</code> (always was returned as a dot) and the <code>THOUSEP</code> (always empty). Now the locale-appropriate values are returned.</p>

</dd>
<dt id="I18N::LangTags-0.43_01"><a href="/cperl/lib/I18N/LangTags.html">I18N::LangTags</a> 0.43_01</dt>
<dd>

<p>Linkify docs.</p>

</dd>
<dt id="if-0.0608"><a href="/cperl/lib/if.html">if</a> 0.0608</dt>
<dd>

<p>Doc how to import when you want to <code>use MODULE ()</code></p>

</dd>
<dt id="IO-1.39_01"><a href="/cperl/lib/IO.html">IO</a> 1.39_01</dt>
<dd>

<p>replace use vars with our, run-time load Carp, Bump versions of 3 Socket modules. Remove 5.6 support</p>

</dd>
<dt id="IO::Compress::Base-2.081"><a href="/cperl/lib/IO/Compress/Base.html">IO::Compress::Base</a> 2.081</dt>
<dd>

<p>lots of whitespace fixes in zipdetails exclude t/999pod.t also</p>

</dd>
<dt id="IO::Socket::IP-0.39_02"><a href="/cperl/lib/IO/Socket/IP.html">IO::Socket::IP</a> 0.39_02</dt>
<dd>

<p>Fix new Autovivified hash slice warning</p>

</dd>
<dt id="IPC::Cmd-1.02"><a href="/cperl/lib/IPC/Cmd.html">IPC::Cmd</a> 1.02</dt>
<dd>

<p>Added <code>wait_loop_callback</code> for <code>run_forked()</code></p>

<p>Only search in curdir in <code>can_run(</code>) when on Win32 <a href="https://rt.cpan.org/Ticket/Display.html?id=105601">RT #105601</a></p>

<p>Fixed can&#39;t use IPC::Cmd-&gt;run_forked in the first process of a container <a href="https://rt.cpan.org/Ticket/Display.html?id=118424">RT #118424</a></p>

<p>Fixed run_forked(&quot;/usr/bin/echo test&quot;) captures no output <a href="https://rt.cpan.org/Ticket/Display.html?id=91784">RT #91784</a></p>

<p>HPUX test fixes.</p>

</dd>
<dt id="JSON::PP-2.97001_04"><a href="/cperl/lib/JSON/PP.html">JSON::PP</a> 2.97001_04</dt>
<dd>

<p>Various, see <a href="https://metacpan.org/changes/distribution/JSON-PP">https://metacpan.org/changes/distribution/JSON-PP</a> Merged 2.97001 from cpan with ours. Minor updates, mostly docs. Upstream Boolean still did not work with Cpanel::JSON::XS.</p>

</dd>
<dt id="libnet-3.11_01"><code>libnet</code> 3.11_01</dt>
<dd>

</dd>
<dt id="List::Util-1.49_10"><a href="/cperl/lib/List/Util.html">List::Util</a> 1.49_10</dt>
<dd>

<p>Fixup the new pairmap spill code.</p>

</dd>
<dt id="Locale::Codes-3.55"><a>Locale::Codes</a> 3.55</dt>
<dd>

<p>Deprecated from core, moved to cpan.</p>

</dd>
<dt id="Locale::Maketext-1.29"><a href="/cperl/lib/Locale/Maketext.html">Locale::Maketext</a> 1.29</dt>
<dd>

</dd>
<dt id="Math::BigInt-1.999813"><a href="/cperl/lib/Math/BigInt.html">Math::BigInt</a> 1.999813</dt>
<dd>

<p>now up-to-date with upstream</p>

</dd>
<dt id="Math::BigInt::FastCalc-0.5007"><a href="/cperl/lib/Math/BigInt/FastCalc.html">Math::BigInt::FastCalc</a> 0.5007</dt>
<dd>

</dd>
<dt id="Math::BigRat-0.2614"><a href="/cperl/lib/Math/BigRat.html">Math::BigRat</a> 0.2614</dt>
<dd>

<p>Fix problem with second operand being changed in multiplication <a href="https://rt.cpan.org/Ticket/Display.html?id=121139">RT #121139</a></p>

<p>cperl: Keep omitting Carp imports. Keep t/bigroot.t and t/biglog.t</p>

</dd>
<dt id="Memoize-1.03"><a href="/cperl/lib/Memoize.html">Memoize</a> 1.03</dt>
<dd>

<p>Skip flapping, timer-sensitive t/expmod_t.t tests on Travis CI.</p>

</dd>
<dt id="Module::CoreList-5.20180622c"><a href="/cperl/lib/Module/CoreList.html">Module::CoreList</a> 5.20180622c</dt>
<dd>

</dd>
<dt id="Module::Load::Conditional-0.68_02"><a href="/cperl/lib/Module/Load/Conditional.html">Module::Load::Conditional</a> 0.68_02</dt>
<dd>

<p>Improve CPANPLUS: Fix [cperl #331], checking for cperl builtins. With a slightly adjusted patch from @voegelas.</p>

<p>Suppress new Autovivified hash slice warning</p>

</dd>
<dt id="mro-1.22_01"><a href="/cperl/lib/mro.html">mro</a> 1.22_01</dt>
<dd>

<p>prevent mro.pm from loading DynaLoader</p>

<p>formatting, cperl enhancements</p>

</dd>
<dt id="Mu-0.02c"><a href="/cperl/lib/Mu.html">Mu</a> 0.02c</dt>
<dd>

<p>Implemented <a href="/cperl/lib/Mu.html#fields">&quot;fields&quot; in Mu</a> returning fields objects. cperl-only.</p>

</dd>
<dt id="Net::Ping-2.70"><a href="/cperl/lib/Net/Ping.html">Net::Ping</a> 2.70</dt>
<dd>

<p>Fix ping_udp for a started udp echo server (PR#5 by Stephan Loyd)</p>

<p>Fix t/400_ping_syn.t phases</p>

<p>Try to handle Windows Socket::getnameinfo errors</p>

<p>Improve some tests on missing network connections</p>

<p>Keep v5.002 - v5.6 support</p>

<p>Removed outdated demo/fping from the documentation (RT #123750 by Steve Morris)</p>

<p>Added t/420_ping_syn_port.t (#4 by Julio Fraire) with fixes.</p>

<p>Added indices and crosslinks to the documentation</p>

<p>use NIx_NOSERV flag for windows.</p>

<p>better icmpv6 support.</p>

</dd>
<dt id="NEXT-0.67_01"><a href="/cperl/lib/NEXT.html">NEXT</a> 0.67_01</dt>
<dd>

<p>Fix for GLOB stubs [cpan #123002].</p>

</dd>
<dt id="O-1.03"><a href="/cperl/lib/O.html">O</a> 1.03</dt>
<dd>

<p>Improve error message for bogus -MO=&hellip; arguments</p>

</dd>
<dt id="ODBM_File-1.15"><a>ODBM_File</a> 1.15</dt>
<dd>

</dd>
<dt id="Opcode-1.43_02c"><a href="/cperl/lib/Opcode.html">Opcode</a> 1.43_02c</dt>
<dd>

<p>Added new &#39;oelem&#39; and &#39;oelemfast&#39; to :base_core</p>

</dd>
<dt id="OS2::Process-1.12_01"><a>OS2::Process</a> 1.12_01</dt>
<dd>

</dd>
<dt id="overload-1.30"><a href="/cperl/lib/overload.html">overload</a> 1.30</dt>
<dd>

</dd>
<dt id="parent-0.237"><a href="/cperl/lib/parent.html">parent</a> 0.237</dt>
<dd>

<p>use vars =&gt; our.</p>

</dd>
<dt id="PathTools-4.68c">PathTools 4.68c</dt>
<dd>

<p>Add security usage note to File::Spec::no_upwards white space change so can compile under C++11 Protect modules also from . in @INC [perl #127384] (CVE-2016-1238)</p>

<p>getcwd, getdcwd and abs_path have now long path support. getdcwd (Windows only) also supports unicode paths, using the wide API.</p>

</dd>
<dt id="PerlIO::encoding-0.26"><a href="/cperl/lib/PerlIO/encoding.html">PerlIO::encoding</a> 0.26</dt>
<dd>

</dd>
<dt id="PerlIO::scalar-0.29_01"><a href="/cperl/lib/PerlIO/scalar.html">PerlIO::scalar</a> 0.29_01</dt>
<dd>

<p>check invariant at compile time.</p>

<p>return EACCES on writing to a read-only scalar</p>

</dd>
<dt id="PerlIO::via-0.17_01"><a href="/cperl/lib/PerlIO/via.html">PerlIO::via</a> 0.17_01</dt>
<dd>

<p>Protect from NULL arg.</p>

</dd>
<dt id="perl5db-1.52_01c"><a href="/cperl/lib/perl5db.html">perl5db</a> 1.52_01c</dt>
<dd>

<p>Support debugger cmds not requiring spaces</p>

</dd>
<dt id="Pod::Checker-1.73_01"><a href="/cperl/lib/Pod/Checker.html">Pod::Checker</a> 1.73_01</dt>
<dd>

<p>no strict hashpairs</p>

</dd>
<dt id="Pod::Functions-1.13"><a href="/cperl/lib/Pod/Functions.html">Pod::Functions</a> 1.13</dt>
<dd>

</dd>
<dt id="Pod::Man-4.11"><a href="/cperl/lib/Pod/Man.html">Pod::Man</a> 4.11</dt>
<dd>

<p>Various upstream changes, see <a href="https://metacpan.org/changes/distribution/podlators">https://metacpan.org/changes/distribution/podlators</a></p>

</dd>
<dt id="Pod::HTML-2.2403c"><a>Pod::HTML</a> 2.2403c</dt>
<dd>

<p>A title for the HTML document will now be automatically generated by default from a &quot;NAME&quot; section in the POD document, as it used to be before the module was rewritten to use <a href="/cperl/lib/Pod/Simple/XHTML.html">Pod::Simple::XHTML</a> to do the core of its job <a href="https://rt.perl.org/Ticket/Display.html?id=110520">[perl #110520]</a>.</p>

</dd>
<dt id="Pod::Perldoc-3.2801"><a href="/cperl/lib/Pod/Perldoc.html">Pod::Perldoc</a> 3.2801</dt>
<dd>

<p>customize to fix formatters and pager misbehaviour</p>

</dd>
<dt id="podlators-4.10"><a>podlators</a> 4.10</dt>
<dd>

<p>Man page references and function names now follow the Linux man page formatting standards, instead of the Solaris standard.</p>

</dd>
<dt id="POSIX-1.84_03"><a href="/cperl/lib/POSIX.html">POSIX</a> 1.84_03</dt>
<dd>

<p>getcwd has now long path support.</p>

<p>Added realpath, with long path support, if the libc supports NULL as 2nd argument.</p>

<p>Some more cautions were added about using locale-specific functions in threaded applications.</p>

</dd>
<dt id="re-0.36_01"><a href="/cperl/lib/re.html">re</a> 0.36_01</dt>
<dd>

<p>Faster. add DEBUGGING_RE_ONLY define</p>

</dd>
<dt id="Scalar::Util-1.50_11"><a href="/cperl/lib/Scalar/Util.html">Scalar::Util</a> 1.50_11</dt>
<dd>

<p>fix find_rundefsvoffset logic</p>

<p>Fix t/subname.t and t/exotic_names.t for unstrict names. perl5.26 started defining $Config{usecperl} as &#39;UNKNOWN&#39;, hence this check is now unreliable.</p>

<p>Merge with 1.50 upstream: Ensure pairmap extends its stack correctly (davem) Fix name of List::Util::unpairs in its error messages</p>

<p>added head/tail honor PERL_NO_QUOTE_PKGSEPERATOR merged %DB::sub tests merge with upstream %DB::sub support (main:: or not, utf8)</p>

</dd>
<dt id="Search::Dict-1.07_01"><a href="/cperl/lib/Search/Dict.html">Search::Dict</a> 1.07_01</dt>
<dd>

<p>Bump version</p>

</dd>
<dt id="SelectSaver-1.02_01"><a href="/cperl/lib/SelectSaver.html">SelectSaver</a> 1.02_01</dt>
<dd>

<p>Bump version</p>

</dd>
<dt id="SelfLoader-1.25"><a href="/cperl/lib/SelfLoader.html">SelfLoader</a> 1.25</dt>
<dd>

</dd>
<dt id="Socket-2.027_04"><a href="/cperl/lib/Socket.html">Socket</a> 2.027_04</dt>
<dd>

</dd>
<dt id="sort-2.04"><a href="/cperl/lib/sort.html">sort</a> 2.04</dt>
<dd>

<p>no sort stable; SORTf_UNSTABLE flag</p>

</dd>
<dt id="Storable-3.11_01"><a href="/cperl/lib/Storable.html">Storable</a> 3.11_01</dt>
<dd>

<p>perl5 merged with us, with some minor internal architectural changes.</p>

<p>mingw fix: use safe defaults, not segfaulting defaults. mingw fails on the stacksize binary search, leaving it empty.</p>

<p>Try to fix readonly stacksize.h with perlbrew. [cperl #335]</p>

<p>Fix t/blessed.t for 5.10/5.12 threaded.</p>

<p>Restore max stacksizes for non-windows systems with proper system(SHELLSTRING) passing signals. Unify stack reserve to 32 across all platforms.</p>

<p>Dont build dynamic with a static perl</p>

</dd>
<dt id="strict-1.13c"><a href="/cperl/lib/strict.html">strict</a> 1.13c</dt>
<dd>

<p>Added <code>use strict &#39;hashpairs&#39;</code> to allow only pairs for hash assignments, within a map even only an empty or single pair. See <a href="https://github.com/perl11/cperl/issues/281">[cperl #281</a>. cperl-only</p>

<p>Added <code>strict &#39;names&#39;</code> to reject illegal identifiers created via <code>no strict &#39;refs&#39;</code> also at run-time, not only at compile-time. See <a href="https://github.com/perl11/cperl/issues/282">[cperl #282]</a>. cperl-only</p>

</dd>
<dt id="subs-1.03"><a href="/cperl/lib/subs.html">subs</a> 1.03</dt>
<dd>

</dd>
<dt id="Symbol-1.08_01"><a href="/cperl/lib/Symbol.html">Symbol</a> 1.08_01</dt>
<dd>

<p>Improved Symbol::delete_package for readonly and protected symbols and classes. cperl-only</p>

</dd>
<dt id="Sys::Hostname-1.22"><a href="/cperl/lib/Sys/Hostname.html">Sys::Hostname</a> 1.22</dt>
<dd>

</dd>
<dt id="Term::ReadKey-2.37_03"><a href="/cperl/lib/Term/ReadKey.html">Term::ReadKey</a> 2.37_03</dt>
<dd>

<p>Protect from fileno returning -1, invalid file arg. Reformatted.</p>

</dd>
<dt id="Term::ReadLine-1.17"><a href="/cperl/lib/Term/ReadLine.html">Term::ReadLine</a> 1.17</dt>
<dd>

<p>fix for empty &amp;STDERR files, RT #132008</p>

</dd>
<dt id="Test::Harness-3.42_01"><a href="/cperl/lib/Test/Harness.html">Test::Harness</a> 3.42_01</dt>
<dd>

<p>Enable rulesfile.t to run in core</p>

<p>Return handle for pipes and sockets #58 (Erik Huelsmann) TAP v13 plan allows trailing whitespace (Steffen Schwigon) prove: add a --statefile=&lt;path&gt; option to customize the .prove file (&AElig;var Arnfj&ouml;r&eth; Bjarmason) Avoid non-deterministic source handling, make a SourceHandler tie an error. (Michael Schwern, Leon Timmermans) Fix and simplify MSWin32 colorization (Roy Ivy III) Fix file source handler to accept single extensions option (Tomoki Aonuma) Spelling fixes (Brian Wightman)</p>

</dd>
<dt id="Thread::Queue-3.13"><a href="/cperl/lib/Thread/Queue.html">Thread::Queue</a> 3.13</dt>
<dd>

<p>[RT #125868] Fix tests for Test::Simple 1.302138</p>

</dd>
<dt id="threads-2.22_01"><a href="/cperl/lib/threads.html">threads</a> 2.22_01</dt>
<dd>

<p>Fix Clang macro backward compatibility per patch by Andy Grundman. Keep the old better doc. Keep our modglobal fix in global destruction from 2.12_01.</p>

<p>Support PL_sv_zero. Don&#39;t Copy() null pointer</p>

<p>The documentation now better describes the problems that arise when returning values from threads, and no longer warns about creating threads in <code>BEGIN</code> blocks. <a href="https://rt.perl.org/Ticket/Display.html?id=96538">[perl #96538]</a></p>

</dd>
<dt id="threads::shared-1.58"><a href="/cperl/lib/threads/shared.html">threads::shared</a> 1.58</dt>
<dd>

<p>Fix Clang macro backward compatibility per patch by Andy Grundman. RT #131124 Memory allocation fix.</p>

</dd>
<dt id="Tie::Array-1.07"><a href="/cperl/lib/Tie/Array.html">Tie::Array</a> 1.07</dt>
<dd>

</dd>
<dt id="Tie::Hash::NamedCapture-0.10_01"><a href="/cperl/lib/Tie/Hash/NamedCapture.html">Tie::Hash::NamedCapture</a> 0.10_01</dt>
<dd>

<p>use <code>croak_no_modify_sv()</code></p>

</dd>
<dt id="Tie::StdHandle-4.5"><a href="/cperl/lib/Tie/StdHandle.html">Tie::StdHandle</a> 4.5</dt>
<dd>

</dd>
<dt id="Time::gmtime-1.04"><a href="/cperl/lib/Time/gmtime.html">Time::gmtime</a> 1.04</dt>
<dd>

</dd>
<dt id="Time::HiRes-1.9758_01"><a href="/cperl/lib/Time/HiRes.html">Time::HiRes</a> 1.9758_01</dt>
<dd>

<p>Updated from upstream since 1.9744:</p>

<p>See <a href="https://metacpan.org/changes/distribution/Time-HiRes">https://metacpan.org/changes/distribution/Time-HiRes</a></p>

<p>fix MSVC by adding a fake struct timezone.</p>

<p>add more potential clock constants, like CLOCK_MONOTONIC_FAST (available in FreeBSD), and not all potentially found clock constants were properly exported to be available from Perl, see your system&#39;s clock_gettime() documentation for the available ones</p>

<p>correct declared minimum Perl version (should be 5.6, was declared as 5.8 since 1.9727_03): blead af94b3ac</p>

<p>merged with our cperl test fixes. See <a href="https://github.com/rurban/Time-HiRes/commits/cperl">https://github.com/rurban/Time-HiRes/commits/cperl</a></p>

<p>Drop 5.005 support. Replace DynaLoader with XSLoader.</p>

</dd>
<dt id="Time::Local-1.28"><a href="/cperl/lib/Time/Local.html">Time::Local</a> 1.28</dt>
<dd>

<p>Some tests which required support for epoch values larger than 2**32 were not being skipped when the underlying Perl did not support that.</p>

<p>Fixed the tests so they will not break in the year 2020. The tests were passing in 2-digit years on the assumption that a year like &quot;70&quot; would be treated as 1970, but starting in 2020 this would be treated as 2070 instead. Reported by Bernhard M. Wiedemann. RT #124787.</p>

<p>Added timelocal_modern and timegm_modern variants as optional exports. These versions do not munge years at all. They treat the year value that they are given exactly as-is.</p>

</dd>
<dt id="Time::localtime-1.03"><a href="/cperl/lib/Time/localtime.html">Time::localtime</a> 1.03</dt>
<dd>

</dd>
<dt id="Time::Piece-1.33"><a href="/cperl/lib/Time/Piece.html">Time::Piece</a> 1.33</dt>
<dd>

<p>Switch to XSLoader.</p>

<p>Fix AIX compile</p>

<p>Fix compile errors on MS</p>

<p>Use macro for buf sizes</p>

<p>Remove some compile warnings</p>

<p>SP off by 1 in _crt_localtime</p>

</dd>
<dt id="Unicode::Collate-1.25_01"><a href="/cperl/lib/Unicode/Collate.html">Unicode::Collate</a> 1.25_01</dt>
<dd>

<p>Drop 5.005 support. Replace DynaLoader with XSLoader.</p>

<p>Skip redefinition warnings on cperl since 5.27.2</p>

</dd>
<dt id="Unicode::Normalize-1.26"><a href="/cperl/lib/Unicode/Normalize.html">Unicode::Normalize</a> 1.26</dt>
<dd>

<p>Switch to XSLoader from Dynaloader.</p>

</dd>
<dt id="Unicode::UCD-0.70_01"><a href="/cperl/lib/Unicode/UCD.html">Unicode::UCD</a> 0.70_01</dt>
<dd>

<p>The function <code>num</code> now accepts an optional parameter to help in diagnosing error returns.</p>

<p>New core invlists/maps not yet used.</p>

</dd>
<dt id="User::grent-1.02"><a href="/cperl/lib/User/grent.html">User::grent</a> 1.02</dt>
<dd>

</dd>
<dt id="User::pwent-1.01"><a href="/cperl/lib/User/pwent.html">User::pwent</a> 1.01</dt>
<dd>

</dd>
<dt id="utf8-2.02c"><a href="/cperl/lib/utf8.html">utf8</a> 2.02c</dt>
<dd>

<p>Improved function documentation</p>

</dd>
<dt id="vars-1.04"><a href="/cperl/lib/vars.html">vars</a> 1.04</dt>
<dd>

</dd>
<dt id="version-0.9923_02"><a href="/cperl/lib/version.html">version</a> 0.9923_02</dt>
<dd>

<p>Add updates from 0.9918: Add LAX_DECIMAL_VERSION, LAX_DOTTED_DECIMAL_VERSION, STRICT_DECIMAL_VERSION, STRICT_DOTTED_DECIMAL_VERSION regexes. Add updates from 0.9921: pod, safer C locale switching. add vpp support for cperl: scmp, c suffix. use vars =&gt; our.</p>

<p>Add <i>t/11_taint.t</i></p>

</dd>
<dt id="VMS::DCLsym-1.09"><a>VMS::DCLsym</a> 1.09</dt>
<dd>

</dd>
<dt id="VMS::Studio-2.44_01"><a>VMS::Studio</a> 2.44_01</dt>
<dd>

<p>Drop VMS::stdio compatibility shim</p>

</dd>
<dt id="warnings-1.42"><a href="/cperl/lib/warnings.html">warnings</a> 1.42</dt>
<dd>

<p>It now includes new functions with names ending in <code>_at_level</code>, allowing callers to specify the exact call frame. <a href="https://rt.perl.org/Ticket/Display.html?id=132468">[perl #132468]</a></p>

</dd>
<dt id="Win32-0.52_01"><a href="/cperl/lib/File/Spec/Win32.html">Win32</a> 0.52_01</dt>
<dd>

</dd>
<dt id="Win32API::File-0.1204"><a>Win32API::File</a> 0.1204</dt>
<dd>

<p>Fix xsubpp warnings</p>

</dd>
<dt id="XS::Typemap-0.16"><a href="/cperl/lib/XS/Typemap.html">XS::Typemap</a> 0.16</dt>
<dd>

</dd>
<dt id="XSLoader-1.04c"><a href="/cperl/lib/XSLoader.html">XSLoader</a> 1.04c</dt>
<dd>

<p>Fix wrong usage of <code>SvREFCNT_inc_simple_NN</code> with a function, fixes a memory leak.</p>

<p>Its documentation now shows the use of <code>__PACKAGE__</code>, and direct object syntax for example <code>DynaLoader</code> usage <a href="https://rt.perl.org/Ticket/Display.html?id=132247">[perl #132247]</a>.</p>

</dd>
</dl>

<h2 id="Removed-Modules-and-Pragmata">Removed Modules and Pragmata</h2>

<dl>

<dt id="B::Debug-1.25"><code>B::Debug</code> 1.25</dt>
<dd>

<p>Moved to CPAN with cperl only. perl5 will remove it with 5.30.</p>

</dd>
<dt id="Locale::Codes-3.551"><code>Locale::Codes</code> 3.55</dt>
<dd>

<p>Deprecated with v5.27.2c</p>

</dd>
<dt id="VMS::stdio"><code>VMS::stdio</code></dt>
<dd>

<p>The <code>VMS::stdio</code> compatibility shim has been removed.</p>

</dd>
</dl>

<h1 id="Documentation">Documentation</h1>

<h2 id="New-Documentation">New Documentation</h2>

<h3 id="perlclass"><a href="/cperl/perlclass.html">perlclass</a></h3>

<p>Modern cperl classes and roles. The new syntax and features.</p>

<h3 id="PACKAGING"><a>PACKAGING</a></h3>

<p>Notes and best practice for packaging perl5, not yet updated for cperl.</p>

<h2 id="Changes-to-Existing-Documentation">Changes to Existing Documentation</h2>

<p>We have attempted to update the documentation to reflect the changes listed in this document.</p>

<p><i>autodoc.pl</i> now parses <i>pod/perlapio.pod</i> for cross-checking against <i>pod/perlapi.pod</i></p>

<p>Additionally, the following selected changes have been made:</p>

<h3 id="perlapi"><a href="/cperl/perlapi.html">perlapi</a></h3>

<p>Added API docs for most hash macros, and many more functions.</p>

<ul>

<li><p>The API functions <code>perl_parse()</code>, <code>perl_run()</code>, and <code>perl_destruct()</code> are now documented comprehensively, where previously the only documentation was a reference to the <a href="/cperl/perlembed.html">perlembed</a> tutorial.</p>

</li>
<li><p>The API functions <code>newCONSTSUB()</code> and <code>newCONSTSUB_flags()</code> are documented much more comprehensively than before.</p>

</li>
</ul>

<h3 id="perlapio"><a href="/cperl/perlapio.html">perlapio</a></h3>

<ul>

<li><p>Completed the documentation of the PerlIO API. Removed wrong missing links from documented PerlIO functions from <a href="/cperl/perlapi.html">perlapi</a>. Add all missing functions, and inter-linked them.</p>

</li>
</ul>

<h3 id="perldtrace"><a href="/cperl/perldtrace.html">perldtrace</a></h3>

<ul>

<li><p>Added <a href="/cperl/perldtrace.html#What-hash-operations-dominate">&quot;What hash operations dominate&quot; in perldtrace</a> and <a href="/cperl/perldtrace.html#glob-gv-call-statistics">&quot;glob/gv call statistics&quot; in perldtrace</a> sections.</p>

</li>
</ul>

<h3 id="perldata"><a href="/cperl/perldata.html">perldata</a></h3>

<ul>

<li><p>Added new pairwise hash construction limitations to <a href="/cperl/perldata.html#List-value-constructors">&quot;List value constructors&quot; in perldata</a> and <a href="/cperl/perlfunc.html#map-EXPR-LIST">&quot;map EXPR,LIST&quot; in perlfunc</a>.</p>

</li>
<li><p>The section &quot;Truth and Falsehood&quot; in <a href="/cperl/perlsyn.html">perlsyn</a> has been moved into <a href="/cperl/perldata.html">perldata</a>.</p>

</li>
</ul>

<h3 id="perldebguts"><a href="/cperl/perldebguts.html">perldebguts</a></h3>

<ul>

<li><p>The description of the conditions under which <code>DB::sub()</code> will be called has been clarified. <a href="https://rt.perl.org/Ticket/Display.html?id=131672">[perl #131672]</a></p>

</li>
</ul>

<h3 id="perldiag"><a href="/cperl/perldiag.html">perldiag</a></h3>

<ul>

<li><p><a href="/cperl/perldiag.html#Variable-length-lookbehind-not-implemented-in-regex-m-s">&quot;Variable length lookbehind not implemented in regex m/%s/&quot; in perldiag</a></p>

<p>This now gives more ideas as to workarounds to the issue that was introduced in Perl 5.18 (but not documented explicitly in its perldelta) for the fact that some Unicode <code>/i</code> rules cause a few sequences such as</p>

<pre><code> (?&lt;!st)</code></pre>

<p>to be considered variable length, and hence disallowed.</p>

</li>
<li><p>The diagnostic <code>Initialization of state variables in list context currently forbidden</code> has changed to <code>Initialization of state variables in list currently forbidden</code>, because list-context initialization of single aggregate state variables is now permitted.</p>

</li>
</ul>

<h3 id="perlembed"><a href="/cperl/perlembed.html">perlembed</a></h3>

<ul>

<li><p>The examples in <a href="/cperl/perlembed.html">perlembed</a> have been made more portable in the way they exit, and the example that gets an exit code from the embedded Perl interpreter now gets it from the right place. The examples that pass a constructed argv to Perl now show the mandatory null <code>argv[argc]</code>.</p>

</li>
<li><p>An example in <a href="/cperl/perlembed.html">perlembed</a> used the string value of <code>ERRSV</code> as a format string when calling croak(). If that string contains format codes such as <code>%s</code> this could crash the program.</p>

<p>This has been changed to a call to croak_sv().</p>

<p>An alternative could have been to supply a trivial format string:</p>

<pre><code>  croak(&quot;%s&quot;, SvPV_nolen(ERRSV));</code></pre>

<p>or as a special case for <code>ERRSV</code> simply:</p>

<pre><code>  croak(NULL);</code></pre>

</li>
</ul>

<h3 id="perlfunc"><a href="/cperl/perlfunc.html">perlfunc</a></h3>

<ul>

<li><p>Added new pairwise hash construction limitations to <a href="/cperl/perldata.html#List-value-constructors">&quot;List value constructors&quot; in perldata</a> and <a href="/cperl/perlfunc.html#map-EXPR-LIST">&quot;map EXPR,LIST&quot; in perlfunc</a>.</p>

</li>
<li><p>There is now a note that warnings generated by built-in functions are documented in <a href="/cperl/perldiag.html">perldiag</a> and <a href="/cperl/lib/warnings.html">warnings</a>. <a href="https://rt.perl.org/Ticket/Display.html?id=116080">[perl #116080]</a></p>

</li>
<li><p>A couple of small details in the documentation for the <code>bless</code> operator have been clarified. <a href="https://rt.perl.org/Ticket/Display.html?id=124428">[perl #124428]</a></p>

</li>
<li><p>The description of <code>@INC</code> hooks in the documentation for <code>require</code> has been corrected to say that filter subroutines receive a useless first argument. <a href="https://rt.perl.org/Ticket/Display.html?id=115754">[perl #115754]</a></p>

</li>
<li><p>The documentation of <code>use</code> now explains what syntactically qualifies as a version number for its module version checking feature.</p>

</li>
<li><p>The documentation of <code>warn</code> has been updated to reflect that since Perl 5.14 it has treated complex exception objects in a manner equivalent to <code>die</code>. <a href="https://rt.perl.org/Ticket/Display.html?id=121372">[perl #121372]</a></p>

</li>
<li><p>The documentation of <code>die</code> and <code>warn</code> has been revised for clarity.</p>

</li>
<li><p>The documentation of <code>each</code> has been improved, with a slightly more explicit description of the sharing of iterator state, and with caveats regarding the fragility of while-each loops. <a href="https://rt.perl.org/Ticket/Display.html?id=132644">[perl #132644]</a></p>

</li>
<li><p>Clarification to <code>require</code> was added to explain the differences between</p>

<pre><code>    require Foo::Bar;
    require &quot;Foo/Bar.pm&quot;;</code></pre>

</li>
</ul>

<h3 id="perlgit"><a href="/cperl/perlgit.html">perlgit</a></h3>

<ul>

<li><p>The precise rules for identifying <code>smoke-me</code> branches are now stated.</p>

</li>
</ul>

<h3 id="perlguts"><a href="/cperl/perlguts.html">perlguts</a></h3>

<ul>

<li><p>The section on reference counting in <a href="/cperl/perlguts.html">perlguts</a> has been heavily revised, to describe references in the way a programmer needs to think about them rather than in terms of the physical data structures.</p>

</li>
<li><p>Improve documentation related to UTF-8 multibytes.</p>

</li>
</ul>

<h3 id="perlintern"><a href="/cperl/perlintern.html">perlintern</a></h3>

<ul>

<li><p>Added API docs for most toke.c lexer functions. cperl-only</p>

</li>
<li><p>The internal functions <code>newXS_len_flags()</code> and <code>newATTRSUB_x()</code> are now documented.</p>

</li>
</ul>

<h3 id="perlfilter"><a href="/cperl/perlfilter.html">perlfilter</a></h3>

<ul>

<li><p>Add warning about raw <code>?...?</code> pattern delimiters.</p>

</li>
</ul>

<h3 id="perlobj"><a href="/cperl/perlobj.html">perlobj</a></h3>

<ul>

<li><p>The documentation about <code>DESTROY</code> methods has been corrected, updated, and revised, especially in regard to how they interact with exceptions. <a href="https://rt.perl.org/Ticket/Display.html?id=122753">[perl #122753]</a></p>

</li>
</ul>

<h3 id="perlop"><a href="/cperl/perlop.html">perlop</a></h3>

<ul>

<li><p>Added the missing operator precedences and documentation for the cperl unicode operators.</p>

</li>
<li><p>The description of the <code>x</code> operator in <a href="/cperl/perlop.html">perlop</a> has been clarified. <a href="https://rt.perl.org/Ticket/Display.html?id=132460">[perl #132460]</a></p>

</li>
<li><p><a href="/cperl/perlop.html">perlop</a> has been updated to note that <code>qw</code>&#39;s whitespace rules differ from that of <code>split</code>&#39;s in that only ASCII whitespace is used.</p>

</li>
<li><p>The general explanation of operator precedence and associativity has been corrected and clarified. <a href="https://rt.perl.org/Ticket/Display.html?id=127391">[perl #127391]</a></p>

</li>
<li><p>The documentation for the <code>\</code> referencing operator now explains the unusual context that it supplies to its operand. <a href="https://rt.perl.org/Ticket/Display.html?id=131061">[perl #131061]</a></p>

</li>
</ul>

<h3 id="perlrequick"><a href="/cperl/perlrequick.html">perlrequick</a></h3>

<ul>

<li><p>Clarifications on metacharacters and character classes</p>

</li>
</ul>

<h3 id="perlretut"><a href="/cperl/perlretut.html">perlretut</a></h3>

<ul>

<li><p>Clarify metacharacters.</p>

</li>
</ul>

<h3 id="perlrun"><a href="/cperl/perlrun.html">perlrun</a></h3>

<ul>

<li><p>Clarify the differences between <b>-M</b> and <b>-m</b>. <a href="https://rt.perl.org/Ticket/Display.html?id=131518">[perl #131518]</a></p>

</li>
</ul>

<h3 id="perlsec"><a href="/cperl/perlsec.html">perlsec</a></h3>

<ul>

<li><p>The documentation about set-id scripts has been updated and revised. <a href="https://rt.perl.org/Ticket/Display.html?id=74142">[perl #74142]</a></p>

</li>
<li><p>A section about using <code>sudo</code> to run Perl scripts has been added.</p>

</li>
</ul>

<h3 id="perlsyn"><a href="/cperl/perlsyn.html">perlsyn</a></h3>

<ul>

<li><p>The section &quot;Truth and Falsehood&quot; in <a href="/cperl/perlsyn.html">perlsyn</a> has been removed from that document, where it didn&#39;t belong, and merged into the existing paragraph on the same topic in <a href="/cperl/perldata.html">perldata</a>.</p>

</li>
<li><p>The means to disambiguate between code blocks and hash constructors, already documented in <a href="/cperl/perlref.html">perlref</a>, are now documented in <a href="/cperl/perlsyn.html">perlsyn</a> too. <a href="https://rt.perl.org/Ticket/Display.html?id=130958">[perl #130958]</a></p>

</li>
</ul>

<h3 id="perluniprops"><a href="/cperl/perluniprops.html">perluniprops</a></h3>

<ul>

<li><p><a href="/cperl/perluniprops.html">perluniprops</a> has been updated to note that <code>\p{Word}</code> now includes code points matching the <code>\p{Join_Control}</code> property. The change to the property was made in Perl 5.18, but not documented until now. There are currently only two code points that match this property U+200C (ZERO WIDTH NON-JOINER) and U+200D (ZERO WIDTH JOINER).</p>

</li>
<li><p>For each binary table or property, the documentation now includes which characters in the range <code>\x00-\xFF</code> it matches, as well as a list of the first few ranges of code points matched above that.</p>

</li>
</ul>

<h3 id="perlvar"><a href="/cperl/perlvar.html">perlvar</a></h3>

<ul>

<li><p>The entry for <code>$+</code> in perlvar has been expanded upon to describe handling of multiply-named capturing groups.</p>

</li>
</ul>

<h3 id="perlxs-perlxstut-perlxstypemap"><a href="/cperl/perlxs.html">perlxs</a>, <a href="/cperl/perlxstut.html">perlxstut</a>, <a href="/cperl/perlxstypemap.html">perlxstypemap</a></h3>

<ul>

<li><p>Moved from <i>dist/ExtUtils-ParseXS</i> to core <i>pod/</i>, as the upstream CPAN releases do not contain them anymore.</p>

</li>
</ul>

<h3 id="perlfunc-perlop-perlsyn"><a href="/cperl/perlfunc.html">perlfunc</a>, <a href="/cperl/perlop.html">perlop</a>, <a href="/cperl/perlsyn.html">perlsyn</a></h3>

<ul>

<li><p>In various places, improve the documentation of the special cases in the condition expression of a while loop, such as implicit <code>defined</code> and assignment to <code>$_</code>. <a href="https://rt.perl.org/Ticket/Display.html?id=132644">[perl #132644]</a></p>

</li>
</ul>

<h3 id="POSIX"><a href="/cperl/lib/POSIX.html">POSIX</a></h3>

<ul>

<li><p><a href="/cperl/lib/POSIX.html">POSIX</a> has been updated with some more cautions about using locale-specific functions in threaded applications.</p>

</li>
</ul>

<h1 id="Diagnostics">Diagnostics</h1>

<p>The following additions or changes have been made to diagnostic output, including warnings and fatal error messages. For the complete list of diagnostic messages, see <a href="/cperl/perldiag.html">perldiag</a>.</p>

<h2 id="New-Diagnostics">New Diagnostics</h2>

<h3 id="New-Errors">New Errors</h3>

<ul>

<li><p><a href="/cperl/perldiag.html#Odd-number-of-map-elements-in-hash-assignment">Odd number of map elements in hash assignment </a></p>

<p>Added a new HASH private bit to the mapwhile op when a map is assigned to a hash, to be able to warn once per map on uneven hashmap assignments. See <a href="https://github.com/perl11/cperl/issues/281">[cperl #281</a> and <a href="/cperl/lib/strict.html">strict</a> hashpairs.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Only-pair-in-map-hash-assignment-allowed-while-strict-hashpairs-got-d-elements">Only pair in map hash assignment allowed while &quot;strict hashpairs&quot;, got %d elements </a></p>

<p><a href="/cperl/perldiag.html#Only-pairs-in-hash-assignment-allowed-while-strict-hashpairs-got-d-elements">Only pairs in hash assignment allowed while &quot;strict hashpairs&quot;, got %d elements </a></p>

<p>With &quot;strict hashpairs&quot; in use, odd numbers of elements are forbidden to be assigned to hashes. Within a map block only a single or empty pair.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Cannot-complete-in-place-edit-of-s:-s">Cannot complete in-place edit of %s: %s</a> when an unhandled chdir happens during an in-place edit.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Can-t-goto-into-a-given-block">Can&#39;t &quot;goto&quot; into a &quot;given&quot; block</a></p>

<p>(F) A &quot;goto&quot; statement was executed to jump into the middle of a <code>given</code> block. You can&#39;t get there from here. See <a href="/cperl/perlfunc.html#goto">&quot;goto&quot; in perlfunc</a>.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Can-t-goto-into-a-binary-or-list-expression">Can&#39;t &quot;goto&quot; into a binary or list expression</a></p>

<p>Use of <code>goto</code> to jump into the parameter of a binary or list operator has been prohibited, to prevent crashes and stack corruption. <a href="https://rt.perl.org/Ticket/Display.html?id=130936">[perl #130936]</a></p>

<p>You may only enter the <i>first</i> argument of an operator that takes a fixed number of arguments, since this is a case that will not cause stack corruption. <a href="https://rt.perl.org/Ticket/Display.html?id=132854">[perl #132854]</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Can-t-rename-in-place-work-file-s-to-s-:-s">Can&#39;t rename in-place work file &#39;%s&#39; to &#39;%s&#39;: %s</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Can-t-unweaken-a-nonreference">Can&#39;t unweaken a nonreference</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Missing-argument-for-n-in-s">Missing argument for %n in %s</a> in sprintf is now fatal.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Integer-overflow-in-format-string-for-s">Integer overflow in format string for %s</a></p>

<p>cperl 5.27.2 added a new limitation of INT_MAX to the max. argument index, width and precision values for printf format strings. The new perl5.27.5 limitation is ULONG_MAX, which is a security risk, see <a href="#Unsigned-long-stack-access-of-printf-format-arguments">&quot;Unsigned long stack access of printf format arguments&quot;</a>.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Too-large-floating-point-precision-in-format-string-s-for-s">Too large floating point precision in format string %s for %s</a></p>

<p>cperl 5.27.2 added a new limitation of 1024 to the max. precision of floating point conversions to strings via sprintf, to seperate it from Integer overflows in overlarge indices, width and precision values.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Too-many-fields">Too many fields</a></p>

<p>cperl 5.27.2 added a new limitation of max. 65536 fields per class.</p>

</li>
<li><p><code>panic: cannot yet adjust field indices when composing role %s::%s into %s %s [cperl #311]&quot;</code></p>

<p>When copying a method from a role to a class, and the field index from the role method would be different to a field index in the resulting class, the method is not yet fixed up to the new indices. A temp. solution would be to change the ordering of the roles, or to use the <code>$self-&gt;field</code> method syntax in the role method. This should be fixed before 5.28. Currently we can only alias composed role methods and we don&#39;t change the ordering of the fields. See <a href="https://github.com/perl11/cperl/issues/311">[cperl #311]</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Invalid-field-index-d-of-s-s">Invalid field index %d of class %s</a></p>

<p>The class doesn&#39;t have that many fields. cperl only</p>

</li>
</ul>

<h3 id="New-Warnings">New Warnings</h3>

<ul>

<li><p>With loopex ops calling a list, all arguments but the last are ignored. This might be valid for side-effects, but useless on constants. Warn with <a href="/cperl/perldiag.html#Useless-use-of-constant-in-list-at">Useless use of constant in list at %s() </a> This affects next, goto, redo, last, dump.</p>

<p>E.g. with <code>label:{next(1,label)}</code> 1 is ignored.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Reference-is-not-weak">Reference is not weak</a> in W misc.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Old-package-separator-used-in-string">Old package separator used in string</a></p>

<p>(W syntax) You used the old package separator, &quot;&#39;&quot;, in a variable named inside a double-quoted string; e.g., <code>&quot;In $name&#39;s house&quot;</code>. This is equivalent to <code>&quot;In $name::s house&quot;</code>. If you meant the former, put a backslash before the apostrophe (<code>&quot;In $name\&#39;s house&quot;</code>).</p>

</li>
<li><p><a href="/cperl/perldiag.html#Locale-s-contains-at-least-the-following-characters-which-have-unexpected-meanings:-s-The-Perl-program-will-use-the-expected-meanings">&quot;Locale &#39;%s&#39; contains (at least) the following characters which have unexpected meanings: %s The Perl program will use the expected meanings&quot; in perldiag</a></p>

</li>
</ul>

<h2 id="Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</h2>

<ul>

<li><p><a href="/cperl/perldiag.html#do-s-failed-.-is-no-longer-in-INC-did-you-mean-do-.-s">do &quot;%s&quot; failed, &#39;.&#39; is no longer in @INC; did you mean do &quot;./%s&quot;? </a></p>

<p>Was changed from &quot;do &quot;%s&quot; failed, &#39;.&#39; is no longer in @INC&quot;.</p>

</li>
<li><p>&quot;Can&#39;t modify non-lvalue subroutine call of &amp;%s&quot; was extended to support methods.</p>

<p>The new message is &quot;Can&#39;t modify non-lvalue %s call of %s&quot;, with the variants &quot;Can&#39;t modify non-lvalue subroutine call of &amp;CLASS::sub&quot; and &quot;Can&#39;t modify non-lvalue method call of CLASS-&gt;sub&quot;.</p>

</li>
<li><p>Under DEBUGGING &quot;Modification of a read-only value attempted at &lt;location&gt;&quot; was changed to &quot;Modification of a read-only value attempted &lt;value&gt; at &lt;c file:line&gt; at &lt;location&gt;&quot;</p>

<p>Existing tests best cut off the &quot; at&quot; at the end.</p>

</li>
<li><p>A false-positive warning that was issued when using a numerically-quantified sub-pattern in a recursive regex has been silenced. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131868">[perl #131868]</a></p>

</li>
<li><p>The diagnostic <code>Initialization of state variables in list context currently forbidden</code> has changed to <code>Initialization of state variables in list currently forbidden</code>, because list-context initialization of single aggregate state variables is now permitted.</p>

</li>
<li><p><code>Failed to close in-place edit file %s: %s</code> was renamed to <a href="/cperl/perldiag.html#Failed-to-close-in-place-work-file-s:-s">Failed to close in-place work file %s: %s</a>.</p>

</li>
<li><p><code>delete argument is index/value array slice, use array slice</code> and <code>delete argument is key/value hash slice, use hash slice</code> is gone, deleting key/value slices is now supported.</p>

</li>
<li><p>The warning about useless use of a concatenation operator in void context is now generated for expressions with multiple concatenations, such as <code>$a.$b.$c</code>, which used to mistakenly not warn. <a href="https://rt.perl.org/Ticket/Display.html?id=6997">[perl #6997]</a></p>

</li>
<li><p>Warnings that a variable or subroutine &quot;masks earlier declaration in same ...&quot;, or that an <code>our</code> variable has been redeclared, have been moved to a new warnings category &quot;shadow&quot;. Previously they were in category &quot;misc&quot;.</p>

</li>
<li><p>The deprecation warning from <code>Sys::Hostname::hostname()</code> saying that it doesn&#39;t accept arguments now states the Perl version in which the warning will be upgraded to an error. <a href="https://rt.perl.org/Ticket/Display.html?id=124349">[perl #124349]</a></p>

</li>
<li><p>The <a href="/cperl/perldiag.html">perldiag</a> entry for the error regarding a set-id script has been expanded to make clear that the error is reporting a specific security vulnerability, and to advise how to fix it.</p>

</li>
<li><p>The <code>Unable to flush stdout</code> error message was missing a trailing newline. [debian #875361]</p>

</li>
</ul>

<h1 id="Utility-Changes">Utility Changes</h1>

<h2 id="dtrace"><a>dtrace</a></h2>

<ul>

<li><p>Four new dtrace probes for hash and glob. See <a href="/cperl/perldtrace.html">perldtrace</a> and <a href="https://github.com/perl11/cperl/issues/240">#240</a>.</p>

</li>
</ul>

<h2 id="cperlivp"><a>cperlivp</a></h2>

<ul>

<li><p>Add support for <code>-d DESTDIR</code>, e.g. after</p>

<pre><code>    make -s -j4 install DESTDIR=$HOME/cperl-inst
    cd $HOME/cperl-inst/usr/local/bin &amp;&amp;
    ./cperl cperlivp -p -d $HOME/cperl-inst</code></pre>

<p>See <a href="https://github.com/perl11/cperl/issues/305">[cperl #305]</a></p>

</li>
</ul>

<h1 id="Configuration-and-Compilation">Configuration and Compilation</h1>

<dl>

<dt id="C89-requirement">C89 requirement</dt>
<dd>

<p>Perl has been documented as requiring a C89 compiler to build since October 1998. A variety of simplifications have now been made to Perl&#39;s internals to rely on the features specified by the C89 standard. We believe that this internal change hasn&#39;t altered the set of platforms that Perl builds on, but please report a bug if Perl now has new problems building on your platform.</p>

</dd>
<dt id="Werror-pointer-arith">-Werror=pointer-arith</dt>
<dd>

<p>On GCC, <code>-Werror=pointer-arith</code> is now enabled by default, disallowing arithmetic on void and function pointers.</p>

</dd>
<dt id="relative-HTML-links">relative HTML links</dt>
<dd>

<p>Where an HTML version of the documentation is installed, the HTML documents now use relative links to refer to each other. Links from the index page of <a href="/cperl/perlipc.html">perlipc</a> to the individual section documents are now correct. <a href="https://rt.perl.org/Ticket/Display.html?id=110056">[perl #110056]</a></p>

</dd>
<dt id="t-porting-regen.t-improvements">t/porting/regen.t improvements</dt>
<dd>

<p><i>lib/unicore/mktables</i> now correctly canonicalizes the names of the dependencies stored in the files it generates.</p>

<p><i>regen/mk_invlists.pl</i>, unlike the other <i>regen/*.pl</i> scripts, used <code>$0</code> to name itself in the dependencies stored in the files it generates. It now uses a literal so that the path stored in the generated files doesn&#39;t depend on how <i>regen/mk_invlists.pl</i> is invoked.</p>

<p>This lack of canonical names could cause test failures in <i>t/porting/regen.t</i>. <a href="https://rt.perl.org/Ticket/Display.html?id=132925">[perl #132925]</a></p>

</dd>
<dt id="pgcc">pgcc</dt>
<dd>

<p>Added support for the pgcc pgi compiler http://www.pgroup.com/. pgcc is very slow though. pgcc -O2 is 40% slower than gcc-6 -O3, pgcc -fast 30% slower. <a href="https://github.com/perl11/cperl/issues/279">#279</a>.</p>

</dd>
<dt id="smoker-deployments">smoker deployments</dt>
<dd>

<p>Travis and appveyor deploy now automatically master builds, besides tags.</p>

</dd>
<dt id="inc_version_list">inc_version_list</dt>
<dd>

<p><code>inc_version_list</code> skips now older development versions. It only includes older non-devel versions with even numbers. See <a href="https://github.com/perl11/cperl/issues/284">[cperl #284]</a></p>

</dd>
<dt id="Dusedevel-not-mandatory">-Dusedevel not mandatory</dt>
<dd>

<p><code>-Dusedevel</code> is needed to be added to all development versions anymore, it is now the default on such. A big warning is still being displayed, even in the usual silent auto mode <code>-des</code>. See <a href="https://github.com/perl11/cperl/issues/283">[cperl #283]</a></p>

</dd>
<dt id="d_builtin_arith_overflow">d_builtin_arith_overflow</dt>
<dd>

<p>Fixed <code>d_builtin_arith_overflow</code> detection and usage for 32bit systems with <code>use64bitint</code>. They do use the <code>ll</code> suffix, same as with WIN64. Now we can use this optimization. cperl-only.</p>

</dd>
<dt id="New-probes">New probes:</dt>
<dd>

<p>Note that cperl ignores the new <code>HAS_BUILTIN_{ADD,MUL,SUB}_OVERFLOW</code> config keys as we use the better <code>HAS_BUILTIN_ARITH_OVERFLOW</code> for years already.</p>

<dl>

<dt id="HAS_GETCWD">HAS_GETCWD</dt>
<dd>

<p>d_getcwd probe and key added. Sets HAS_GETCWD</p>

</dd>
<dt id="HAS_GET_CURRENT_DIR_NAME">HAS_GET_CURRENT_DIR_NAME</dt>
<dd>

<p>d_get_current_dir_name probe and key added. Sets HAS_GET_CURRENT_DIR_NAME</p>

</dd>
<dt id="HAS_GETCWDNULL">HAS_GETCWDNULL</dt>
<dd>

<p>getcwdnull probe and key added. Sets HAS_GETCWDNULL</p>

</dd>
<dt id="HAS_REALPATH">HAS_REALPATH</dt>
<dd>

<p>d_realpath probe and key added. Sets HAS_REALPATH</p>

</dd>
<dt id="HAS_BUILTIN_CLZ">HAS_BUILTIN_CLZ</dt>
<dd>

<p>d_builtin_clz probe and key added. Sets HAS_BUILTIN_CLZ. (&quot;Count leading zeros&quot;). Needed later for fast hopscotch hashing.</p>

</dd>
<dt id="HAS_THREAD_SAFE_NL_LANGINFO_L">HAS_THREAD_SAFE_NL_LANGINFO_L</dt>
<dd>

<p>d_thread_safe_nl_langinfo_l</p>

</dd>
<dt id="HAS_LOCALECONV_L">HAS_LOCALECONV_L</dt>
<dd>

<p>d_localeconv_l</p>

</dd>
<dt id="HAS_MBRLEN">HAS_MBRLEN</dt>
<dd>

<p>d_mbrlen</p>

</dd>
<dt id="HAS_MBRTOWC">HAS_MBRTOWC</dt>
<dd>

<p>d_mbrtowc</p>

</dd>
<dt id="HAS_MEMRCHR">HAS_MEMRCHR</dt>
<dd>

<p>d_memrchr</p>

</dd>
<dt id="HAS_NANOSLEEP">HAS_NANOSLEEP</dt>
<dd>

<p>d_nanosleep</p>

</dd>
<dt id="HAS_STRNLEN">HAS_STRNLEN</dt>
<dd>

<p>d_strnlen</p>

</dd>
<dt id="HAS_STRTOLD_L">HAS_STRTOLD_L</dt>
<dd>

<p>d_strtold_l</p>

</dd>
<dt id="I_WCHAR">I_WCHAR</dt>
<dd>

<p>i_wchar</p>

</dd>
<dt id="USE_NAMED_ANONCV">USE_NAMED_ANONCV</dt>
<dd>

<p>usenamedanoncv</p>

</dd>
</dl>

</dd>
<dt id="Removed-probes-and-keys">Removed probes and keys</dt>
<dd>

<dl>

<dt id="ansi2knr">ansi2knr</dt>
<dd>

</dd>
<dt id="d_bcmp">d_bcmp</dt>
<dd>

</dd>
<dt id="d_bcopy">d_bcopy</dt>
<dd>

</dd>
<dt id="d_bzero">d_bzero</dt>
<dd>

</dd>
<dt id="d_index">d_index</dt>
<dd>

</dd>
<dt id="d_charvspr">d_charvspr</dt>
<dd>

</dd>
<dt id="d_dbl_dig">d_dbl_dig</dt>
<dd>

</dd>
<dt id="d_safebcpy">d_safebcpy</dt>
<dd>

</dd>
<dt id="d_safemcpy">d_safemcpy</dt>
<dd>

</dd>
<dt id="d_sanemcmp">d_sanemcmp</dt>
<dd>

</dd>
<dt id="d_sprintf_returns_strlen">d_sprintf_returns_strlen</dt>
<dd>

</dd>
<dt id="d_strctcpy">d_strctcpy</dt>
<dd>

</dd>
<dt id="d_strerrm">d_strerrm</dt>
<dd>

</dd>
<dt id="i_memory">i_memory</dt>
<dd>

</dd>
<dt id="i_values">i_values</dt>
<dd>

</dd>
<dt id="i_varargs">i_varargs</dt>
<dd>

</dd>
<dt id="i_varhdr">i_varhdr</dt>
<dd>

</dd>
<dt id="strings">strings</dt>
<dd>

</dd>
<dt id="d_memset">d_memset</dt>
<dd>

<p>Beware: HAS_MEMSET is undefined since v5.28, but always considered to be defined. Because of C89. cperl kept the HAS_MEMSET preprocessor definition for backcompat with extensions which do use it. It is used in all ppport.h files to use memzero().</p>

</dd>
<dt id="d_memchr">d_memchr</dt>
<dd>

<p>Ditto: Keep HAS_MEMCHR</p>

</dd>
<dt id="d_memcmp">d_memcmp</dt>
<dd>

<p>Ditto: Keep HAS_MEMCMP</p>

</dd>
<dt id="d_memcpy">d_memcpy</dt>
<dd>

<p>Ditto: Keep HAS_MEMCPY</p>

</dd>
<dt id="d_memmove">d_memmove</dt>
<dd>

<p>Ditto: Keep HAS_MEMMOVE</p>

</dd>
<dt id="d_strchr">d_strchr</dt>
<dd>

<p>Ditto: Keep HAS_STRCHR</p>

</dd>
<dt id="d_strerror">d_strerror</dt>
<dd>

<p>Ditto: Keep HAS_STRERROR</p>

</dd>
<dt id="d_vprintf">d_vprintf</dt>
<dd>

<p>Ditto: Keep HAS_VPRINTF</p>

</dd>
<dt id="d_volatile">d_volatile</dt>
<dd>

<p>Ditto: Keep HASVOLATILE</p>

</dd>
<dt id="i_assert">i_assert</dt>
<dd>

<p>Ditto: Keep I_ASSERT in perl.h</p>

</dd>
<dt id="i_float">i_float</dt>
<dd>

<p>Ditto: Keep I_FLOAT in perl.h</p>

</dd>
<dt id="i_limits">i_limits</dt>
<dd>

<p>Ditto: Keep I_LIMITS in perl.h</p>

</dd>
<dt id="i_math">i_math</dt>
<dd>

<p>Ditto: Keep I_MATH in perl.h</p>

</dd>
<dt id="i_stdarg">i_stdarg</dt>
<dd>

<p>Ditto: Keep I_STDARG in perl.h</p>

</dd>
<dt id="i_stdlib">i_stdlib</dt>
<dd>

<p>Ditto: Keep I_STDLIB in perl.h</p>

</dd>
<dt id="i_string">i_string</dt>
<dd>

<p>Ditto: Keep I_STRING in perl.h</p>

</dd>
<dt id="prototype">prototype</dt>
<dd>

<p>Ditto: Keep CAN_PROTOTYPE in perl.h</p>

</dd>
<dt id="vaproto">vaproto</dt>
<dd>

<p>Ditto: Keep CAN_VAPROTO, _V</p>

</dd>
</dl>

</dd>
<dt id="git_version.sh">git_version.sh</dt>
<dd>

<p>New generated shell config with the same content as <i>git_version.h</i>, for <i>myconfig</i>.</p>

</dd>
<dt id="myconfig">myconfig</dt>
<dd>

<p>Added git_branch and git_describe.</p>

</dd>
<dt id="make_patchnum:-touch-the-targets">make_patchnum: touch the targets</dt>
<dd>

<p>avoiding needless miniperl recompilation on <i>Config_git.pl</i>, <i>git_version.{sh,h}</i>.</p>

</dd>
</dl>

<h1 id="Testing">Testing</h1>

<ul>

<li><p><code>make minitest</code> can now be successfully be run directly after <code>make miniperl</code>. The unicode datafiles are now built before, and tests pass even if no module was built or mktables failed.</p>

<p>Many fixes for <code>make minitest</code> for cperl/XSConfig.</p>

</li>
<li><p>Added <i>t/op/oelem.t</i> for classes with more than 256 fields, realloc fields for bigger padsize 2, and computed field names. cperl-only.</p>

</li>
<li><p>Changed one case in <i>t/op/symbolcache.t</i> for <a href="#Optimize-static-methods-to-subs">static method optimizations</a>. When you redefine a method, you need to clear the old method GV, to be able to call the new redefined one, as the static method optimization binds to the GV.</p>

</li>
<li><p>Fixed <i>Porting/cmpVERSION.pl</i> resp. <i>t/porting/cmp_version.t</i>.</p>

</li>
<li><p>Some flapping tests on slow windows smokers (appveyor) are now skipped.</p>

</li>
<li><p>Testing of the XS-APItest directory is now done in parallel, where applicable.</p>

</li>
<li><p>The watchdog timer count in <i>re/pat_psycho.t</i> can now be overridden.</p>

<p>This test can take a long time to run, so there is a timer to keep this in check (currently, 5 minutes). This commit adds checking the environment variable <code>PERL_TEST_TIME_OUT_FACTOR</code>; if set, the time out setting is multiplied by its value.</p>

</li>
<li><p><i>harness</i> no longer waits for 30 seconds when running <i>t/io/openpid.t</i>. <a href="https://rt.perl.org/Ticket/Display.html?id=121028">[perl #121028]</a> <a href="https://rt.perl.org/Ticket/Display.html?id=132867">[perl #132867]</a></p>

</li>
<li><p>Improved some tests which depend in counting (eval \d)&#39;s to use regex. Print the compiled regex when failing, not just the expected string. In this case <i>t/lib/warnings/pad</i> Storable used in Unicode::UCD, used by utf8 added another eval.</p>

</li>
</ul>

<h1 id="Packaging">Packaging</h1>

<p>For the past few years we have released perl using three different archive formats: bzip (<code>.bz2</code>), LZMA2 (<code>.xz</code>) and gzip (<code>.gz</code>). Since xz compresses better and decompresses faster, and gzip is more compatible and uses less memory, we have dropped the <code>.bz2</code> archive format with this release. (If this poses a problem, do let us know; see <a href="#Reporting-Bugs">&quot;Reporting Bugs&quot;</a>, below.)</p>

<h1 id="Platform-Support">Platform Support</h1>

<h2 id="New-Platforms">New Platforms</h2>

<dl>

<dt id="pgcc1">pgcc</dt>
<dd>

<p>Preliminary support for the Portland pgcc compiler (Linux, Darwin, Win32 only) has been added.</p>

</dd>
</dl>

<h2 id="Discontinued-Platforms">Discontinued Platforms</h2>

<dl>

<dt id="PowerUX-Power-MAX-OS">PowerUX / Power MAX OS</dt>
<dd>

<p>Compiler hints and other support for these apparently long-defunct platforms has been removed.</p>

</dd>
</dl>

<h2 id="Platform-Specific-Notes">Platform-Specific Notes</h2>

<p>Support for long paths have been added to all platforms, for <code>cwd</code> longer than 4096. Many kernels have limited support for it, but filesystems do. See <a href="https://github.com/perl11/cperl/issues/270">[cperl #270]</a>.</p>

<dl>

<dt id="linux">linux</dt>
<dd>

<p>Fixed hints for pgcc.</p>

<p>Use for <code>getcwd(NULL)</code> or <code>get_current_dir_name()</code>, which can return paths longer than 4096.</p>

<p>Compilation on CentOS 5 is now fixed.</p>

</dd>
<dt id="cygwin">cygwin</dt>
<dd>

<p><a href="/cperl/lib/threads.html">threads</a> became unstable with some upstream merges. default now to <code>-Uuseithreads</code>.</p>

<p>Fixed Storable stacksize probing.</p>

<p>Fixed a lot of admin-specific file-permission tests.</p>

</dd>
<dt id="darwin">darwin</dt>
<dd>

<p>Fixed hints for pgcc</p>

<p>Perl now correctly uses reentrant functions, like <code>asctime_r</code>, on versions of Darwin that have support for them.</p>

<p>locale specific error messages are now thread-safe. cperl-only, <a href="https://github.com/perl11/cperl/issues/341">[cperl #341]</a></p>

</dd>
<dt id="mingw">mingw</dt>
<dd>

<p>cperl on mingw was previously unsupported and didn&#39;t compile nor work. We switched the windows packages to use mingw 32bit and 64bit instead of MSVC compiled packages, which do require a special MS runtime DLL.</p>

<ul>

<li><p>Removed the broken <i>dlltool</i>, which corrupted 64bit DLL&#39;s for years. In our case Cpanel::JSON::XS and Unicode::Normalize. Just use <code>gcc</code> to create dll&#39;s and import libs, as in cygwin.</p>

</li>
<li><p>Added version specific gcc config values.</p>

<p>The default mingw configs were extremely defensive and slow. Even gcc-2.95.3 settings were disabled. Now several modern builtins and attributes are used.</p>

<p>Fixed the wrong <code>d_u32align</code> default, which caused Digest::MD5 to crash.</p>

</li>
<li><p>Fixed BUILTIN_*_OVERFLOW macros for mingw64, which uses long long for normal IV/UV on win64.</p>

</li>
<li><p>Removed the version suffix from the importlib which is the entry for <code>$Config{libperl}</code>. <code>-lcperl</code> works now for the compiler and embedders. Just keep the version on MSVC, e.g. <i>cperl527.lib</i>, as this had special logic in perlcc already.</p>

</li>
<li><p>Improved <i>t/run/switchDBG.t</i> for <code>-D&#39;&#39;</code> and <code>-T</code> tests.</p>

</li>
<li><p>Fixed building of the extensions with the Extensions_normalize target.</p>

</li>
<li><p>Switched from <i>C:\MinGW</i> to <i>C:\Strawberry\c</i> as default <b>CCHOME</b> prefix. This is much more stable on 64bit, and easier to setup.</p>

</li>
<li><p>The compiler <i>perlcc</i> only works with very simple programs under mingw yet. With dynaloaded XS modules it usually fails.</p>

</li>
<li><p>Fixed invalid <code>check_type_and_open macro</code> on mingw miniperl.</p>

</li>
</ul>

</dd>
<dt id="VMS">VMS</dt>
<dd>

<p>Several fix-ups for <i>configure.com</i>, marking function VMS has (or doesn&#39;t have).</p>

<p>CRTL features can now be set by embedders before invoking Perl by using the <code>decc$feature_set</code> and <code>decc$feature_set_value</code> functions. Previously any attempt to set features after image initialization were ignored.</p>

</dd>
<dt id="Windows">Windows</dt>
<dd>

<p>File test operators for Unix permission bits that don&#39;t exist on a particular platform, such as <code>-k</code> (sticky bit) on Windows, now check that the file being tested exists before returning the blanket false result, and yield the appropriate errors if the argument doesn&#39;t refer to a file.</p>

<p>Visual C++ compiler version detection has been improved to work on non-English language systems.</p>

<p>mingw, cygwin and the MSVC versions 10,12,14 smoke now ok with 32-bit and 64-bit.</p>

<p>Fixed upstream mkstemp API changes.</p>

<p>getcwd is deprecated on Windows. use _getcwd() instead.</p>

<p>PathTools: Support overlong paths for getdcwd(), using the wide API for overlong paths.</p>

</dd>
<dt id="UMIPS">UMIPS</dt>
<dd>

<p>CAN_PROTOTYPE is now always defined, which might cause problems with the system cc compiler. <code>ccom: Error: ./mg.h, line 12: redeclaration of formal parameter, sv</code></p>

</dd>
<dt id="ULTRIX-4">ULTRIX 4</dt>
<dd>

<p>CAN_PROTOTYPE is now always defined, which might cause problems with the gcc-4.2 compiler.</p>

</dd>
</dl>

<h1 id="Internal-Changes">Internal Changes</h1>

<ul>

<li><p>Export <code>re_op_compile</code> needed for re engines.</p>

</li>
<li><p>Added study API functions for possible internal costly optimizations of hv, av, cv, and rx, such as hash shrinking, regex and cv jit compilation, and av type promotion. For now implemented is <code>hv_study()</code>, the rest are stubs.</p>

</li>
<li><p><code>Perl_croak_no_modify()</code> got 2 arguments, the macro is the same. The new <code>croak_no_modify_sv(sv)</code> has better diagnostics with DEBUGGING and is used throughout core.</p>

</li>
<li><p>Many gv_fetch methods use now GV_CLASS, i.e. they try EXISTS and FETCH in the same stash lookup, not failing on restricted stashes.</p>

</li>
<li><p>The overload magic vtable (AMT) allows now readonly stashes. classes are not cached, readonly packages are.</p>

</li>
<li><p>Added <a href="/cperl/perlapi.html#hv_undef_flags">&quot;hv_undef_flags&quot; in perlapi</a> to the public API.</p>

</li>
<li><p>Refactored the <a href="/cperl/lib/fields.html">fields</a> API from global data into methods. Added a <a href="/cperl/perlapi.html#HvFIELDS">&quot;HvFIELDS&quot; in perlapi</a> field to HvAUX as linear buffer of &quot;name\0pad...\0&quot; fields, no class <code>%FIELDS</code> and <code>@FIELDS</code> anymore. See <a href="https://github.com/perl11/cperl/issues/322">[cperl #322]</a></p>

</li>
<li><p><a href="/cperl/perlintern.html#validate_proto">&quot;validate_proto&quot; in perlintern</a> got an additional cperl-only bool argument <code>maybe_sig</code>.</p>

</li>
<li><p>A new function, <a href="/cperl/perlapi.html#Perl_langinfo">Perl_langinfo()</a> has been added. It is an (almost) drop-in replacement for the system <code>nl_langinfo(3)</code>, but works on platforms that lack that; as well as being more thread-safe, and hiding some gotchas with locale handling from the caller. Code that uses this, needn&#39;t use <a href="http://man.he.net/man3/localeconv">localeconv(3)</a> (and be affected by the gotchas) to find the decimal point, thousands separator, or currency symbol. See <a href="/cperl/perlapi.html#Perl_langinfo">&quot;Perl_langinfo&quot; in perlapi</a>.</p>

</li>
<li><p>A new API function <a href="/cperl/perlapi.html#sv_rvunweaken">sv_rvunweaken()</a> has been added to complement <a href="/cperl/perlapi.html#sv_rvweaken">sv_rvweaken()</a>. The implementation was taken from <a href="/cperl/lib/Scalar/Util.html#unweaken">&quot;unweaken&quot; in Scalar::Util</a>.</p>

</li>
<li><p>A new flag, <code>SORTf_UNSTABLE</code>, has been added. This will allow a future commit to make mergesort unstable when the user specifies &lsquo;no sort stable&rsquo;, since it has been decided that mergesort should remain stable by default.</p>

</li>
<li><p>A new optimisation phase has been added to the compiler, <code>optimize_optree()</code>, which does a top-down scan of a complete optree just before the peephole optimiser is run. This phase is not currently hookable. This phase was previously in cperl named <code>prefinalize_op</code> and <code>postprocess_optree</code>.</p>

</li>
<li><p>An <code>OP_MULTICONCAT</code> op has been added. At <code>optimize_optree()</code> time, a chain of <code>OP_CONCAT</code> and <code>OP_CONST</code> ops, together optionally with an <code>OP_STRINGIFY</code> and/or <code>OP_SASSIGN</code>, are combined into a single <code>OP_MULTICONCAT</code> op. The op is of type <code>UNOP_AUX</code>, and the aux array contains the argument count, plus a pointer to a constant string and a set of segment lengths. For example with</p>

<pre><code>    my $x = &quot;foo=$foo, bar=$bar\n&quot;;</code></pre>

<p>the constant string would be <code>&quot;foo=, bar=\n&quot;</code> and the segment lengths would be (4,6,1). If the string contains characters such as <code>\x80</code>, whose representation changes under utf8, two sets of strings plus lengths are precomputed and stored.</p>

</li>
<li><p>Direct access to <a href="/cperl/perlapi.html#PL_keyword_plugin">PL_keyword_plugin</a> is not safe in the presence of multithreading. A new <a href="/cperl/perlapi.html#wrap_keyword_plugin">wrap_keyword_plugin</a> function has been added to allow XS modules to safely define custom keywords even when loaded from a thread, analogous to <a href="/cperl/perlapi.html#PL_check">PL_check</a> / <a href="/cperl/perlapi.html#wrap_op_checker">wrap_op_checker</a>.</p>

</li>
<li><p>The <code>PL_statbuf</code> interpreter variable has been removed.</p>

</li>
<li><p>The deprecated function <code>to_utf8_case()</code>, accessible from XS code, has been removed.</p>

</li>
<li><p>A new function <a href="/cperl/perlapi.html#is_utf8_invariant_string_loc"><code>is_utf8_invariant_string_loc()</code></a> has been added that is like <a href="/cperl/perlapi.html#is_utf8_invariant_string"><code>is_utf8_invariant_string()</code></a> but takes an extra pointer parameter into which is stored the location of the first variant character, if any are found.</p>

</li>
<li><p>XS modules can now automatically get reentrant versions of system functions on threaded perls.</p>

<p>By adding</p>

<pre><code>    #define PERL_REENTRANT</code></pre>

<p>near the beginning of an <code>XS</code> file, it will be compiled so that whatever reentrant functions perl knows about on that system will automatically and invisibly be used instead of the plain, non-reentrant versions. For example, if you write <code>getpwnam()</code> in your code, on a system that has <code>getpwnam_r()</code> all calls to the former will be translated invisibly into the latter. This does not happen except on threaded perls, as they aren&#39;t needed otherwise. Be aware that which functions have reentrant versions varies from system to system.</p>

</li>
<li><p>The <code>PERL_NO_OP_PARENT</code> build define is no longer supported, which means that perl is now always built with <code>PERL_OP_PARENT</code> enabled.</p>

</li>
<li><p>The format and content of the non-utf8 transliteration table attached to the <code>op_pv</code> field of <code>OP_TRANS</code>/<code>OP_TRANSR</code> ops has changed. It&#39;s now a <code>struct OPtrans_map</code>.</p>

</li>
<li><p>A new API function <a href="/cperl/perlapi.html#dump_sub_cv">&quot;dump_sub_cv&quot; in perlapi</a> has been added to avoid faking a slim CV to a full GV. cperl-only.</p>

</li>
<li><p>A new compiler <code>#define</code>, <code>dTHX_DEBUGGING</code>. has been added. This is useful for XS or C code that only need the thread context because their debugging statements that get compiled only under <code>-DDEBUGGING</code> need one.</p>

</li>
<li><p>A new API function <a href="/cperl/perlapi.html#Perl_setlocale">&quot;Perl_setlocale&quot; in perlapi</a> has been added.</p>

</li>
<li><p><a href="/cperl/perlapi.html#sync_locale">&quot;sync_locale&quot; in perlapi</a> has been revised to return a boolean as to whether the system was using the global locale or not.</p>

</li>
<li><p>A new kind of magic scalar, called a &quot;nonelem&quot; scalar, has been introduced. It is stored in an array to denote a nonexistent element, whenever such an element is accessed in a potential lvalue context. It replaces the existing &quot;defelem&quot; (deferred element) magic wherever this is possible, being significantly more efficient. This means that <code>some_sub($sparse_array[$nonelem])</code> no longer has to create a new magic defelem scalar each time, as long as the element is within the array.</p>

<p>It partially fixes the rare bug of deferred elements getting out of sync with their arrays when the array is shifted or unshifted. <a href="https://rt.perl.org/Ticket/Display.html?id=132729">[perl #132729]</a></p>

</li>
<li><p>With a threaded perl, GV&#39;s are relocated as READONLY PADs. Add an abstraction <a href="/cperl/perlintern.html#op_gv_set">&quot;op_gv_set&quot; in perlintern</a> to simplify that.</p>

</li>
<li><p>Removed the obsolete <code>OA_PADOP</code> class. Invalid and unused since 5.6.0. Kept <code>OP_IS_PADOP</code> and made it legal for threaded perls. The <a href="/cperl/lib/B.html">B</a> modules still print PADOP <code>&#39;#&#39;</code> ops as such, which were dynamically converted from SVOP&#39;s to PADOP&#39;s threaded.</p>

</li>
</ul>

<h1 id="Selected-Bug-Fixes">Selected Bug Fixes</h1>

<ul>

<li><p>The three supported unicode BOM&#39;s UTF-8, UTF-16LE and UTF-16BE set the utf8 and unicode compile-time hints to match the documentation and expectation. cperl-only</p>

</li>
<li><p>Fixed several minor coverity issues.</p>

</li>
<li><p>Fixed signature corruption with skip&#39;ed arguments without default and with 0, 1, undef or op defaults, such as in <code>sub func ($, $=0, $=1, $=2, $=do{$i++} $=&quot;foo&quot;, $a=&quot;bar&quot;, $b=&quot;zoot&quot;)</code>, with the first <code>$</code>, the 2nd <code>$=0</code>, the 3rd <code>$=1</code> and the 5th <code>$=do{}</code> argument. cperl-only.</p>

</li>
<li><p>Harmonized TOKENBUF_SIZE and stack buf sizes</p>

<p>The max identifier length depends on the max tokenbuf size, which went from 256 in perl5 to 1024 in cperl, mostly to speed up parsing with a larger parser buffer. A few places still had hardcoded 256 tmpbuf sizes, which led to wrong error messages. See <a href="https://github.com/perl11/cperl/issues/293">[cperl #293]</a>. cperl-only</p>

</li>
<li><p>Fixed one place in ck_sort for utf8 lexical variable names, which passed the unneeded UTF8 flag to <code>pad_findmy_pvn()</code>. In cperl all pads are normalized UTF8 for faster searches, the flag argument must be 0. See <a href="https://github.com/perl11/cperl/issues/293">[cperl #293]</a>. cperl-only</p>

</li>
<li><p>Fix regex stack recursion overflow with DEBUGGING</p>

<p>This is a regression since 5.26 (also in upstream perl5). Without DEBUGGING it failed with the error message &quot;Unmatched ( in regex&quot;, now with more than 5000 open parens it will fail with the same error message. This would be security relevant if one would use a DEBUGGING perl in production as one can construct a pattern which writes arbitrary values to the stack, similar to the Storable (<a href="https://github.com/perl11/cperl/issues/257">[cperl #257]</a>, <a href="https://rt.cpan.org/Public/Bug/Display.html?id=97526">[cpan #97526]</a>) stack overflow and the old 5.10 regex stack overflow attack. See <a href="https://github.com/perl11/cperl/issues/293">[cperl #293]</a>.</p>

</li>
<li><p>Fixed wrong &quot;Don&rsquo;t stringify GV in numeric cx outside warnings scope&quot; optimization from 5.18, which fails with code like <code>$* += (** = 0)</code>. See <a href="https://github.com/perl11/cperl/issues/299">[cperl #299]</a>.</p>

</li>
<li><p>Added missing arity checks to <code>readline</code> and <code>readpipe</code>. E.g. <code>readline(1,2)</code> and <code>readpipe(1,2)</code> errors now. Those excessive args were previously called for side-effects, in case of constants or variables effectively ignored.</p>

<p>All internal ops are now properly arity checked. See <a href="https://github.com/perl11/cperl/issues/301">[cperl #301]</a>.</p>

</li>
<li><p>More fixes for handling readonly packages, aka classes. Allow AMT (overload) cache updates, <code>@ISA</code> searches and general class dispatch, falling back to AUTOLOAD in classes.</p>

<p>E.g. this works now: <code>class XX{method m{&quot;ok $self&quot;}} XX-&gt;new-&gt;m</code> The string concat looked in the class XX for an overload for the concat &quot;.&quot; op, and failed with &quot;Modification of a read-only value attempted&quot; on the class, when trying to update the AMT cache. On windows it also tried the <code>&quot;(qr&quot;</code> overload. See <a href="https://github.com/perl11/cperl/issues/308">[cperl #308]</a>. cperl-only</p>

</li>
<li><p>List assignment (<code>aassign</code>) could in some rare cases allocate an entry on the mortals stack and leave the entry uninitialized, leading to possible crashes. <a href="https://rt.perl.org/Ticket/Display.html?id=131570">[perl #131570]</a></p>

</li>
<li><p>Attempting to apply an attribute to an <code>our</code> variable where a function of that name already exists could result in a NULL pointer being supplied where an SV was expected, crashing perl. See <a href="https://rt.perl.org/Public/Bug/Display.html?id=131597">[perl #131597]</a>.</p>

</li>
<li><p>Fixed thread-safety with locale-specific error messages on darwin. <code>uselocal()</code> on darwin is not thread-safe, so we disable the local restauration to <code>uselocal(LC_GLOBAL_LOCALE)</code> in child threads. cperl-only, <a href="https://github.com/perl11/cperl/issues/341">[cperl #341]</a></p>

</li>
<li><p><code>split &#39; &#39;</code> now correctly handles the argument being split when in the scope of the <a href="/cperl/lib/feature.html#The-unicode_strings-feature"><code>unicode_strings</code></a> feature. Previously, when a string using the single-byte internal representation contained characters that are whitespace by Unicode rules but not by ASCII rules, it treated those characters as part of fields rather than as field separators. <a href="https://rt.perl.org/Ticket/Display.html?id=130907">[perl #130907]</a></p>

</li>
<li><p>Several built-in functions previously had bugs that could cause them to write to the internal stack without allocating room for the item being written. In rare situations, this could have led to a crash. These bugs have now been fixed, and if any similar bugs are introduced in future, they will be detected automatically in debugging builds.</p>

<p>These internal stack usage checks introduced are also done by the <code>entersub</code> operator when calling XSUBs. This means we can report which XSUB failed to allocate enough stack space. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131975">[perl #131975]</a></p>

</li>
<li><p>Using a symbolic ref with postderef syntax as the key in a hash lookup was yielding an assertion failure on debugging builds. <a href="https://rt.perl.org/Ticket/Display.html?id=131627">[perl #131627]</a></p>

</li>
<li><p>Array and hash variables whose names begin with a caret now admit indexing inside their curlies when interpolated into strings, as in <code>&quot;${^CAPTURE[0]}&quot;</code> to index <code>@{^CAPTURE}</code>. <a href="https://rt.perl.org/Ticket/Display.html?id=131664">[perl #131664]</a></p>

</li>
<li><p>Fetching the name of a glob that was previously UTF-8 but wasn&#39;t any longer would return that name flagged as UTF-8. <a href="https://rt.perl.org/Ticket/Display.html?id=131263">[perl #131263]</a></p>

</li>
<li><p>The perl <code>sprintf()</code> function (via the underlying C function <code>Perl_sv_vcatpvfn_flags()</code>) has been heavily reworked to fix many minor bugs, including the integer wrapping of large width and precision specifiers and potential buffer overruns. It has also been made faster in many cases.</p>

</li>
<li><p>Exiting from an <code>eval</code>, whether normally or via an exception, now always frees temporary values (possibly calling destructors) <i>before</i> setting <code>$@</code>. For example:</p>

<pre><code>    sub DESTROY { eval { die &quot;died in DESTROY&quot;; } }
    eval { bless []; };
    # $@ used to be equal to &quot;died in DESTROY&quot; here; it&#39;s now &quot;&quot;.</code></pre>

</li>
<li><p>Fixed a duplicate symbol failure with <code>-flto -mieee-fp</code> builds. <i>pp.c</i> defined <code>_LIB_VERSION</code> which <code>-lieee</code> already defines. <a href="https://rt.perl.org/Ticket/Display.html?id=131786">[perl #131786]</a></p>

</li>
<li><p>The tokenizer no longer consumes the exponent part of a floating point number if it&#39;s incomplete. <a href="https://rt.perl.org/Ticket/Display.html?id=131725">[perl #131725]</a></p>

</li>
<li><p>On non-threaded builds, for <code>m/$null/</code> where <code>$null</code> is an empty string is no longer treated as if the <code>/o</code> flag was present when the previous matching match operator included the <code>/o</code> flag. The rewriting used to implement this behavior could confuse the interpreter. This matches the behaviour of threaded builds. <a href="https://rt.perl.org/Ticket/Display.html?id=124368">[perl #124368]</a></p>

</li>
<li><p>Parsing a <code>sub</code> definition could cause a use after free if the <code>sub</code> keyword was followed by whitespace including newlines (and comments.) <a href="https://rt.perl.org/Public/Bug/Display.html?id=131836">[perl #131836]</a></p>

</li>
<li><p>The tokenizer now correctly adjusts a parse pointer when skipping whitespace in a <code> ${identifier} </code> construct. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131949">[perl #131949]</a></p>

</li>
<li><p>Accesses to <code>${^LAST_FH}</code> no longer assert after using any of a variety of I/O operations on a non-glob. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128263">[perl #128263]</a></p>

</li>
<li><p>The <code>Copy()</code>, <code>Move()</code>, <code>Zero()</code> macros and their variants now assert if the pointers supplied are <code>NULL</code>. ISO C considers supplying NULL pointers to the functions these macros are built upon as undefined behaviour even when their count parameters are zero. Based on these assertions and the original bug report three macro calls were made conditional. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131746">[perl #131746]</a> <a href="https://rt.perl.org/Public/Bug/Display.html?id=131892">[perl #131892]</a></p>

</li>
<li><p>The in-place sort optimisation now correctly strengthens weak references using the new <a href="/cperl/perlapi.html#sv_rvunweaken">sv_rvunweaken()</a> API function.</p>

</li>
<li><p>Package names are now always included in <code>:prototype</code> warnings <a href="https://rt.perl.org/Public/Bug/Display.html?id=131833">[perl #131833]</a></p>

</li>
<li><p>Creating a thread with no parameters no longer tries to <code>Copy()</code> a null pointer. This fixes an assertion failure and allows threaded builds to work again.</p>

</li>
<li><p>The <code>je_old_stack_hwm</code> field, previously only found in the <code>jmpenv</code> structure on debugging builds, has been added to non-debug builds as well. This fixes an issue with some CPAN modules caused by the size of this structure varying between debugging and non-debugging builds. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131942">[perl #131942]</a></p>

</li>
<li><p>The arguments to the <code>ninstr()</code> macro are now correctly parenthesized.</p>

</li>
<li><p>A NULL pointer dereference in the <code>S_regmatch()</code> function has been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=132017">[perl #132017]</a></p>

</li>
<li><p>Calling <a href="/cperl/perlfunc.html#exec-PROGRAM-LIST">exec PROGRAM LIST</a> with an empty <code>LIST</code> has been fixed. This should call <code>execvp()</code> with an empty <code>argv</code> array (containing only the terminating <code>NULL</code> pointer), but was instead just returning false (and not setting <a href="/cperl/perlvar.html#pod">$!</a>). <a href="https://rt.perl.org/Public/Bug/Display.html?id=131730">[perl #131730]</a></p>

</li>
<li><p>The <code>gv_fetchmeth_sv</code> C function stopped working properly in Perl 5.22 when fetching a constant with a UTF-8 name if that constant subroutine was stored in the stash as a simple scalar reference, rather than a full typeglob. This has been fixed.</p>

</li>
<li><p>Single-letter debugger commands followed by an argument which starts with punctuation (e.g. <code>p$^V</code> and <code>x@ARGV</code>) now work again. They had been wrongly requiring a space between the command and the argument. <a href="https://rt.perl.org/Public/Bug/Display.html?id=120174">[perl #120174]</a></p>

</li>
<li><p><a href="/cperl/perlfunc.html#splice-ARRAY-OFFSET-LENGTH-LIST">splice</a> now throws an exception (&quot;Modification of a read-only value attempted&quot;) when modifying a read-only array. Until now it had been silently modifying the array. The new behaviour is consistent with the behaviour of <a href="/cperl/perlfunc.html#push-ARRAY-LIST">push</a> and <a href="/cperl/perlfunc.html#unshift-ARRAY-LIST">unshift</a>. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131000">[perl #131000]</a></p>

</li>
<li><p><code>stat()</code>, <code>lstat()</code>, and file test operators now fail if given a filename containing a nul character, in the same way that <code>open()</code> already fails.</p>

</li>
<li><p><code>stat()</code>, <code>lstat()</code>, and file test operators now reliably set <code>$!</code> when failing due to being applied to a closed or otherwise invalid file handle.</p>

</li>
<li><p>File test operators for Unix permission bits that don&#39;t exist on a particular platform, such as <code>-k</code> (sticky bit) on Windows, now check that the file being tested exists before returning the blanket false result, and yield the appropriate errors if the argument doesn&#39;t refer to a file.</p>

</li>
<li><p>The in-place reverse optimisation now correctly strengthens weak references using the <a href="/cperl/perlapi.html#sv_rvunweaken">sv_rvunweaken()</a> API function.</p>

</li>
<li><p>Fixed a read before buffer when parsing a range starting with <code>\N{}</code> at the beginning of the character set for the transliteration operator. <a href="https://rt.perl.org/Public/Bug/Display.html?id=132245">[perl #132245]</a></p>

</li>
<li><p>Fixed a leaked SV when parsing an empty <code>\N{}</code> at compile-time. <a href="https://rt.perl.org/Public/Bug/Display.html?id=132245">[perl #132245]</a></p>

</li>
<li><p>Calling <code>do $path</code> on a directory or block device now yields a meaningful error code in <code>$!</code>. <a href="https://rt.perl.org/Public/Bug/Display.html?id=125774">[perl #125774]</a></p>

</li>
<li><p>Regexp substitution using an overloaded replacement value that provides a tainted stringification now correctly taints the resulting string. <a href="https://rt.perl.org/Public/Bug/Display.html?id=115266">[perl #115266]</a></p>

</li>
<li><p>Lexical sub declarations in <code>do</code> blocks such as <code>do { my sub lex; 123 }</code> could corrupt the stack, erasing items already on the stack in the enclosing statement. This has been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=132442">[perl #132442]</a></p>

</li>
<li><p><code>pack</code> and <code>unpack</code> can now handle repeat counts and lengths that exceed two billion. <a href="https://rt.perl.org/Ticket/Display.html?id=119367">[perl #119367]</a></p>

</li>
<li><p>Digits past the radix point in octal and binary floating point literals now have the correct weight on platforms where a floating point significand doesn&#39;t fit into an integer type.</p>

</li>
<li><p>The canonical truth value no longer has a spurious special meaning as a callable subroutine. It used to be a magic placeholder for a missing <code>import</code> or <code>unimport</code> method, but is now treated like any other string <code>1</code>. <a href="https://rt.perl.org/Ticket/Display.html?id=126042">[perl #126042]</a></p>

</li>
<li><p><code>system</code> now reduces its arguments to strings in the parent process, so any effects of stringifying them (such as overload methods being called or warnings being emitted) are visible in the way the program expects. <a href="https://rt.perl.org/Ticket/Display.html?id=121105">[perl #121105]</a></p>

</li>
<li><p>The <code>readpipe()</code> built-in function now checks at compile time that it has only one parameter expression, and puts it in scalar context, thus ensuring that it doesn&#39;t corrupt the stack at runtime. <a href="https://rt.perl.org/Ticket/Display.html?id=4574">[perl #4574]</a></p>

</li>
<li><p><code>sort</code> now performs correct reference counting when aliasing <code>$a</code> and <code>$b</code>, thus avoiding premature destruction and leakage of scalars if they are re-aliased during execution of the sort comparator. <a href="https://rt.perl.org/Ticket/Display.html?id=92264">[perl #92264]</a></p>

</li>
<li><p><code>reverse</code> with no operand, reversing <code>$_</code> by default, is no longer in danger of corrupting the stack. <a href="https://rt.perl.org/Ticket/Display.html?id=132544">[perl #132544]</a></p>

</li>
<li><p><code>exec</code>, <code>system</code>, et al are no longer liable to have their argument lists corrupted by reentrant calls and by magic such as tied scalars. <a href="https://rt.perl.org/Ticket/Display.html?id=129888">[perl #129888]</a></p>

</li>
<li><p>Perl&#39;s own <code>malloc</code> no longer gets confused by attempts to allocate more than a gigabyte on a 64-bit platform. <a href="https://rt.perl.org/Ticket/Display.html?id=119829">[perl #119829]</a></p>

</li>
<li><p>Stacked file test operators in a sort comparator expression no longer cause a crash. <a href="https://rt.perl.org/Ticket/Display.html?id=129347">[perl #129347]</a></p>

</li>
<li><p>An identity <code>tr///</code> transformation on a reference is no longer mistaken for that reference for the purposes of deciding whether it can be assigned to. <a href="https://rt.perl.org/Ticket/Display.html?id=130578">[perl #130578]</a></p>

</li>
<li><p>Lengthy hexadecimal, octal, or binary floating point literals no longer cause undefined behaviour when parsing digits that are of such low significance that they can&#39;t affect the floating point value. <a href="https://rt.perl.org/Ticket/Display.html?id=131894">[perl #131894]</a></p>

</li>
<li><p><code>open $$scalarref...</code> and similar invocations no longer leak the file handle. <a href="https://rt.perl.org/Ticket/Display.html?id=115814">[perl #115814]</a></p>

</li>
<li><p>Some convoluted kinds of regexp no longer cause an arithmetic overflow when compiled. <a href="https://rt.perl.org/Ticket/Display.html?id=131893">[perl #131893]</a></p>

</li>
<li><p>The default typemap, by avoiding <code>newGVgen</code>, now no longer leaks when XSUBs return file handles (<code>PerlIO *</code> or <code>FILE *</code>). <a href="https://rt.perl.org/Ticket/Display.html?id=115814">[perl #115814]</a></p>

</li>
<li><p>Creating a <code>BEGIN</code> block as an XS subroutine with a prototype no longer crashes because of the early freeing of the subroutine.</p>

</li>
<li><p>The <code>printf</code> format specifier <code>%.0f</code> no longer rounds incorrectly <a href="https://rt.perl.org/Ticket/Display.html?id=47602">[perl #47602]</a>, and now shows the correct sign for a negative zero.</p>

</li>
<li><p>Fixed an issue where the error <code>Scalar value @arrayname[0] better written as $arrayname</code> would give an error <code>Cannot printf Inf with &#39;c&#39;</code> when arrayname starts with <code>Inf</code>. <a href="https://rt.perl.org/Ticket/Display.html?id=132645">[perl #132645]</a></p>

</li>
<li><p>The Perl implementation of <code>getcwd()</code> in <code>Cwd</code> in the PathTools distribution now behaves the same as XS implementation on errors: it returns an error, and sets <code>$!</code>. <a href="https://rt.perl.org/Ticket/Display.html?id=132648">[perl #132648]</a></p>

</li>
<li><p>Vivify array elements when putting them on the stack. Fixes <a href="https://rt.perl.org/Ticket/Display.html?id=8910">[perl #8910]</a> (reported in April 2002).</p>

</li>
<li><p>Fixed parsing of braced subscript after parens. Fixes <a href="https://rt.perl.org/Ticket/Display.html?id=8045">[perl #8045]</a> (reported in December 2001).</p>

</li>
<li><p><code>tr/non_utf8/long_non_utf8/c</code> could give the wrong results when the length of the replacement character list was greater than 0x7fff.</p>

</li>
<li><p><code>tr/non_utf8/non_utf8/cd</code> failed to add the implied <code>\x{100}-\x{7fffffff}</code> to the search character list.</p>

</li>
<li><p>Compilation failures within &quot;perl-within-perl&quot; constructs, such as with string interpolation and the right part of <code>s///e</code>, now cause compilation to abort earlier.</p>

<p>Previously compilation could continue in order to report other errors, but the failed sub-parse could leave partly parsed constructs on the parser shift-reduce stack, confusing the parser, leading to perl crashes. <a href="https://rt.perl.org/Ticket/Display.html?id=125351">[perl #125351]</a></p>

</li>
<li><p>Errors while compiling a regex character class could sometime trigger an assertion failure. <a href="https://rt.perl.org/Ticket/Display.html?id=132163">[perl #132163]</a></p>

</li>
<li><p><code>-Dx</code> has been fixed to accept slim CVs without fake GV.</p>

</li>
<li><p>On threaded perls where the decimal point (radix) character is not a dot, it has been possible for a race to occur between threads when one needs to use the real radix character. This has now been fixed by use of a mutex on systems without thread-safe locales, and the problem just doesn&#39;t come up on those with thread-safe locales.</p>

</li>
<li><p>Fixed error message for illegal charnames, and avoid passing NUL into the charnames lookup, which is a potential security threat. E.g. on &quot;\N{TILDE\000}&quot; report &quot;Missing right brace on \\N\{\}&quot; as before with 5.27.2 and on &quot;\N{TILDE\001}&quot; report &quot;Unknown charname &#39;TILDE\1&#39;&quot; and not &quot;Unknown charname &#39;TILDE&#39;&quot;. perl5.27.5 started reporting those errors with &quot;Unknown charname &#39;TILDE&#39;&quot; hiding all characters behind the embedded NUL or any non-printable character. <a href="https://github.com/perl11/cperl/issues/342">[cperl #342]</a></p>

</li>
<li><p>Fixed endless loop in the parser with a syntax error on an aborted class declaration, such as e.g. with <code>class $</code>. The previous behavior was repeating the warning message <code>Bareword found where operator expected</code> endlessly. <a href="https://github.com/perl11/cperl/issues/346">[cperl #346]</a> cperl-only</p>

</li>
<li><p>Fixed autovivifaction of hash slices and key/value hash slices in sub args. They are now consistent with a list of hash elements. hash slices still autovivify in for loops.</p>

<p>There&#39;s also a new syntax warning about this change, <a href="/cperl/perldiag.html#No-autovivification-of-hash-slice-anymore">&quot;No autovivification of hash slice anymore&quot; in perldiag</a> <a href="https://github.com/perl11/cperl/issues/347">[cperl #347]</a>. cperl-only</p>

</li>
<li><p>Fixed wrong <code>panic: distributed hash flood</code> when dealing with large <code>%^H</code> hints hashes, with &gt;127 entries, such as <code>_charnames.pm</code> in <code>Regexp::Common</code>. Fixed the logic dealing with such a hints hash. <a href="https://github.com/perl11/cperl/issues/350">[cperl #350]</a>. cperl-only</p>

</li>
<li><p>Fixed endless rpeep compiler loop with a constant loop and a nested loop, which e.g. broke <code>Net:HTTP</code>. <a href="https://github.com/perl11/cperl/issues/349">[cperl #349]</a>. cperl-only</p>

</li>
<li><p>Fixed missing compile-time AvSHAPED detection in nested scopes. E.g.:</p>

<pre><code>    my @a[1]; sub { $a[0]-&gt;[5] = 1 }-&gt;(); # mderef_u
    my @b[1]; sub { $b[0] = 1 }-&gt;();      # aelemfast_lex_u</code></pre>

<p>See <a href="https://github.com/perl11/cperl/issues/354">[cperl #354]</a>. cperl-only</p>

</li>
</ul>

<h1 id="Known-Problems">Known Problems</h1>

<ul>

<li><p>Classes are still experimental, and have some limitations:</p>

<p>Cannot be created in an eval block or subroutine. The pad lookup is still global and not per optional CvPADLIST.</p>

<p>Method composition with overlapping field indices does not work yet. This requires the not yet finished inliner. <code>panic: cannot yet adjust field indices when composing role %s::%s into %s %s [cperl #311]</code></p>

<p>Array and hash fields cannot be parsed yet.</p>

</li>
<li><p>Fixed return type of <code>DynaLoader::dl_find_symbol_anywhere()</code>, the address, not the name. <a href="https://github.com/perl11/cperl/issues/352">[cperl #352]</a>.</p>

</li>
</ul>

<h1 id="Acknowledgements">Acknowledgements</h1>

<p>cperl 5.28.0c represents approximately 15 months of development since cperl 5.26.0c and contains approximately 860,000 lines of changes across 2,100 files from 73 authors.</p>

<p>Excluding auto-generated files, documentation and release tools, there were approximately 680,000 lines of changes to 1,100 .pm, .t, .c and .h files.</p>

<p>The following people are known to have contributed the improvements that became cperl 5.28.0:</p>

<p>Karl Williamson, Reini Urban, David Mitchell, Zefram, Tony Cook, Aaron Crane, Father Chrysostomos, Dagfinn Ilmari Manns&aring;ker, Yves Orton, James E Keenan, Steve Hay, Lukas Mai, Craig A. Berry, Nicolas Rochelemagne, Sawyer X, Daniel Dragan, H.Merijn Brand, Chris &#39;BinGOs&#39; Williams, Todd Rinaldo, Pali, Jarkko Hietaniemi, Karen Etheridge, Abigail, Dominic Hargreaves, Sergey Aleynikov, Matthew Horsfall, Marco Fontani, Smylers, Nicholas Clark, John Peacock, Tomasz Konojacki, Steffen M&uuml;ller, Aristotle Pagaltzis, &AElig;var Arnfj&ouml;r&eth; Bjarmason, Eric Herman, Tom Hukins, vendethiel, Slaven Rezic, Renee Baecker, Marc-Philip Werner, Harald J&ouml;rg, George Hartzell, Graham Knop, Ricardo Signes, Andrew Fresh, J. Nick Koston, Neil Bowers, Dmitry Ulanov, sten22, Andy Lester, David H. Gutteridge, William N. Braswell, Jr, John SJ Anderson, Scott Lanning, Andy Dougherty, Vitali Peil, Peter John Acklam, Dan Collins, Niko Tyni, E. Choroba, Tom Wyant, John Lightsey, Jacques Germishuys, Gene Sullivan, Leon Timmermans, Eugen Konkov, Fran&ccedil;ois Perrad, John P. Linderman, Alexandr Savca, Ken Cotterill, Thomas Sibley, Shoichi Kaji.</p>

<p>The list above is almost certainly incomplete as it is automatically generated from version control history including the perl and cperl repos. In particular, it does not include the names of the (very much appreciated) contributors who reported issues to the Perl bug tracker and the cperl github issues.</p>

<p>Many of the changes included in this version originated in the CPAN modules included in Perl&#39;s core. We&#39;re grateful to the entire CPAN community for helping Perl to flourish.</p>

<p>For a more complete list of all of Perl&#39;s historical contributors, please see the <i>AUTHORS</i> file in the Perl source distribution.</p>

<p>Generated with:</p>

<pre><code>    cperl Porting/acknowledgements.pl cperl-5.26.0..HEAD -c</code></pre>

<h1 id="Reporting-Bugs">Reporting Bugs</h1>

<p>If you find what you think is a bug, you might check the perl bug database at <a href="https://rt.perl.org/">https://rt.perl.org/</a> . There may also be information at <a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>

<p>If you believe you have an unreported bug, please run the <a>cperlbug</a> program included with your release. Be sure to trim your bug down to a tiny but sufficient test case. Your bug report, along with the output of <code>perl -V</code>, will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</p>

<p>If you think it&#39;s a cperl specific bug or trust the cperl developers more please file an issue at <a href="https://github.com/perl11/cperl/issues">https://github.com/perl11/cperl/issues</a>.</p>

<p>If the bug you are reporting has security implications which make it inappropriate to send to a publicly archived mailing list, then see <a href="/cperl/perlsec.html#SECURITY-VULNERABILITY-CONTACT-INFORMATION">&quot;SECURITY VULNERABILITY CONTACT INFORMATION&quot; in perlsec</a> For details of how to report the issue.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>The <i>Changes</i> file for an explanation of how to view exhaustive details on what changed.</p>

<p>The <i>INSTALL</i> file for how to build Perl.</p>

<p>The <i>README</i> file for general stuff.</p>

<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>

<h1 id="POD-ERRORS">POD ERRORS</h1>

<p>Hey! <b>The above document had some coding errors, which are explained below:</b></p>

<dl>

<dt id="Around-line-2688">Around line 2688:</dt>
<dd>

<p>alternative text &#39;do &quot;%s&quot; failed, &#39;.&#39; is no longer in @INC; did you mean do &quot;./%s&quot;? &#39; contains non-escaped | or /</p>

</dd>
</dl>


</body>

</html>


