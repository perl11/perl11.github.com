<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@osx219.apple.com" />
</head>

<body style="background-color: white">



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#Core-Enhancements">Core Enhancements</a>
    <ul>
      <li><a href="#New-regular-expression-modifier-xx">New regular expression modifier /xx</a></li>
      <li><a href="#New-Hash-Function-For-64-bit-Builds">New Hash Function For 64-bit Builds</a></li>
      <li><a href="#Indented-Here-documents">Indented Here-documents</a></li>
      <li><a href="#and-INC">&#39;.&#39; and @INC</a></li>
      <li><a href="#create-a-safer-utf8_hop-called-utf8_hop_safe">create a safer utf8_hop() called utf8_hop_safe()</a></li>
      <li><a href="#CAPTURE-CAPTURE-and-CAPTURE_ALL">@{^CAPTURE}, %{^CAPTURE}, and %{^CAPTURE_ALL}</a></li>
      <li><a href="#Unicode-9.0-is-now-supported">Unicode 9.0 is now supported</a></li>
      <li><a href="#Use-of-p-script-uses-the-improved-Script_Extensions-property">Use of \p{script} uses the improved Script_Extensions property</a></li>
      <li><a href="#Declaring-a-reference-to-a-variable">Declaring a reference to a variable</a></li>
      <li><a href="#Perl-can-now-do-default-collation-in-UTF-8-locales-on-platforms-that-support-it">Perl can now do default collation in UTF-8 locales on platforms that support it</a></li>
      <li><a href="#Better-locale-collation-of-strings-containing-embedded-NUL-characters">Better locale collation of strings containing embedded NUL characters</a></li>
      <li><a href="#Lexical-subroutines-are-no-longer-experimental">Lexical subroutines are no longer experimental</a></li>
      <li><a href="#CORE-subroutines-for-hash-and-array-functions-callable-via-reference">CORE subroutines for hash and array functions callable via reference</a></li>
      <li><a href="#POSIX::tmpnam-has-been-removed">POSIX::tmpnam() has been removed</a></li>
      <li><a href="#require-::Foo::Bar-is-now-illegal">require ::Foo::Bar is now illegal.</a></li>
      <li><a href="#Unescaped-literal-characters-in-regular-expression-patterns-are-no-longer-permissible">Unescaped literal &quot;{&quot; characters in regular expression patterns are no longer permissible</a></li>
      <li><a href="#Literal-control-character-variable-names-are-no-longer-permissible">Literal control character variable names are no longer permissible</a></li>
      <li><a href="#NBSP-is-no-longer-permissible-in-N">NBSP is no longer permissible in \N{...}</a></li>
    </ul>
  </li>
  <li><a href="#Security">Security</a>
    <ul>
      <li><a href="#Remove-current-dir-.-from-INC">Remove current dir (.) from @INC</a></li>
      <li><a href="#Escaped-colons-and-relative-paths-in-PATH">&quot;Escaped&quot; colons and relative paths in PATH</a></li>
      <li><a href="#Di-switch-is-now-required-for-PerlIO-debugging-output">-Di switch is now required for PerlIO debugging output</a></li>
    </ul>
  </li>
  <li><a href="#Incompatible-Changes">Incompatible Changes</a>
    <ul>
      <li><a href="#ENCODING-has-been-removed">${^ENCODING} has been removed</a></li>
      <li><a href="#scalar-hash-return-signature-changed">scalar(%hash) return signature changed</a></li>
      <li><a href="#keys-returned-from-an-lvalue-subroutine">keys returned from an lvalue subroutine</a></li>
    </ul>
  </li>
  <li><a href="#Deprecations">Deprecations</a>
    <ul>
      <li><a href="#String-delimiters-that-arent-stand-alone-graphemes-are-now-deprecated">String delimiters that aren&#39;t stand-alone graphemes are now deprecated</a></li>
    </ul>
  </li>
  <li><a href="#Performance-Enhancements">Performance Enhancements</a></li>
  <li><a href="#Modules-and-Pragmata">Modules and Pragmata</a>
    <ul>
      <li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></li>
    </ul>
  </li>
  <li><a href="#Documentation">Documentation</a>
    <ul>
      <li><a href="#New-Documentation">New Documentation</a>
        <ul>
          <li><a href="#perldeprecation">perldeprecation</a></li>
        </ul>
      </li>
      <li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a>
        <ul>
          <li><a href="#perlcall">perlcall</a></li>
          <li><a href="#perlcommunity">perlcommunity</a></li>
          <li><a href="#perldata">perldata</a></li>
          <li><a href="#perldelta">perldelta</a></li>
          <li><a href="#perldiag">perldiag</a></li>
          <li><a href="#perlexperiment">perlexperiment</a></li>
          <li><a href="#perlfunc">perlfunc</a></li>
          <li><a href="#perlguts">perlguts</a></li>
          <li><a href="#perlhack">perlhack</a></li>
          <li><a href="#perlinterp">perlinterp</a></li>
          <li><a href="#perllocale">perllocale</a></li>
          <li><a href="#perlmodinstall">perlmodinstall</a></li>
          <li><a href="#perlmodlib">perlmodlib</a></li>
          <li><a href="#perlnewmod">perlnewmod</a></li>
          <li><a href="#perlobj">perlobj</a></li>
          <li><a href="#perlootut">perlootut</a></li>
          <li><a href="#perlop">perlop</a></li>
          <li><a href="#perlre">perlre</a></li>
          <li><a href="#perlsec">perlsec</a></li>
          <li><a href="#perlref">perlref</a></li>
          <li><a href="#perltie">perltie</a></li>
          <li><a href="#perlunicode">perlunicode</a></li>
          <li><a href="#perlvar">perlvar</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#Diagnostics">Diagnostics</a>
    <ul>
      <li><a href="#New-Diagnostics">New Diagnostics</a>
        <ul>
          <li><a href="#New-Errors">New Errors</a></li>
          <li><a href="#New-Warnings">New Warnings</a></li>
        </ul>
      </li>
      <li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></li>
    </ul>
  </li>
  <li><a href="#Utility-Changes">Utility Changes</a>
    <ul>
      <li><a href="#c2ph-and-pstruct">c2ph and pstruct</a></li>
      <li><a href="#Porting-pod_lib.pl">Porting/pod_lib.pl</a></li>
      <li><a href="#Porting-sync-with-cpan">Porting/sync-with-cpan</a></li>
      <li><a href="#perf-benchmarks">perf/benchmarks</a></li>
      <li><a href="#Porting-checkAUTHORS.pl">Porting/checkAUTHORS.pl</a></li>
      <li><a href="#t-porting-regen.t">t/porting/regen.t</a></li>
      <li><a href="#utils-h2xs.PL">utils/h2xs.PL</a></li>
      <li><a href="#perlbug">perlbug</a></li>
    </ul>
  </li>
  <li><a href="#Configuration-and-Compilation">Configuration and Compilation</a></li>
  <li><a href="#Testing">Testing</a></li>
  <li><a href="#Platform-Support">Platform Support</a>
    <ul>
      <li><a href="#New-Platforms">New Platforms</a></li>
      <li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></li>
    </ul>
  </li>
  <li><a href="#Internal-Changes">Internal Changes</a></li>
  <li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a></li>
  <li><a href="#Known-Problems">Known Problems</a></li>
  <li><a href="#Errata-From-Previous-Releases">Errata From Previous Releases</a></li>
  <li><a href="#Obituary">Obituary</a></li>
  <li><a href="#Acknowledgements">Acknowledgements</a></li>
  <li><a href="#Reporting-Bugs">Reporting Bugs</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>perldelta - what is new for perl v5.26.0</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This document describes the differences between the 5.24.0 release and the 5.26.0 release.</p>

<h1 id="Core-Enhancements">Core Enhancements</h1>

<h2 id="New-regular-expression-modifier-xx">New regular expression modifier <code>/xx</code></h2>

<p>Specifying two <code>x</code> characters to modify a regular expression pattern does everything that a single one does, but additionally TAB and SPACE characters within a bracketed character class are generally ignored and can be added to improve readability, like <span style="white-space: nowrap;"><code>/[ ^ A-Z d-f p-x ]/xx</code></span>. Details are at <a href="/cperl/perlre.html#x-and-xx">&quot;/x and /xx&quot; in perlre</a>.</p>

<h2 id="New-Hash-Function-For-64-bit-Builds">New Hash Function For 64-bit Builds</h2>

<p>We have switched to a hybrid hash function to better balance performance for short and long keys.</p>

<p>For short keys, 16 bytes and under, we use an optimised variant of One At A Time Hard, and for longer keys we use Siphash 1-3. For very long keys this is a big improvement in performance. For shorter keys there is a modest improvement.</p>

<h2 id="Indented-Here-documents">Indented Here-documents</h2>

<p>This adds a new modifier &#39;~&#39; to here-docs that tells the parser that it should look for /^\s*$DELIM\n/ as the closing delimiter.</p>

<p>These syntaxes are all supported:</p>

<pre><code>    &lt;&lt;~EOF;
    &lt;&lt;~\EOF;
    &lt;&lt;~&#39;EOF&#39;;
    &lt;&lt;~&quot;EOF&quot;;
    &lt;&lt;~`EOF`;
    &lt;&lt;~ &#39;EOF&#39;;
    &lt;&lt;~ &quot;EOF&quot;;
    &lt;&lt;~ `EOF`;</code></pre>

<p>The &#39;~&#39; modifier will strip, from each line in the here-doc, the same whitespace that appears before the delimiter.</p>

<p>Newlines will be copied as is, and lines that don&#39;t include the proper beginning whitespace will cause perl to croak.</p>

<p>For example:</p>

<pre><code>    if (1) {
      print &lt;&lt;~EOF;
        Hello there
        EOF
    }</code></pre>

<p>prints &quot;Hello there\n&quot; with no leading whitespace.</p>

<h2 id="and-INC">&#39;.&#39; and @INC</h2>

<p>Perl now provides a way to build perl without <code>.</code> in @INC by default. If you want this feature, you can build with -Ddefault_inc_excludes_dot</p>

<p>Because the testing / make process for perl modules do not function well with <code>.</code> missing from @INC, Perl now supports the environment variable PERL_USE_UNSAFE_INC=1 which makes Perl behave as it previously did, returning <code>.</code> to @INC in all child processes.</p>

<p>WARNING: <code>PERL_USE_UNSAFE_INC</code> has been provided during the perl 5.25 development cycle and is not guaranteed to function in perl 5.26.</p>

<h2 id="create-a-safer-utf8_hop-called-utf8_hop_safe">create a safer utf8_hop() called utf8_hop_safe()</h2>

<p>Unlike utf8_hop(), utf8_hop_safe() won&#39;t navigate before the beginning or after the end of the supplied buffer.</p>

<h2 id="CAPTURE-CAPTURE-and-CAPTURE_ALL">@{^CAPTURE}, %{^CAPTURE}, and %{^CAPTURE_ALL}</h2>

<p><code>@{^CAPTURE}</code> exposes the capture buffers of the last match as an array. So <code>$1</code> is <code>${^CAPTURE}[0]</code>.</p>

<p><code>%{^CAPTURE}</code> is the equivalent to <code>%+</code> (ie named captures)</p>

<p><code>%{^CAPTURE_ALL}</code> is the equivalent to <code>%-</code> (ie all named captures).</p>

<h2 id="Unicode-9.0-is-now-supported">Unicode 9.0 is now supported</h2>

<p>A list of changes is at <a href="http://www.unicode.org/versions/Unicode9.0.0/">http://www.unicode.org/versions/Unicode9.0.0/</a>. Modules that are shipped with core Perl but not maintained by p5p do not necessarily support Unicode 9.0. <a>Unicode::Normalize</a> does work on 9.0.</p>

<h2 id="Use-of-p-script-uses-the-improved-Script_Extensions-property">Use of <code>\p{<i>script</i>}</code> uses the improved Script_Extensions property</h2>

<p>Unicode 6.0 introduced an improved form of the Script (<code>sc</code>) property, and called it Script_Extensions (<code>scx</code>). As of now, Perl uses this improved version when a property is specified as just <code>\p{<i>script</i>}</code>. The meaning of compound forms, like <code>\p{sc=<i>script</i>}</code> are unchanged. This should make programs be more accurate when determining if a character is used in a given script, but there is a slight chance of breakage for programs that very specifically needed the old behavior. See <a href="/cperl/perlunicode.html#Scripts">&quot;Scripts&quot; in perlunicode</a>.</p>

<h2 id="Declaring-a-reference-to-a-variable">Declaring a reference to a variable</h2>

<p>As an experimental feature, Perl now allows the referencing operator to come after <a href="/cperl/perlfunc.html#my"><code>my()</code></a>, <a href="/cperl/perlfunc.html#state"><code>state()</code></a>, <a href="/cperl/perlfunc.html#our"><code>our()</code></a>, or <a href="/cperl/perlfunc.html#local"><code>local()</code></a>. This syntax must be enabled with <code>use feature &#39;declared_refs&#39;</code>. It is experimental, and will warn by default unless <code>no warnings &#39;experimental::refaliasing&#39;</code> is in effect. It is intended mainly for use in assignments to references. For example:</p>

<pre><code>    use experimental &#39;refaliasing&#39;, &#39;declared_refs&#39;;
    my \$a = \$b;</code></pre>

<p>See <a href="/cperl/perlref.html#Assigning-to-References">&quot;Assigning to References&quot; in perlref</a> for slightly more detail.</p>

<h2 id="Perl-can-now-do-default-collation-in-UTF-8-locales-on-platforms-that-support-it">Perl can now do default collation in UTF-8 locales on platforms that support it</h2>

<p>Some platforms natively do a reasonable job of collating and sorting in UTF-8 locales. Perl now works with those. For portability and full control, <a>Unicode::Collate</a> is still recommended, but now you may not need to do anything special to get good-enough results, depending on your application. See <a href="/cperl/perllocale.html#Category-LC_COLLATE:-Collation:-Text-Comparisons-and-Sorting">&quot;Category <code>LC_COLLATE</code>: Collation: Text Comparisons and Sorting&quot; in perllocale</a>.</p>

<h2 id="Better-locale-collation-of-strings-containing-embedded-NUL-characters">Better locale collation of strings containing embedded <code>NUL</code> characters</h2>

<p>In locales that have multi-level character weights, these are now ignored at the higher priority ones. There are still some gotchas in some strings, though. See <a href="/cperl/perllocale.html#Collation-of-strings-containing-embedded-NUL-characters">&quot;Collation of strings containing embedded <code>NUL</code> characters&quot; in perllocale</a>.</p>

<h2 id="Lexical-subroutines-are-no-longer-experimental">Lexical subroutines are no longer experimental</h2>

<p>Using the <code>lexical_subs</code> feature no longer emits a warning. Existing code that disables the <code>experimental::lexical_subs</code> warning category that the feature previously used will continue to work. The <code>lexical_subs</code> feature has no effect; all Perl code can use lexical subroutines, regardless of what feature declarations are in scope.</p>

<h2 id="CORE-subroutines-for-hash-and-array-functions-callable-via-reference"><code>CORE</code> subroutines for hash and array functions callable via reference</h2>

<p>The hash and array functions in the <code>CORE</code> namespace--<code>keys</code>, <code>each</code>, <code>values</code>, <code>push</code>, <code>pop</code>, <code>shift</code>, <code>unshift</code> and <code>splice</code>--, can now be called with ampersand syntax (<code>&amp;CORE::keys(\%hash</code>) and via reference (<code>my $k = \&amp;CORE::keys; $k-&gt;(\%hash)</code>). Previously they could only be used when inlined.</p>

<h2 id="POSIX::tmpnam-has-been-removed">POSIX::tmpnam() has been removed</h2>

<p>The fundamentally unsafe <code>tmpnam()</code> interface was deprecated in Perl 5.22.0 and has now been removed. In its place you can use for example the <a>File::Temp</a> interfaces.</p>

<h2 id="require-::Foo::Bar-is-now-illegal">require ::Foo::Bar is now illegal.</h2>

<p>Formerly, <code>require ::Foo::Bar</code> would try to read <i>/Foo/Bar.pm</i>. Now any bareword require which starts with a double colon dies instead.</p>

<h2 id="Unescaped-literal-characters-in-regular-expression-patterns-are-no-longer-permissible">Unescaped literal <code>&quot;{&quot;</code> characters in regular expression patterns are no longer permissible</h2>

<p>You have to now say something like <code>&quot;\{&quot;</code> or <code>&quot;[{]&quot;</code> to specify to match a LEFT CURLY BRACKET. This will allow future extensions to the language. This restriction is not enforced, nor are there current plans to enforce it, if the <code>&quot;{&quot;</code> is the first character in the pattern.</p>

<p>These have been deprecated since v5.16, with a deprecation message displayed starting in v5.22.</p>

<h2 id="Literal-control-character-variable-names-are-no-longer-permissible">Literal control character variable names are no longer permissible</h2>

<p>A variable name may no longer contain a literal control character under any circumstances. These previously were allowed in single-character names on ASCII platforms, but have been deprecated there since Perl v5.20. This affects things like <code>$<i>\cT</i></code>, where <i>\cT</i> is a literal control (such as a <code>NAK</code> or <code>NEGATIVE ACKNOWLEDGE</code> character) in the source code.</p>

<h2 id="NBSP-is-no-longer-permissible-in-N"><code>NBSP</code> is no longer permissible in <code>\N{...}</code></h2>

<p>The name of a character may no longer contain non-breaking spaces. It has been deprecated to do so since Perl v5.22.</p>

<h1 id="Security">Security</h1>

<h2 id="Remove-current-dir-.-from-INC">Remove current dir (<code>.</code>) from <code>@INC</code></h2>

<p>For security reasons, <code>@INC</code> no longer contains the default directory (<code>.</code>).</p>

<h2 id="Escaped-colons-and-relative-paths-in-PATH">&quot;Escaped&quot; colons and relative paths in PATH</h2>

<p>On Unix systems, Perl treats any relative paths in the PATH environment variable as tainted when starting a new process. Previously, it was allowing a backslash to escape a colon (unlike the OS), consequently allowing relative paths to be considered safe if the PATH was set to something like <code>/\:.</code>. The check has been fixed to treat <code>.</code> as tainted in that example.</p>

<h2 id="Di-switch-is-now-required-for-PerlIO-debugging-output"><code>-Di</code> switch is now required for PerlIO debugging output</h2>

<p>Previously PerlIO debugging output would be sent to the file specified by the <code>PERLIO_DEBUG</code> environment variable if perl wasn&#39;t running setuid and the <code>-T</code> or <code>-t</code> switches hadn&#39;t been parsed yet.</p>

<p>If perl performed output at a point where it hadn&#39;t yet parsed its switches this could result in perl creating or overwriting the file named by <code>PERLIO_DEBUG</code> even when the <code>-T</code> switch had been supplied.</p>

<p>Perl now requires the <code>-Di</code> switch to produce PerlIO debugging output. By default this is written to <code>stderr</code>, but can optionally be redirected to a file by setting the <code>PERLIO_DEBUG</code> environment variable.</p>

<p>If perl is running setuid or the <code>-T</code> switch has supplied <code>PERLIO_DEBUG</code> is ignored and the debugging output is sent to <code>stderr</code> as for any other <code>-D</code> switch.</p>

<h1 id="Incompatible-Changes">Incompatible Changes</h1>

<h2 id="ENCODING-has-been-removed"><code>${^ENCODING}</code> has been removed</h2>

<p>Consequently, the <a>encoding</a> pragma&#39;s default mode is no longer supported. If you still need to write your source code in encodings other than UTF-8, use a source filter such as <a>Filter::Encoding</a> on CPAN or <a>encoding</a>&#39;s <code>Filter</code> option.</p>

<h2 id="scalar-hash-return-signature-changed"><code>scalar(%hash)</code> return signature changed</h2>

<p>The value returned for <code>scalar(%hash)</code> will no longer show information about the buckets allocated in the hash. It will simply return the count of used keys. It is thus equivalent to <code>0+keys(%hash)</code>.</p>

<p>A form of backwards compatibility is provided via <code>Hash::Util::bucket_ratio()</code> which provides the same behavior as <code>scalar(%hash)</code> provided prior to Perl 5.25.</p>

<h2 id="keys-returned-from-an-lvalue-subroutine"><code>keys</code> returned from an lvalue subroutine</h2>

<p><code>keys</code> returned from an lvalue subroutine can no longer be assigned to in list context.</p>

<pre><code>    sub foo : lvalue { keys(%INC) }
    (foo) = 3; # death
    sub bar : lvalue { keys(@_) }
    (bar) = 3; # also an error</code></pre>

<p>This makes the lvalue sub case consistent with <code>(keys %hash) = ...</code> and <code>(keys @_) = ...</code>, which are also errors. [perl #128187]</p>

<h1 id="Deprecations">Deprecations</h1>

<h2 id="String-delimiters-that-arent-stand-alone-graphemes-are-now-deprecated">String delimiters that aren&#39;t stand-alone graphemes are now deprecated</h2>

<p>In order for Perl to eventually allow string delimiters to be Unicode grapheme clusters (which look like a single character, but may be a sequence of several ones), we have to stop allowing a single char delimiter that isn&#39;t a grapheme by itself. These are unlikely to exist in actual code, as they would typically display as attached to the character in front of them.</p>

<h1 id="Performance-Enhancements">Performance Enhancements</h1>

<ul>

<li><p>A hash in boolean context is now sometimes faster, e.g.</p>

<pre><code>    if (!%h) { ... }</code></pre>

<p>This was already special-cased, but some cases were missed, and even the ones which weren&#39;t have been improved.</p>

</li>
<li><p>Several other ops may now also be faster in boolean context.</p>

</li>
<li><p>New Faster Hash Function on 64 bit builds</p>

<p>We use a different hash function for short and long keys. This should improve performance and security, especially for long keys.</p>

</li>
<li><p>readline is faster</p>

<p>Reading from a file line-by-line with <code>readline()</code> or <code>&lt;&gt;</code> should now typically be faster due to a better implementation of the code that searches for the next newline character.</p>

</li>
<li><p>Reduce cost of SvVALID().</p>

</li>
<li><p><code>$ref1 = $ref2</code> has been optimized.</p>

</li>
<li><p>Array and hash assignment are now faster, e.g.</p>

<pre><code>    (..., @a) = (...);
    (..., %h) = (...);</code></pre>

<p>especially when the RHS is empty.</p>

</li>
<li><p>Reduce the number of odd special cases for the <code>SvSCREAM</code> flag.</p>

</li>
<li><p>Avoid sv_catpvn() in do_vop() when unneeded.</p>

</li>
<li><p>Enhancements in Regex concat COW implementation.</p>

</li>
<li><p>Speed up <code>AV</code> and <code>HV</code> clearing/undeffing.</p>

</li>
<li><p>Better optimise array and hash assignment</p>

</li>
<li><p>Converting a single-digit string to a number is now substantially faster.</p>

</li>
<li><p>The internal op implementing the <code>split</code> builtin has been simplified and sped up. Firstly, it no longer requires a subsidiary internal <code>pushre</code> op to do its work. Secondly, code of the form <code>my @x = split(...)</code> is now optimised in the same way as <code>@x = split(...)</code>, and is therefore a few percent faster.</p>

</li>
<li><p>The rather slow implementation for the experimental subroutine signatures feature has been made much faster; it is now comparable in speed with the old-style <code>my ($a, $b, @c) = @_</code>.</p>

</li>
<li><p>Bareword constant strings are now permitted to take part in constant folding. They were originally exempted from constant folding in August 1999, during the development of Perl 5.6, to ensure that <code>use strict &quot;subs&quot;</code> would still apply to bareword constants. That has now been accomplished a different way, so barewords, like other constants, now gain the performance benefits of constant folding.</p>

<p>This also means that void-context warnings on constant expressions of barewords now report the folded constant operand, rather than the operation; this matches the behaviour for non-bareword constants.</p>

</li>
</ul>

<h1 id="Modules-and-Pragmata">Modules and Pragmata</h1>

<h2 id="Updated-Modules-and-Pragmata">Updated Modules and Pragmata</h2>

<ul>

<li><p><a>Archive::Tar</a> has been upgraded from version 2.04 to 2.24.</p>

</li>
<li><p><a>arybase</a> has been upgraded from version 0.11 to 0.12.</p>

</li>
<li><p><a>attributes</a> has been upgraded from version 0.27 to 0.29.</p>

<p>The deprecation message for the <code>:unique</code> and <code>:locked</code> attributes now mention they will disappear in Perl 5.28.</p>

</li>
<li><p><a>B</a> has been upgraded from version 1.62 to 1.68.</p>

</li>
<li><p><a>B::Concise</a> has been upgraded from version 0.996 to 0.999.</p>

<p>Its output is now more descriptive for <code>op_private</code> flags.</p>

</li>
<li><p><a>B::Debug</a> has been upgraded from version 1.23 to 1.24.</p>

</li>
<li><p><a>B::Deparse</a> has been upgraded from version 1.37 to 1.40.</p>

</li>
<li><p><a>B::Xref</a> has been upgraded from version 1.05 to 1.06.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>base</a> has been upgraded from version 2.23 to 2.25.</p>

</li>
<li><p><a>bignum</a> has been upgraded from version 0.42 to 0.47.</p>

</li>
<li><p><a>Carp</a> has been upgraded from version 1.40 to 1.42.</p>

</li>
<li><p><a>charnames</a> has been upgraded from version 1.43 to 1.44.</p>

</li>
<li><p><a>Compress::Raw::Bzip2</a> has been upgraded from version 2.069 to 2.074.</p>

</li>
<li><p><a>Compress::Raw::Zlib</a> has been upgraded from version 2.069 to 2.074.</p>

</li>
<li><p><a>Config::Perl::V</a> has been upgraded from version 0.25 to 0.28.</p>

</li>
<li><p><a>CPAN</a> has been upgraded from version 2.11 to 2.18.</p>

</li>
<li><p><a>CPAN::Meta</a> has been upgraded from version 2.150005 to 2.150010.</p>

</li>
<li><p><a>Data::Dumper</a> has been upgraded from version 2.160 to 2.167.</p>

<p>The XS implementation now supports Deparse.</p>

<p>This fixes a stack management bug. [perl #130487].</p>

</li>
<li><p><a>DB_File</a> has been upgraded from version 1.835 to 1.840.</p>

</li>
<li><p><a>Devel::Peek</a> has been upgraded from version 1.23 to 1.26.</p>

</li>
<li><p><a>Devel::PPPort</a> has been upgraded from version 3.32 to 3.35.</p>

</li>
<li><p><a>Devel::SelfStubber</a> has been upgraded from version 1.05 to 1.06.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>diagnostics</a> has been upgraded from version 1.34 to 1.36.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>Digest</a> has been upgraded from version 1.17 to 1.17_01.</p>

</li>
<li><p><a>Digest::MD5</a> has been upgraded from version 2.54 to 2.55.</p>

</li>
<li><p><a>Digest::SHA</a> has been upgraded from version 5.95 to 5.96.</p>

</li>
<li><p><a>DynaLoader</a> has been upgraded from version 1.38 to 1.42.</p>

</li>
<li><p><a>Encode</a> has been upgraded from version 2.80 to 2.88.</p>

</li>
<li><p><a>encoding</a> has been upgraded from version 2.17 to 2.19.</p>

<p>This module&#39;s default mode is no longer supported as of Perl 5.25.3. It now dies when imported, unless the <code>Filter</code> option is being used.</p>

</li>
<li><p><a>encoding::warnings</a> has been upgraded from version 0.12 to 0.13.</p>

<p>This module is no longer supported as of Perl 5.25.3. It emits a warning to that effect and then does nothing.</p>

</li>
<li><p><a>Errno</a> has been upgraded from version 1.25 to 1.28.</p>

<p>Document that using <code>%!</code> loads Errno for you.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>ExtUtils::Embed</a> has been upgraded from version 1.33 to 1.34.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>ExtUtils::MakeMaker</a> has been upgraded from version 7.10_01 to 7.24.</p>

</li>
<li><p><a>ExtUtils::Miniperl</a> has been upgraded from version 1.05 to 1.06.</p>

</li>
<li><p><a>ExtUtils::ParseXS</a> has been upgraded from version 3.31 to 3.34.</p>

</li>
<li><p><a>ExtUtils::Typemaps</a> has been upgraded from version 3.31 to 3.34.</p>

</li>
<li><p><a>feature</a> has been upgraded from version 1.42 to 1.47.</p>

<p>Fixes the Unicode Bug in the range operator.</p>

</li>
<li><p><a>File::Copy</a> has been upgraded from version 2.31 to 2.32.</p>

</li>
<li><p><a>File::Fetch</a> has been upgraded from version 0.48 to 0.52.</p>

</li>
<li><p><a>File::Glob</a> has been upgraded from version 1.26 to 1.28.</p>

<p>Issue a deprecation message for <code>File::Glob::glob()</code>.</p>

</li>
<li><p><a>File::Spec</a> has been upgraded from version 3.63 to 3.67.</p>

</li>
<li><p><a>FileHandle</a> has been upgraded from version 2.02 to 2.03.</p>

</li>
<li><p><a>Filter::Simple</a> has been upgraded from version 0.92 to 0.93.</p>

<p>It no longer treats <code>no MyFilter</code> immediately following <code>use MyFilter</code> as end-of-file. [perl #107726]</p>

</li>
<li><p><a>Getopt::Long</a> has been upgraded from version 2.48 to 2.49.</p>

</li>
<li><p><a>Getopt::Std</a> has been upgraded from version 1.11 to 1.12.</p>

</li>
<li><p><a>Hash::Util</a> has been upgraded from version 0.19 to 0.22.</p>

</li>
<li><p><a>HTTP::Tiny</a> has been upgraded from version 0.056 to 0.070.</p>

<p>Internal 599-series errors now include the redirect history.</p>

</li>
<li><p><a>I18N::LangTags</a> has been upgraded from version 0.40 to 0.42.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>IO</a> has been upgraded from version 1.36 to 1.38.</p>

</li>
<li><p>IO-Compress has been upgraded from version 2.069 to 2.074.</p>

</li>
<li><p><a>IO::Socket::IP</a> has been upgraded from version 0.37 to 0.38.</p>

</li>
<li><p><a>IPC::Cmd</a> has been upgraded from version 0.92 to 0.96.</p>

</li>
<li><p><a>IPC::SysV</a> has been upgraded from version 2.06_01 to 2.07.</p>

</li>
<li><p><a>JSON::PP</a> has been upgraded from version 2.27300 to 2.27400_02.</p>

</li>
<li><p><a>lib</a> has been upgraded from version 0.63 to 0.64.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>List::Util</a> has been upgraded from version 1.42_02 to 1.46_02.</p>

</li>
<li><p><a>Locale::Codes</a> has been upgraded from version 3.37 to 3.42.</p>

</li>
<li><p><a>Locale::Maketext</a> has been upgraded from version 1.26 to 1.28.</p>

</li>
<li><p><a>Locale::Maketext::Simple</a> has been upgraded from version 0.21 to 0.21_01.</p>

</li>
<li><p><a>Math::BigInt</a> has been upgraded from version 1.999715 to 1.999806.</p>

<p>There have also been some core customizations.</p>

</li>
<li><p><a>Math::BigInt::FastCalc</a> has been upgraded from version 0.40 to 0.5005.</p>

</li>
<li><p><a>Math::BigRat</a> has been upgraded from version 0.260802 to 0.2611.</p>

</li>
<li><p><a>Math::Complex</a> has been upgraded from version 1.59 to 1.5901.</p>

</li>
<li><p><a>Memoize</a> has been upgraded from version 1.03 to 1.03_01.</p>

</li>
<li><p><a>Module::CoreList</a> has been upgraded from version 5.20170420 to 5.20170520.</p>

</li>
<li><p><a>Module::Load::Conditional</a> has been upgraded from version 0.64 to 0.68.</p>

</li>
<li><p><a>Module::Metadata</a> has been upgraded from version 1.000031 to 1.000033.</p>

</li>
<li><p><a>mro</a> has been upgraded from version 1.18 to 1.20.</p>

</li>
<li><p><a>Net::Ping</a> has been upgraded from version 2.43 to 2.55.</p>

<p>IPv6 addresses and <code>AF_INET6</code> sockets are now supported, along with several other enhancements.</p>

<p>Remove sudo from 500_ping_icmp.t.</p>

<p>Avoid stderr noise in tests</p>

<p>Check for echo in new Net::Ping tests.</p>

</li>
<li><p><a>NEXT</a> has been upgraded from version 0.65 to 0.67.</p>

</li>
<li><p><a>Opcode</a> has been upgraded from version 1.34 to 1.39.</p>

</li>
<li><p><a>open</a> has been upgraded from version 1.10 to 1.11.</p>

</li>
<li><p><a>OS2::Process</a> has been upgraded from version 1.11 to 1.12.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>overload</a> has been upgraded from version 1.26 to 1.28.</p>

<p>Its compilation speed has been improved slightly.</p>

</li>
<li><p><a>parent</a> has been upgraded from version 0.234 to 0.236.</p>

</li>
<li><p><a>perl5db.pl</a> has been upgraded from version 1.50 to 1.51.</p>

<p>Ignore <i>/dev/tty</i> on non-Unix systems. [perl #113960]</p>

</li>
<li><p><a>Perl::OSType</a> has been upgraded from version 1.009 to 1.010.</p>

</li>
<li><p><a>perlfaq</a> has been upgraded from version 5.021010 to 5.021011.</p>

</li>
<li><p><a>PerlIO</a> has been upgraded from version 1.09 to 1.10.</p>

</li>
<li><p><a>PerlIO::encoding</a> has been upgraded from version 0.24 to 0.25.</p>

</li>
<li><p><a>PerlIO::scalar</a> has been upgraded from version 0.24 to 0.26.</p>

</li>
<li><p><a>Pod::Checker</a> has been upgraded from version 1.60 to 1.73.</p>

</li>
<li><p><a>Pod::Functions</a> has been upgraded from version 1.10 to 1.11.</p>

</li>
<li><p><a>Pod::Html</a> has been upgraded from version 1.22 to 1.2202.</p>

</li>
<li><p><a>Pod::Perldoc</a> has been upgraded from version 3.25_02 to 3.28.</p>

</li>
<li><p><a>Pod::Simple</a> has been upgraded from version 3.32 to 3.35.</p>

</li>
<li><p><a>Pod::Usage</a> has been upgraded from version 1.68 to 1.69.</p>

</li>
<li><p><a>POSIX</a> has been upgraded from version 1.65 to 1.76. This remedies several defects in making its symbols exportable. [perl #127821] The <code>POSIX::tmpnam()</code> interface has been removed, see <a href="#POSIX::tmpnam-has-been-removed">&quot;POSIX::tmpnam() has been removed&quot;</a>. Trying to import POSIX subs that have no real implementations (like <code>POSIX::atend()</code>) now fails at import time, instead of waiting until runtime.</p>

</li>
<li><p><a>re</a> has been upgraded from version 0.32 to 0.34</p>

<p>This adds support for the new <a href="/cperl/perlre.html#x-and-xx"><code>/xx</code></a> regular expression pattern modifier, and a change to the <a><span style="white-space: nowrap;"><code>use re &#39;strict&#39;</code></span></a> experimental feature. When <span style="white-space: nowrap;"><code>re &#39;strict&#39;</code></span> is enabled, a warning now will be generated for all unescaped uses of the two characters <code>}</code> and <code>]</code> in regular expression patterns (outside bracketed character classes) that are taken literally. This brings them more in line with the <code>)</code> character which is always a metacharacter unless escaped. Being a metacharacter only sometimes, depending on action at a distance, can lead to silently having the pattern mean something quite different than was intended, which the <span style="white-space: nowrap;"><code>re &#39;strict&#39;</code></span> mode is intended to minimize.</p>

</li>
<li><p><a>Safe</a> has been upgraded from version 2.39 to 2.40.</p>

</li>
<li><p><a>Scalar::Util</a> has been upgraded from version 1.42_02 to 1.46_02.</p>

</li>
<li><p><a>Storable</a> has been upgraded from version 2.56 to 2.62.</p>

<p>Fixes [perl #130098].</p>

</li>
<li><p><a>Symbol</a> has been upgraded from version 1.07 to 1.08.</p>

</li>
<li><p><a>Sys::Syslog</a> has been upgraded from version 0.33 to 0.35.</p>

</li>
<li><p><a>Term::ANSIColor</a> has been upgraded from version 4.04 to 4.06.</p>

</li>
<li><p><a>Term::ReadLine</a> has been upgraded from version 1.15 to 1.16.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>Test</a> has been upgraded from version 1.28 to 1.30.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>Test::Harness</a> has been upgraded from version 3.36 to 3.38.</p>

</li>
<li><p><a>Test::Simple</a> has been upgraded from version 1.001014 to 1.302073.</p>

</li>
<li><p><a>Thread::Queue</a> has been upgraded from version 3.09 to 3.12.</p>

</li>
<li><p><a>Thread::Semaphore</a> has been upgraded from 2.12 to 2.13.</p>

<p>Added the <code>down_timed</code> method.</p>

</li>
<li><p><a>threads</a> has been upgraded from version 2.07 to 2.15.</p>

<p>Compatibility with 5.8 has been restored.</p>

<p>Fixes [perl #130469].</p>

</li>
<li><p><a>threads::shared</a> has been upgraded from version 1.51 to 1.56.</p>

<p>This fixes [cpan #119529], [perl #130457]</p>

</li>
<li><p><a>Tie::Hash::NamedCapture</a> has been upgraded from version 0.09 to 0.10.</p>

</li>
<li><p><a>Time::HiRes</a> has been upgraded from version 1.9733 to 1.9741.</p>

<p>It now builds on systems with C++11 compilers (such as G++ 6 and Clang++ 3.9).</p>

<p>Now uses <code>clockid_t</code>.</p>

</li>
<li><p><a>Time::Local</a> has been upgraded from version 1.2300 to 1.25.</p>

</li>
<li><p><a>Unicode::Collate</a> has been upgraded from version 1.14 to 1.19.</p>

</li>
<li><p><a>Unicode::UCD</a> has been upgraded from version 0.64 to 0.68.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>version</a> has been upgraded from version 0.9916 to 0.9917.</p>

</li>
<li><p><a>VMS::DCLsym</a> has been upgraded from version 1.06 to 1.08.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
<li><p><a>warnings</a> has been upgraded from version 1.36 to 1.37.</p>

</li>
<li><p><a>XS::Typemap</a> has been upgraded from version 0.14 to 0.15.</p>

</li>
<li><p><a>XSLoader</a> has been upgraded from version 0.21 to 0.27.</p>

<p>Fixed a security hole in which binary files could be loaded from a path outside of <a href="/cperl/perlvar.html#INC"><code>@INC</code></a>.</p>

<p>It now uses 3-arg <code>open()</code> instead of 2-arg <code>open()</code>. [perl #130122]</p>

</li>
</ul>

<h1 id="Documentation">Documentation</h1>

<h2 id="New-Documentation">New Documentation</h2>

<h3 id="perldeprecation"><a href="/cperl/perldeprecation.html">perldeprecation</a></h3>

<p>This file documents all upcoming deprecations, and some of the deprecations which already have been removed. The purpose of this documentation is two-fold: document what will disappear, and by which version, and serve as a guide for people dealing with code which has features that no longer work after an upgrade of their perl.</p>

<h2 id="Changes-to-Existing-Documentation">Changes to Existing Documentation</h2>

<h3 id="perlcall"><a href="/cperl/perlcall.html">perlcall</a></h3>

<ul>

<li><p>Use of unassigned code point or non-standalone grapheme for a delimiter will be a fatal error starting in Perl 5.30</p>

<p>This was changed to drop a leading <code>v</code> in <code>v5.30</code>, so it uses the same style as other deprecation messages.</p>

</li>
<li><p>&quot;\c%c&quot; is more clearly written simply as &quot;%s&quot;.</p>

<p>It was decided to undeprecate the use of <code>\c%c</code>, see <a href="http://www.nntp.perl.org/group/perl.perl5.porters/2017/02/msg242944.html">http://www.nntp.perl.org/group/perl.perl5.porters/2017/02/msg242944.html</a></p>

</li>
<li><p>Removed redundant <code>dSP</code> from an example.</p>

</li>
</ul>

<h3 id="perlcommunity"><a href="/cperl/perlcommunity.html">perlcommunity</a></h3>

<ul>

<li><p>All references to Usenet have been removed.</p>

</li>
</ul>

<h3 id="perldata"><a href="/cperl/perldata.html">perldata</a></h3>

<ul>

<li><p>Updated documentation of <code>scalar(%hash)</code>. See <a href="#scalar-hash-return-signature-changed">&quot;scalar(%hash) return signature changed&quot;</a> above.</p>

</li>
<li><p>Use of single character variables, with the variable name a non printable character in the range <code>\x80</code>-<code>\xFF</code> is no longer allowed. Update the docs to reflect this.</p>

</li>
</ul>

<h3 id="perldelta"><a href="/cperl/perldelta.html">perldelta</a></h3>

<ul>

<li><p>All references to Usenet have been removed.</p>

</li>
</ul>

<h3 id="perldiag"><a href="/cperl/perldiag.html">perldiag</a></h3>

<ul>

<li><p>Deprecations are to be marked with a D. <code>&quot;%s() is deprecated on :utf8 handles&quot;</code> use a deprecation message, and as such, such be marked <code>&quot;(D deprecated)&quot;</code> and not <code>&quot;(W deprecated)&quot;</code>.</p>

</li>
</ul>

<h3 id="perlexperiment"><a href="/cperl/perlexperiment.html">perlexperiment</a></h3>

<ul>

<li><p>Documented new feature: See <a href="#Declaring-a-reference-to-a-variable">&quot;Declaring a reference to a variable&quot;</a> above.</p>

</li>
</ul>

<h3 id="perlfunc"><a href="/cperl/perlfunc.html">perlfunc</a></h3>

<ul>

<li><p>Defined on aggregates is no longer allowed. Perlfunc was still reporting it as deprecated, and that it will be deleted in the future.</p>

</li>
<li><p>Clarified documentation of <a href="/cperl/perlfunc.html#seek"><code>seek()</code></a>, <a href="/cperl/perlfunc.html#tell"><code>tell()</code></a> and <a href="/cperl/perlfunc.html#sysseek"><code>sysseek()</code></a>. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128607">[perl #128607]</a></p>

</li>
<li><p>Removed obsolete documentation of <a href="/cperl/perlfunc.html#study"><code>study()</code></a>.</p>

</li>
</ul>

<h3 id="perlguts"><a href="/cperl/perlguts.html">perlguts</a></h3>

<ul>

<li><p>Add <code>pTHX_</code> to magic method examples.</p>

</li>
</ul>

<h3 id="perlhack"><a href="/cperl/perlhack.html">perlhack</a></h3>

<ul>

<li><p>Document Tab VS Space.</p>

</li>
</ul>

<h3 id="perlinterp"><a href="/cperl/perlinterp.html">perlinterp</a></h3>

<ul>

<li><p><a href="/cperl/perlinterp.html">perlinterp</a> has been expanded to give a more detailed example of how to hunt around in the parser for how a given operator is handled.</p>

</li>
</ul>

<h3 id="perllocale"><a href="/cperl/perllocale.html">perllocale</a></h3>

<ul>

<li><p>Document <code>NUL</code> collation handling.</p>

</li>
<li><p>Some locales aren&#39;t compatible with Perl. Note the potential bad consequences of using them.</p>

</li>
</ul>

<h3 id="perlmodinstall"><a href="/cperl/perlmodinstall.html">perlmodinstall</a></h3>

<ul>

<li><p>All references to Usenet have been removed.</p>

</li>
</ul>

<h3 id="perlmodlib"><a href="/cperl/perlmodlib.html">perlmodlib</a></h3>

<ul>

<li><p>Updated the mirror list.</p>

</li>
<li><p>All references to Usenet have been removed.</p>

</li>
</ul>

<h3 id="perlnewmod"><a href="/cperl/perlnewmod.html">perlnewmod</a></h3>

<ul>

<li><p>All references to Usenet have been removed.</p>

</li>
</ul>

<h3 id="perlobj"><a href="/cperl/perlobj.html">perlobj</a></h3>

<ul>

<li><p>Added a section on calling methods using their fully qualified names.</p>

</li>
<li><p>Do not discourage manual @ISA.</p>

</li>
</ul>

<h3 id="perlootut"><a href="/cperl/perlootut.html">perlootut</a></h3>

<ul>

<li><p>Tidy the document.</p>

</li>
<li><p>Mention <code>Moo</code> more.</p>

</li>
</ul>

<h3 id="perlop"><a href="/cperl/perlop.html">perlop</a></h3>

<ul>

<li><p>Clarify behavior single quote regexps.</p>

</li>
</ul>

<h3 id="perlre"><a href="/cperl/perlre.html">perlre</a></h3>

<ul>

<li><p>Several minor enhancements to the documentation.</p>

</li>
</ul>

<h3 id="perlsec"><a href="/cperl/perlsec.html">perlsec</a></h3>

<ul>

<li><p>Fixed link to Crosby paper on hash complexity attack.</p>

</li>
</ul>

<h3 id="perlref"><a href="/cperl/perlref.html">perlref</a></h3>

<ul>

<li><p>Documented new feature: See <a href="#Declaring-a-reference-to-a-variable">&quot;Declaring a reference to a variable&quot;</a> above.</p>

</li>
</ul>

<h3 id="perltie"><a href="/cperl/perltie.html">perltie</a></h3>

<ul>

<li><p>Updated documentation of <code>scalar(%hash)</code>. See <a href="#scalar-hash-return-signature-changed">&quot;scalar(%hash) return signature changed&quot;</a> above.</p>

</li>
</ul>

<h3 id="perlunicode"><a href="/cperl/perlunicode.html">perlunicode</a></h3>

<ul>

<li><p>Documented change to <code>\p{<i>script</i>}</code> to now use the improved Script_Extensions property. See <a href="#Use-of-p-script-uses-the-improved-Script_Extensions-property">&quot;Use of \p{script} uses the improved Script_Extensions property&quot;</a> above.</p>

</li>
<li><p>Updated the text to correspond with changes in Unicode UTS#18, concerning regular expressions, and Perl compatibility with what it says.</p>

</li>
</ul>

<h3 id="perlvar"><a href="/cperl/perlvar.html">perlvar</a></h3>

<ul>

<li><p>Removed obsolete documentation of <code>${^ENCODING}</code>. See <a href="#ENCODING-has-been-removed">&quot;${^ENCODING} has been removed&quot;</a> above.</p>

</li>
<li><p>Document <code>@ISA</code>. Was documented other places, not not in <a href="/cperl/perlvar.html">perlvar</a>.</p>

</li>
</ul>

<h1 id="Diagnostics">Diagnostics</h1>

<h2 id="New-Diagnostics">New Diagnostics</h2>

<h3 id="New-Errors">New Errors</h3>

<ul>

<li><p>Since <code>.</code> is now removed from <code>@INC</code> by default, <code>do</code> will now trigger a warning recommending to fix the <code>do</code> statement:</p>

<p><a href="/cperl/perldiag.html#do-s-failed-.-is-no-longer-in-INC-did-you-mean-do-.-s">do &quot;%s&quot; failed, &#39;.&#39; is no longer in @INC</a></p>

</li>
<li><p>Using the empty pattern (which re-executes the last successfully-matched pattern) inside a code block in another regex, as in <code>/(?{ s!!new! })/</code>, has always previously yielded a segfault. It now produces an error: <a href="/cperl/perldiag.html#Infinite-recursion-in-regex">Infinite recursion in regex</a>.</p>

</li>
<li><p><a href="/cperl/perldiag.html#The-experimental-declared_refs-feature-is-not-enabled">The experimental declared_refs feature is not enabled</a></p>

<p>(F) To declare references to variables, as in <code>my \%x</code>, you must first enable the feature:</p>

<pre><code>    no warnings &quot;experimental::declared_refs&quot;;
    use feature &quot;declared_refs&quot;;</code></pre>

</li>
<li><p><a href="/cperl/perldiag.html#Version-control-conflict-marker">Version control conflict marker</a></p>

<p>(F) The parser found a line starting with <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>, or <code>=======</code>. These may be left by a version control system to mark conflicts after a failed merge operation.</p>

</li>
<li><p><a href="/cperl/perldiag.html#s:-command-not-found">%s: command not found</a></p>

<p>(A) You&#39;ve accidentally run your script through <b>bash</b> or another shell instead of Perl. Check the #! line, or manually feed your script into Perl yourself. The #! line at the top of your file could look like:</p>

<pre><code>  #!/usr/bin/perl</code></pre>

</li>
<li><p><a href="/cperl/perldiag.html#s:-command-not-found:-s">%s: command not found: %s</a></p>

<p>(A) You&#39;ve accidentally run your script through <b>zsh</b> or another shell instead of Perl. Check the #! line, or manually feed your script into Perl yourself. The #! line at the top of your file could look like:</p>

<pre><code>  #!/usr/bin/perl</code></pre>

</li>
<li><p><a href="/cperl/perldiag.html#Unescaped-left-brace-in-regex-is-deprecated-here-and-will-be-fatal-in-Perl-5.30-passed-through-in-regex-marked-by----HERE-in-m-s">Unescaped left brace in regex is deprecated here (and will be fatal in Perl 5.30), passed through in regex; marked by <span style="white-space: nowrap;">&lt;-- HERE</span> in m/%s/</a></p>

<p>Unescaped left braces are already illegal in some contexts in regular expression patterns, but, due to an oversight, no deprecation warning was raised in other contexts where they are intended to become illegal. This warning is now raised in these contexts.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Bareword-in-require-contains-s">Bareword in require contains &quot;%s&quot;</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Bareword-in-require-maps-to-empty-filename">Bareword in require maps to empty filename</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Bareword-in-require-maps-to-disallowed-filename-s">Bareword in require maps to disallowed filename &quot;%s&quot;</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Bareword-in-require-must-not-start-with-a-double-colon:-s">Bareword in require must not start with a double-colon: &quot;%s&quot;</a></p>

</li>
</ul>

<h3 id="New-Warnings">New Warnings</h3>

<ul>

<li><p><a href="/cperl/perldiag.html#Use-of-unassigned-code-point-or-non-standalone-grapheme-for-a-delimiter-will-be-a-fatal-error-starting-in-Perl-5.30">Use of unassigned code point or non-standalone grapheme for a delimiter will be a fatal error starting in Perl 5.30</a></p>

<p>See <a href="#Deprecations">&quot;Deprecations&quot;</a></p>

</li>
<li><p><a href="/cperl/perldiag.html#Declaring-references-is-experimental">Declaring references is experimental</a></p>

<p>(S experimental::declared_refs) This warning is emitted if you use a reference constructor on the right-hand side of <code>my()</code>, <code>state()</code>, <code>our()</code>, or <code>local()</code>. Simply suppress the warning if you want to use the feature, but know that in doing so you are taking the risk of using an experimental feature which may change or be removed in a future Perl version:</p>

<pre><code>    no warnings &quot;experimental::declared_refs&quot;;
    use feature &quot;declared_refs&quot;;
    $fooref = my \$foo;</code></pre>

</li>
<li><p><a href="/cperl/perldiag.html#ENCODING-is-no-longer-supported.-Its-use-will-be-fatal-in-Perl-5.28"><code>${^ENCODING}</code> is no longer supported. Its use will be fatal in Perl 5.28</a></p>

<p>(D deprecated) The special variable <code>${^ENCODING}</code>, formerly used to implement the <code>encoding</code> pragma, is no longer supported as of Perl 5.26.0.</p>

</li>
</ul>

<h2 id="Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</h2>

<ul>

<li><p>When a <code>require</code> fails, we now do not provide <code>@INC</code> when the <code>require</code> is for a file instead of a module.</p>

</li>
<li><p>When <code>@INC</code> is not scanned for a <code>require</code> call, we no longer display <code>@INC</code> to avoid confusion.</p>

</li>
<li><p>Attribute &quot;locked&quot; is deprecated, and will disappear in Perl 5.28</p>

</li>
<li><p>Attribute &quot;unique&quot; is deprecated, and will disappear in Perl 5.28</p>

</li>
<li><p>Constants from lexical variables potentially modified elsewhere are deprecated. This will not be allowed in Perl 5.32</p>

</li>
<li><p>Deprecated use of my() in false conditional. This will be a fatal error in Perl 5.30</p>

</li>
<li><p>dump() better written as CORE::dump(). dump() will no longer be available in Perl 5.30</p>

</li>
<li><p>${^ENCODING} is no longer supported. Its use will be fatal in Perl 5.28</p>

</li>
<li><p>File::Glob::glob() will disappear in perl 5.30. Use File::Glob::bsd_glob() instead.</p>

</li>
<li><p>%s() is deprecated on :utf8 handles. This will be a fatal error in Perl 5.30</p>

</li>
<li><p>$* is no longer supported. Its use will be fatal in Perl 5.30</p>

</li>
<li><p>$* is no longer supported. Its use will be fatal in Perl 5.30</p>

</li>
<li><p>Opening dirhandle %s also as a file. This will be a fatal error in Perl 5.28</p>

</li>
<li><p>Opening filehandle %s also as a directory. This will be a fatal error in Perl 5.28</p>

</li>
<li><p>Setting $/ to a reference to %s as a form of slurp is deprecated, treating as undef. This will be fatal in Perl 5.28</p>

</li>
<li><p>Unescaped left brace in regex is deprecated here (and will be fatal in Perl 5.30), passed through in regex; marked by <span style="white-space: nowrap;">&lt;-- HERE</span> in m/%s/</p>

</li>
<li><p>Unknown charname &#39;&#39; is deprecated. Its use will be fatal in Perl 5.28</p>

</li>
<li><p>Use of bare &lt;&lt; to mean &lt;&lt;&quot;&quot; is deprecated. Its use will be fatal in Perl 5.28</p>

</li>
<li><p>Use of code point 0x%s is deprecated; the permissible max is 0x%s. This will be fatal in Perl 5.28</p>

</li>
<li><p>Use of comma-less variable list is deprecated. Its use will be fatal in Perl 5.28</p>

</li>
<li><p>Use of inherited AUTOLOAD for non-method %s() is deprecated. This will be fatal in Perl 5.28</p>

</li>
<li><p>Use of strings with code points over 0xFF as arguments to %s operator is deprecated. This will be a fatal error in Perl 5.28</p>

</li>
<li><p>Improve error for missing tie() package/method. This brings the error messages in line with the ones used for normal method calls, despite not using call_method().</p>

</li>
<li><p>Make the sysread()/syswrite/() etc :utf8 handle warnings default. These warnings were under &#39;deprecated&#39; previously.</p>

</li>
<li><p>&#39;do&#39; errors now refer to &#39;do&#39; (not &#39;require&#39;).</p>

</li>
<li><p>Details as to the exact problem have been added to the diagnostics that occur when malformed UTF-8 is encountered when trying to convert to a code point.</p>

</li>
<li><p>Executing <code>undef $x</code> where <code>$x</code> is tied or magical no longer incorrectly blames the variable for an uninitialized-value warning encountered by the tied/magical code.</p>

</li>
<li><p><a href="/cperl/perldiag.html#Unescaped-left-brace-in-regex-is-illegal-here-in-regex-marked-by----HERE-in-m-s">Unescaped left brace in regex is illegal here in regex; marked by <span style="white-space: nowrap;">&lt;-- HERE</span> in m/%s/</a></p>

<p>The word &quot;here&quot; has been added to the message that was raised in v5.25.1. This is to indicate that there are contexts in which unescaped left braces are not (yet) illegal.</p>

</li>
<li><p>Code like <code>$x = $x . &quot;a&quot;</code> was incorrectly failing to yield a <a href="/cperl/perldiag.html#Use-of-uninitialized-value-s">use of uninitialized value</a> warning when <code>$x</code> was a lexical variable with an undefined value. That has now been fixed. [perl #127877]</p>

</li>
<li><p>When the error &quot;Experimental push on scalar is now forbidden&quot; is raised for the hash functions <code>keys</code>, <code>each</code>, and <code>values</code>, it is now followed by the more helpful message, &quot;Type of arg 1 to whatever must be hash or array&quot;. [perl #127976]</p>

</li>
<li><p><code>undef *_; shift</code> or <code>undef *_; pop</code> inside a subroutine, with no argument to <code>shift</code> or <code>pop</code>, began crashing in Perl 5.14.0, but has now been fixed.</p>

</li>
<li><p><code>&quot;string$scalar-&gt;$*&quot;</code> now correctly prefers concat overloading to string overloading if <code>$scalar-&gt;$*</code> returns an overloaded object, bringing it into consistency with <code>$$scalar</code>.</p>

</li>
<li><p><code>/@0{0*-&gt;@*/*0</code> and similar contortions used to crash, but no longer do, but merely produce a syntax error. [perl #128171]</p>

</li>
<li><p><code>do</code> or <code>require</code> with a reference or typeglob which, when stringified, contains a null character started crashing in Perl 5.20.0, but has now been fixed. [perl #128182]</p>

</li>
</ul>

<h1 id="Utility-Changes">Utility Changes</h1>

<h2 id="c2ph-and-pstruct"><i>c2ph</i> and <i>pstruct</i></h2>

<ul>

<li><p>These old utilities have long since superceded by <a>h2xs</a>, and are now gone from the distribution.</p>

</li>
</ul>

<h2 id="Porting-pod_lib.pl"><i>Porting/pod_lib.pl</i></h2>

<ul>

<li><p>Removed spurious executable bit.</p>

</li>
<li><p>Account for possibility of DOS file endings.</p>

</li>
</ul>

<h2 id="Porting-sync-with-cpan"><i>Porting/sync-with-cpan</i></h2>

<ul>

<li><p>Many improvements</p>

</li>
</ul>

<h2 id="perf-benchmarks"><i>perf/benchmarks</i></h2>

<ul>

<li><p>Tidy file, rename some symbols.</p>

</li>
</ul>

<h2 id="Porting-checkAUTHORS.pl"><i>Porting/checkAUTHORS.pl</i></h2>

<ul>

<li><p>Replace obscure character range with \w.</p>

</li>
</ul>

<h2 id="t-porting-regen.t"><i>t/porting/regen.t</i></h2>

<ul>

<li><p>try to be more helpful when tests fail.</p>

</li>
</ul>

<h2 id="utils-h2xs.PL"><i>utils/h2xs.PL</i></h2>

<ul>

<li><p>Avoid infinite loop for enums.</p>

</li>
</ul>

<h2 id="perlbug"><a>perlbug</a></h2>

<ul>

<li><p>Long lines in the message body are now wrapped at 900 characters, to stay well within the 1000-character limit imposed by SMTP mail transfer agents. This is particularly likely to be important for the list of arguments to <code>Configure</code>, which can readily exceed the limit if, for example, it names several non-default installation paths. This change also adds the first unit tests for perlbug. [perl #128020]</p>

</li>
</ul>

<h1 id="Configuration-and-Compilation">Configuration and Compilation</h1>

<ul>

<li><p><code>DEFAULT_INC_EXCLUDES_DOT</code> has been turned on as default.</p>

</li>
<li><p>The <code>dtrace</code> build process has further changes:</p>

<ul>

<li><p>If the <code>-xnolibs</code> is available, use that so a <i>dtrace</i> perl can be built within a FreeBSD jail.</p>

</li>
<li><p>On systems that build a dtrace object file (FreeBSD, Solaris and SystemTap&#39;s dtrace emulation), copy the input objects to a separate directory and process them there, and use those objects in the link, since <code>dtrace -G</code> also modifies these objects.</p>

</li>
<li><p>Add libelf to the build on FreeBSD 10.x, since dtrace adds references to libelf symbols.</p>

</li>
<li><p>Generate a dummy dtrace_main.o if <code>dtrace -G</code> fails to build it. A default build on Solaris generates probes from the unused inline functions, while they don&#39;t on FreeBSD, which causes <code>dtrace -G</code> to fail.</p>

</li>
</ul>

<p>[perl #130108]</p>

</li>
<li><p>You can now disable perl&#39;s use of the PERL_HASH_SEED and PERL_PERTURB_KEYS environment variables by configuring perl with <code>-Accflags=NO_PERL_HASH_ENV</code>.</p>

</li>
<li><p>You can now disable perl&#39;s use of the PERL_HASH_SEED_DEBUG environment variable by configuring perl with <code>-Accflags=-DNO_PERL_HASH_SEED_DEBUG</code>.</p>

</li>
<li><p>Zero out the alignment bytes when calculating the bytes for 80-bit <code>NaN</code> and <code>Inf</code> to make builds more reproducible. [perl #130133]</p>

</li>
<li><p>Since 5.18 for testing purposes we have included support for building perl with a variety of non-standard, and non-recommended hash functions. Since we do not recommend the use of these functions we have removed them and their corresponding build options. Specifically this includes the following build options:</p>

<pre><code>    PERL_HASH_FUNC_SDBM
    PERL_HASH_FUNC_DJB2
    PERL_HASH_FUNC_SUPERFAST
    PERL_HASH_FUNC_MURMUR3
    PERL_HASH_FUNC_ONE_AT_A_TIME
    PERL_HASH_FUNC_ONE_AT_A_TIME_OLD
    PERL_HASH_FUNC_MURMUR_HASH_64A
    PERL_HASH_FUNC_MURMUR_HASH_64B</code></pre>

</li>
<li><p>Remove &quot;Warning: perl appears in your path&quot;</p>

<p>This install warning is more or less obsolete, since most platforms already *will* have a /usr/bin/perl or similar provided by the OS.</p>

</li>
<li><p>Reduce verbosity of &quot;make install.man&quot;</p>

<p>Previously, two progress messages were emitted for each manpage: one by installman itself, and one by the function in install_lib.pl that it calls to actually install the file. Disabling the second of those in each case saves over 750 lines of unhelpful output.</p>

</li>
<li><p>Cleanup for clang -Weverything support. [perl 129961]</p>

</li>
<li><p>Configure: signbit scan was assuming too much, stop assuming negative 0.</p>

</li>
<li><p>Various compiler warnings have been silenced.</p>

</li>
<li><p>Several smaller changes have been made to remove impediments to compiling under C++11.</p>

</li>
<li><p>Builds using <code>USE_PAD_RESET</code> now work again; this configuration had bit-rotted.</p>

</li>
<li><p>A probe for <code>gai_strerror</code> was added to <i>Configure</i> that checks if the the gai_strerror() routine is available and can be used to translate error codes returned by getaddrinfo() into human readable strings.</p>

</li>
<li><p><i>Configure</i> now aborts if both &quot;-Duselongdouble&quot; and &quot;-Dusequadmath&quot; are requested. <a href="https://rt.perl.org/Public/Bug/Display.html?id=126203">[perl #126203]</a></p>

</li>
<li><p>Fixed a bug in which <i>Configure</i> could append &quot;-quadmath&quot; to the archname even if it was already present. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128538">[perl #128538]</a></p>

</li>
<li><p>Clang builds with &quot;-DPERL_GLOBAL_STRUCT&quot; or &quot;-DPERL_GLOBAL_STRUCT_PRIVATE&quot; have been fixed (by disabling Thread Safety Analysis for these configurations).</p>

</li>
<li><p><i>make_ext.pl</i> no longer updates a module&#39;s <i>pm_to_blib</i> file when no files require updates. This could cause dependencies, <i>perlmain.c</i> in particular, to be rebuilt unnecessarily. [perl #126710]</p>

</li>
<li><p>The output of <code>perl -V</code> has been reformatted so that each configuration and compile-time option is now listed one per line, to improve readability.</p>

</li>
<li><p><code>Configure</code> now builds <code>miniperl</code> and <code>generate_uudmap</code> if you invoke it with <code>-Dusecrosscompiler</code> but not <code>-Dtargethost=somehost</code>. This means you can supply your target platform <code>config.sh</code>, generate the headers and proceed to build your cross-target perl. [perl #127234]</p>

</li>
<li><p>Builds with <code>-Accflags=-DPERL_TRACE_OPS</code> now only dump the operator counts when the environment variable <code>PERL_TRACE_OPS</code> to be set to a non-zero integer. This allows <code>make test</code> to pass on such a build.</p>

</li>
<li><p>When building with GCC 6 and link-time optimization (the <code>-flto</code> option to <code>gcc</code>), <code>Configure</code> was treating all probed symbols as present on the system, regardless of whether they actually exist. This has been fixed. [perl #128131]</p>

</li>
<li><p>The <i>t/test.pl</i> library is used for internal testing of Perl itself, and also copied by several CPAN modules. Some of those modules must work on older versions of Perl, so <i>t/test.pl</i> must in turn avoid newer Perl features. Compatibility with Perl 5.8 was inadvertently removed some time ago; it has now been restored. [perl #128052]</p>

</li>
<li><p>The build process no longer emits an extra blank line before building each &quot;simple&quot; extension (those with only <i>*.pm</i> and <i>*.pod</i> files).</p>

</li>
</ul>

<h1 id="Testing">Testing</h1>

<ul>

<li><p><i>XS-APItest/t/utf8.t</i>: Several small fixes and enhancements.</p>

</li>
<li><p>Tests for locales were erroneously using locales incompatible with Perl.</p>

</li>
<li><p>Some parts of the test suite that try to exhaustively test edge cases in the regex implementation have been restricted to running for a maximum of five minutes. On slow systems they could otherwise take several hours, without significantly improving our understanding of the correctness of the code under test.</p>

<p>In addition, some of those test cases have been split into more files, to allow them to be run in parallel on suitable systems.</p>

</li>
<li><p>A new internal facility allows analysing the time taken by the individual tests in Perl&#39;s own test suite; see <i>Porting/harness-timer-report.pl</i>.</p>

</li>
<li><p><i>t/re/regexp_nonull.t</i> has been added to test that the regular expression engine can handle scalars that do not have a null byte just past the end of the string.</p>

</li>
<li><p>A new test script, <i>t/op/decl-refs.t</i>, has been added to test the new feature, &quot;Declaring a reference to a variable&quot;.</p>

</li>
<li><p>A new test script, <i>t/re/anyof.t</i>, has been added to test that the ANYOF nodes generated by bracketed character classes are as expected.</p>

</li>
<li><p><i>t/harness</i> now tries really hard not to run tests outside of the Perl source tree. [perl #124050]</p>

</li>
</ul>

<h1 id="Platform-Support">Platform Support</h1>

<h2 id="New-Platforms">New Platforms</h2>

<dl>

<dt id="NetBSD-VAX">NetBSD/VAX</dt>
<dd>

<p>Perl now compiles under NetBSD on VAX machines. However, it&#39;s not possible for that platform to implement floating-point infinities and NaNs compatibly with most modern systems, which implement the IEEE-754 floating point standard. The hexadecimal floating point (<code>0x...p[+-]n</code> literals, <code>printf %a</code>) is not implemented, either. The <code>make test</code> passes 98% of tests.</p>

<ul>

<li><p>Test fixes and minor updates.</p>

</li>
<li><p>Account for lack of <code>inf</code>, <code>nan</code>, and <code>-0.0</code> support.</p>

</li>
</ul>

</dd>
</dl>

<h2 id="Platform-Specific-Notes">Platform-Specific Notes</h2>

<dl>

<dt id="Darwin">Darwin</dt>
<dd>

<p>don&#39;t treat -Dprefix=/usr as special, instead require an extra option -Ddarwin_distribution to produce the same results.</p>

</dd>
<dt id="POSIX">POSIX</dt>
<dd>

<p>Finish removing POSIX deprecated functions.</p>

</dd>
<dt id="OS-X">OS X</dt>
<dd>

<p>OS X El Capitan doesn&#39;t implement the clock_gettime() or clock_getres() APIs, emulate them as necessary.</p>

</dd>
<dt id="macOS">macOS</dt>
<dd>

<p>Deprecated syscall(2) on macOS 10.12.</p>

</dd>
<dt id="EBCDIC">EBCDIC</dt>
<dd>

<p>Several tests have been updated to work (or be skipped) on EBCDIC platforms.</p>

</dd>
<dt id="HP-UX">HP-UX</dt>
<dd>

<p><a>Net::Ping</a> UDP test is skipped on HP-UX.</p>

</dd>
<dt id="Hurd">Hurd</dt>
<dd>

<p>The hints for Hurd have been improved enabling malloc wrap and reporting the GNU libc used (previously it was an empty string when reported).</p>

</dd>
<dt id="VAX">VAX</dt>
<dd>

<p>VAX floating point formats are now supported.</p>

</dd>
<dt id="VMS">VMS</dt>
<dd>

<ul>

<li><p>The path separator for the <code>PERL5LIB</code> and <code>PERLLIB</code> environment entries is now a colon (<code>:</code>) when running under a Unix shell. There is no change when running under DCL (it&#39;s still <code>|</code>).</p>

</li>
<li><p>Remove some VMS-specific hacks from <code>showlex.t</code>. These were added 15 years ago, and are no longer necessary for any VMS version now supported.</p>

</li>
<li><p>Move <code>_pDEPTH</code> and <code>_aDEPTH</code> after <i>config.h</i> otherwise DEBUGGING may not be defined yet.</p>

</li>
<li><p>VAXC has not been a possibility for a good long while, and the versions of the DEC/Compaq/HP/VSI C compiler that report themselves as &quot;DEC&quot; in a listing file are 15 years or more out-of-date and can be safely desupported.</p>

</li>
</ul>

</dd>
<dt id="Windows">Windows</dt>
<dd>

<ul>

<li><p>Support for compiling perl on Windows using Microsoft Visual Studio 2015 (containing Visual C++ 14.0) has been added.</p>

<p>This version of VC++ includes a completely rewritten C run-time library, some of the changes in which mean that work done to resolve a socket close() bug in perl #120091 and perl #118059 is not workable in its current state with this version of VC++. Therefore, we have effectively reverted that bug fix for VS2015 onwards on the basis that being able to build with VS2015 onwards is more important than keeping the bug fix. We may revisit this in the future to attempt to fix the bug again in a way that is compatible with VS2015.</p>

<p>These changes do not affect compilation with GCC or with Visual Studio versions up to and including VS2013, i.e. the bug fix is retained (unchanged) for those compilers.</p>

<p>Note that you may experience compatibility problems if you mix a perl built with GCC or VS &lt;= VS2013 with XS modules built with VS2015, or if you mix a perl built with VS2015 with XS modules built with GCC or VS &lt;= VS2013. Some incompatibility may arise because of the bug fix that has been reverted for VS2015 builds of perl, but there may well be incompatibility anyway because of the rewritten CRT in VS2015 (e.g. see discussion at http://stackoverflow.com/questions/30412951).</p>

</li>
</ul>

</dd>
<dt id="Win32">Win32</dt>
<dd>

<ul>

<li><p>Tweaks for Win32 VC vs GCC detection makefile code. This fixes issue that CCHOME depends on CCTYPE, which in auto detect mode is set after CCHOME, so CCHOME uses the uninit CCTYPE var. Also fix else vs .ELSE in makefile.mk</p>

</li>
<li><p>fp definitions have been updated.</p>

</li>
</ul>

</dd>
<dt id="VMS-And-Win32">VMS And Win32</dt>
<dd>

<p>Fix some breakage, add &#39;undef&#39; value for default_inc_excludes_dot in build scripts.</p>

</dd>
<dt id="Linux">Linux</dt>
<dd>

<p>Drop support for Linux a.out Linux has used ELF for over twenty years.</p>

</dd>
<dt id="OpenBSD-6">OpenBSD 6</dt>
<dd>

<p>OpenBSD 6 still does not support returning pid, gid or uid with SA_SIGINFO. Make sure this is accounted for.</p>

</dd>
<dt id="FreeBSD">FreeBSD</dt>
<dd>

<p>t/uni/overload.t: Skip hanging test on FreeBSD.</p>

</dd>
</dl>

<h1 id="Internal-Changes">Internal Changes</h1>

<ul>

<li><p>The <code>op_class()</code> API function has been added. This is like the existing <code>OP_CLASS()</code> macro, but can more accurately determine what struct an op has been allocated as. For example <code>OP_CLASS()</code> might return <code>OA_BASEOP_OR_UNOP</code> indicating that ops of this type are usually allocated as an <code>OP</code> or <code>UNOP</code>; while <code>op_class()</code> will return <code>OPclass_BASEOP</code> or <code>OPclass_UNOP</code> as appropriate.</p>

</li>
<li><p>The output format of the <code>op_dump()</code> function (as used by <code>perl -Dx</code>) has changed: it now displays an &quot;ASCII-art&quot; tree structure, and shows more low-level details about each op, such as its address and class.</p>

</li>
<li><p>New versions of macros like <code>isALPHA_utf8</code> and <code>toLOWER_utf8</code> have been added, each with the suffix <code>_safe</code>, like <code>isSPACE_utf8_safe</code>. These take an extra parameter, giving an upper limit of how far into the string it is safe to read. Using the old versions could cause attempts to read beyond the end of the input buffer if the UTF-8 is not well-formed, and their use now raises a deprecation warning. Details are at <a href="/cperl/perlapi.html#Character-classification">&quot;Character classification&quot; in perlapi</a>.</p>

</li>
<li><p>Calling macros like <code>isALPHA_utf8</code> on malformed UTF-8 have issued a deprecation warning since Perl v5.18. They now die. Similarly, macros like <code>toLOWER_utf8</code> on malformed UTF-8 now die.</p>

</li>
<li><p>Calling the functions <code>utf8n_to_uvchr</code> and its derivatives, while passing a string length of 0 is now asserted against in DEBUGGING builds, and otherwise returns the Unicode REPLACEMENT CHARACTER. If you have nothing to decode, you shouldn&#39;t call the decode function.</p>

</li>
<li><p>The functions <code>utf8n_to_uvchr</code> and its derivatives now return the Unicode REPLACEMENT CHARACTER if called with UTF-8 that has the overlong malformation, and that malformation is allowed by the input parameters. This malformation is where the UTF-8 looks valid syntactically, but there is a shorter sequence that yields the same code point. This has been forbidden since Unicode version 3.1.</p>

</li>
<li><p>The functions <code>utf8n_to_uvchr</code> and its derivatives now accept an input flag to allow the overflow malformation. This malformation is when the UTF-8 may be syntactically valid, but the code point it represents is not capable of being represented in the word length on the platform. What &quot;allowed&quot; means in this case is that the function doesn&#39;t return an error, and advances the parse pointer to beyond the UTF-8 in question, but it returns the Unicode REPLACEMENT CHARACTER as the value of the code point (since the real value is not representable).</p>

</li>
<li><p>The <code>PADOFFSET</code> type has changed from being unsigned to signed, and several pad-related variables such as <code>PL_padix</code> have changed from being of type <code>I32</code> to type <code>PADOFFSET</code>.</p>

</li>
<li><p>The function <code><a href="/cperl/perlapi.html#utf8n_to_uvchr">&quot;utf8n_to_uvchr&quot; in perlapi</a></code> has been changed to not abandon searching for other malformations when the first one is encountered. A call to it thus can generate multiple diagnostics, instead of just one.</p>

</li>
<li><p>A new function, <code><a href="/cperl/perlapi.html#utf8n_to_uvchr_error">&quot;utf8n_to_uvchr_error&quot; in perlapi</a></code>, has been added for use by modules that need to know the details of UTF-8 malformations beyond pass/fail. Previously, the only ways to know why a sequence was ill-formed was to capture and parse the generated diagnostics, or to do your own analysis.</p>

</li>
<li><p>Several new functions for handling Unicode have been added to the API: <code><a href="/cperl/perlapi.html#is_strict_utf8_string">&quot;is_strict_utf8_string&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_c9strict_utf8_string">&quot;is_c9strict_utf8_string&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_utf8_string_flags">&quot;is_utf8_string_flags&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_strict_utf8_string_loc">&quot;is_strict_utf8_string_loc&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_strict_utf8_string_loclen">&quot;is_strict_utf8_string_loclen&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_c9strict_utf8_string_loc">&quot;is_c9strict_utf8_string_loc&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_c9strict_utf8_string_loclen">&quot;is_c9strict_utf8_string_loclen&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_utf8_string_loc_flags">&quot;is_utf8_string_loc_flags&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_utf8_string_loclen_flags">&quot;is_utf8_string_loclen_flags&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_utf8_fixed_width_buf_flags">&quot;is_utf8_fixed_width_buf_flags&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_utf8_fixed_width_buf_loc_flags">&quot;is_utf8_fixed_width_buf_loc_flags&quot; in perlapi</a></code>, <code><a href="/cperl/perlapi.html#is_utf8_fixed_width_buf_loclen_flags">&quot;is_utf8_fixed_width_buf_loclen_flags&quot; in perlapi</a></code>.</p>

<p>These functions are all extensions of the <code>is_utf8_string_*()</code> functions, that apply various restrictions to the UTF-8 recognized as valid.</p>

</li>
<li><p>A new API function <code>sv_setvpv_bufsize()</code> allows simultaneously setting the length and allocated size of the buffer in an <code>SV</code>, growing the buffer if necessary.</p>

</li>
<li><p>A new API macro <code>SvPVCLEAR()</code> sets its <code>SV</code> argument to an empty string, like Perl-space <code>$x = &#39;&#39;</code>, but with several optimisations.</p>

</li>
<li><p>All parts of the internals now agree that the <code>sassign</code> op is a <code>BINOP</code>; previously it was listed as a <code>BASEOP</code> in <i>regen/opcodes</i>, which meant that several parts of the internals had to be special-cased to accommodate it. This oddity&#39;s original motivation was to handle code like <code>$x ||= 1</code>; that is now handled in a simpler way.</p>

</li>
<li><p>Several new internal C macros have been added that take a string literal as arguments, alongside existing routines that take the equivalent value as two arguments, a character pointer and a length. The advantage of this is that the length of the string is calculated automatically, rather than having to be done manually. These routines are now used where appropriate across the entire codebase.</p>

</li>
<li><p>The code in <i>gv.c</i> that determines whether a variable has a special meaning to Perl has been simplified.</p>

</li>
<li><p>The <code>DEBUGGING</code>-mode output for regex compilation and execution has been enhanced.</p>

</li>
<li><p>Several macros and functions have been added to the public API for dealing with Unicode and UTF-8-encoded strings. See <a href="/cperl/perlapi.html#Unicode-Support">&quot;Unicode Support&quot; in perlapi</a>.</p>

</li>
<li><p>Use <code>my_strlcat()</code> in <code>locale.c</code>. While <code>strcat()</code> is safe in this context, some compilers were optimizing this to <code>strcpy()</code> causing a porting test to fail that looks for unsafe code. Rather than fighting this, we just use <code>my_strlcat()</code> instead.</p>

</li>
<li><p>Three new ops, <code>OP_ARGELEM</code>, <code>OP_ARGDEFELEM</code> and <code>OP_ARGCHECK</code> have been added. These are intended principally to implement the individual elements of a subroutine signature, plus any overall checking required.</p>

</li>
<li><p>Perl no longer panics when switching into some locales on machines with buggy <code>strxfrm()</code> implementations in their libc. [perl #121734]</p>

</li>
<li><p>Perl is now built with the <code>PERL_OP_PARENT</code> compiler define enabled by default. To disable it, use the <code>PERL_NO_OP_PARENT</code> compiler define. This flag alters how the <code>op_sibling</code> field is used in <code>OP</code> structures, and has been available optionally since perl 5.22.0.</p>

<p>See <a href="/cperl/perl5220delta.html#Internal-Changes">&quot;Internal Changes&quot; in perl5220delta</a> for more details of what this build option does.</p>

</li>
<li><p>The meanings of some internal SV flags have been changed</p>

<p>OPpRUNTIME, SVpbm_VALID, SVpbm_TAIL, SvTAIL_on, SvTAIL_off, SVrepl_EVAL, SvEVALED</p>

</li>
<li><p>Change <code>hv_fetch(&hellip;, &quot;&hellip;&quot;, &hellip;, &hellip;)</code> to <code>hv_fetchs(&hellip;, &quot;&hellip;&quot;, &hellip;)</code></p>

<p>The dual-life dists all use Devel::PPPort, so they can use this function even though it was only added in 5.10.</p>

</li>
</ul>

<h1 id="Selected-Bug-Fixes">Selected Bug Fixes</h1>

<ul>

<li><p><code> $-{$name} </code> would leak an <code>AV</code> on each access if the regular expression had no named captures. The same applies to access to any hash tied with <a>Tie::Hash::NamedCapture</a> and <code>all =&gt; 1</code>. [perl #130822]</p>

</li>
<li><p>Attempting to use the deprecated variable <code>$#</code> as the object in an indirect object method call could cause a heap use after free or buffer overflow. [perl #129274]</p>

</li>
<li><p>When checking for an indirect object method call in some rare cases the parser could reallocate the line buffer but then continue to use pointers to the old buffer. [perl #129190]</p>

</li>
<li><p>Supplying a glob as the format argument to <a href="/cperl/perlfunc.html#formline">&quot;formline&quot; in perlfunc</a> would cause an assertion failure. [perl #130722]</p>

</li>
<li><p>Code like <code> $value1 =~ qr/.../ ~~ $value2 </code> would have the match converted into a qr// operator, leaving extra elements on the stack to confuse any surrounding expression. [perl #130705]</p>

</li>
<li><p>Since 5.24.0 in some obscure cases, a regex which included code blocks from multiple sources (e.g. via embedded via qr// objects) could end up with the wrong current pad and crash or give weird results. [perl #129881]</p>

</li>
<li><p>Occasionally <code>local()</code>s in a code block within a patterns weren&#39;t being undone when the pattern matching backtracked over the code block. [perl #126697]</p>

</li>
<li><p>Using <code>substr()</code> to modify a magic variable could access freed memory in some cases. [perl #129340]</p>

</li>
<li><p>Perl 5.25.9 was fixed so that under <code>use utf8</code>, the entire Perl program is checked that the UTF-8 is wellformed. It turns out that several edge cases were missed, and are now fixed. [perl #126310] was the original ticket.</p>

</li>
<li><p>Under <code>use utf8</code>, the entire Perl program is now checked that the UTF-8 is wellformed. This resolves [perl #126310].</p>

</li>
<li><p>The range operator <code>..</code> on strings now handles its arguments correctly when in the scope of the <a><code>unicode_strings</code></a> feature. The previous behaviour was sufficiently unexpected that we believe no correct program could have made use of it.</p>

</li>
<li><p>The <span style="white-space: nowrap;">split</span> operator did not ensure enough space was allocated for its return value in scalar context. It could then write a single pointer immediately beyond the end of the memory block allocated for the stack. [perl #130262]</p>

</li>
<li><p>Using a large code point with the <code>W</code> pack template character with the current output position aligned at just the right point could cause a write a single zero byte immediately beyond the end of an allocated buffer. [perl #129149]</p>

</li>
<li><p>Supplying the form picture argument as part of the form argument list where the picture specifies modifying the argument could cause an access to the new freed compiled form. [perl #129125]</p>

</li>
<li><p>Fix a problem with sort&#39;s build-in compare, where it would not sort correctly with 64-bit integers, and non-long doubles. [perl #130335]</p>

</li>
<li><p>Fix issues with /(?{ ... &lt;&lt;EOF })/ that broke Method-Signatures. [perl #130398]</p>

</li>
<li><p>Fix a macro which caused syntax error on an EBCDIC build.</p>

</li>
<li><p>Prevent tests from getting hung up on &#39;NonStop&#39; option. [perl #130445]</p>

</li>
<li><p>Fixed an assertion failure with <code>chop</code> and <code>chomp</code>, which could be triggered by <code>chop(@x =~ tr/1/1/)</code>. [perl #130198].</p>

</li>
<li><p>Fixed a comment skipping error under <code>/x</code>; it could stop skipping a byte early, which could be in the middle of a UTF-8 character. [perl #130495].</p>

</li>
<li><p><i>perldb</i> now ignores <i>/dev/tty</i> on non-Unix systems. [perl #113960];</p>

</li>
<li><p>Fix assertion failure for <code>{}-&gt;$x</code> when <code>$x</code> isn&#39;t defined. [perl #130496].</p>

</li>
<li><p>DragonFly BSD now has support for setproctitle(). [perl #130068].</p>

</li>
<li><p>Fix an assertion error which could be triggered when lookahead string in patterns exceeded a minimum length. [perl #130522].</p>

</li>
<li><p>Only warn once per literal about a misplaced <code>_</code>. [perl #70878].</p>

</li>
<li><p>Ensure range-start is set after error in <code>tr///</code>. [perl #129342].</p>

</li>
<li><p>Don&#39;t read past start of string for unmatched backref; otherwise, we may have heap buffer overflow. [perl #129377].</p>

</li>
<li><p>Properly recognize mathematical digit ranges starting at U+1D7E. <code>use re &#39;strict&#39;</code> is supposed to warn if you use a range whose start and end digit aren&#39;t from the same group of 10. It didn&#39;t do that for five groups of mathematical digits starting at U+1D7E.</p>

</li>
<li><p>A sub containing a &quot;forward&quot; declaration with the same name (e.g., <code>sub c { sub c; }</code>) could sometimes crash or loop infinitely. [perl #129090]</p>

</li>
<li><p>A crash in executing a regex with a floating UTF-8 substring against a target string that also used UTF-8 has been fixed. [perl #129350]</p>

</li>
<li><p>Previously, a shebang line like <code>#!perl -i u</code> could be erroneously interpreted as requesting the <code>-u</code> option. This has been fixed. [perl #129336]</p>

</li>
<li><p>The regex engine was previously producing incorrect results in some rare situations when backtracking past a trie that matches only one thing; this showed up as capture buffers (<code>$1</code>, <code>$2</code>, etc) erroneously containing data from regex execution paths that weren&#39;t actually executed for the final match. [perl #129897]</p>

</li>
<li><p>Certain regexes making use of the experimental <code>regex_sets</code> feature could trigger an assertion failure. This has been fixed. [perl #129322]</p>

</li>
<li><p>Invalid assignments to a reference constructor (e.g., <code>\eval=time</code>) could sometimes crash in addition to giving a syntax error. [perl #125679]</p>

</li>
<li><p>The parser could sometimes crash if a bareword came after <code>evalbytes</code>. [perl #129196]</p>

</li>
<li><p>Autoloading via a method call would warn erroneously (&quot;Use of inherited AUTOLOAD for non-method&quot;) if there was a stub present in the package into which the invocant had been blessed. The warning is no longer emitted in such circumstances. [perl #47047]</p>

</li>
<li><p>A sub containing with a &quot;forward&quot; declaration with the same name (e.g., <code>sub c { sub c; }</code>) could sometimes crash or loop infinitely. [perl #129090]</p>

</li>
<li><p>The use of <code>splice</code> on arrays with nonexistent elements could cause other operators to crash. [perl #129164]</p>

</li>
<li><p>Fixed case where <code>re_untuit_start</code> will overshoot the length of a utf8 string. [perl #129012]</p>

</li>
<li><p>Handle <code>CXt_SUBST</code> better in <code>Perl_deb_stack_all</code>, previously it wasn&#39;t checking that the <i>current</i> <code>cx</code> is the right type, and instead was always checking the base <code>cx</code> (effectively a noop). [perl #129029]</p>

</li>
<li><p>Fixed two possible use-after-free bugs in <code>Perl_yylex</code>. <code>Perl_yylex</code> maintains up to two pointers into the parser buffer, one of which can become stale under the right conditions. [perl #129069]</p>

</li>
<li><p>Fixed a crash with <code>s///l</code> where it thought it was dealing with UTF-8 when it wasn&#39;t. [perl #129038]</p>

</li>
<li><p>Fixed place where regex was not setting the syntax error correctly. [perl #129122]</p>

</li>
<li><p>The <code>&amp;.</code> operator (and the <code>&amp;</code> operator, when it treats its arguments as strings) were failing to append a trailing null byte if at least one string was marked as utf8 internally. Many code paths (system calls, regexp compilation) still expect there to be a null byte in the string buffer just past the end of the logical string. An assertion failure was the result. [perl #129287]</p>

</li>
<li><p>Check <code>pack_sockaddr_un()</code>&#39;s return value because <code>pack_sockaddr_un()</code> silently truncates the supplied path if it won&#39;t fit into the <code>sun_path</code> member of <code>sockaddr_un</code>. This may change in the future, but for now check the path in the<code>sockaddr</code> matches the desired path, and skip if it doesn&#39;t. [perl #128095]</p>

</li>
<li><p>Make sure <code>PL_oldoldbufptr</code> is preserved in <code>scan_heredoc()</code>. In some cases this is used in building error messages. [perl #128988]</p>

</li>
<li><p>Check for null PL_curcop in IN_LC() [perl #129106]</p>

</li>
<li><p>Fixed the parser error handling for an &#39;<code>:attr(foo</code>&#39; that does not have an ending &#39;<code>)</code>&#39;.</p>

</li>
<li><p>Fix <code>Perl_delimcpy()</code> to handle a backslash as last char, this actually fixed two bugs, [perl #129064] and [perl #129176].</p>

</li>
<li><p>[perl #129267] rework gv_fetchmethod_pvn_flags separator parsing to prevent possible string overrun with invalid len in gv.c</p>

</li>
<li><p>Problems with in-place array sorts: code like <code>@a = sort { ... } @a</code>, where the source and destination of the sort are the same plain array, are optimised to do less copying around. Two side-effects of this optimisation were that the contents of <code>@a</code> as visible to to sort routine were partially sorted, and under some circumstances accessing <code>@a</code> during the sort could crash the interpreter. Both these issues have been fixed, and Sort functions see the original value of <code>@a</code>.</p>

</li>
<li><p>Non-ASCII string delimiters are now reported correctly in error messages for unterminated strings. [perl #128701]</p>

</li>
<li><p><code>pack(&quot;p&quot;, ...)</code> used to emit its warning (&quot;Attempt to pack pointer to temporary value&quot;) erroneously in some cases, but has been fixed.</p>

</li>
<li><p><code>@DB::args</code> is now exempt from &quot;used once&quot; warnings. The warnings only occurred under <b>-w</b>, because <i>warnings.pm</i> itself uses <code>@DB::args</code> multiple times.</p>

</li>
<li><p>The use of built-in arrays or hash slices in a double-quoted string no longer issues a warning (&quot;Possible unintended interpolation...&quot;) if the variable has not been mentioned before. This affected code like <code>qq|@DB::args|</code> and <code>qq|@SIG{&#39;CHLD&#39;, &#39;HUP&#39;}|</code>. (The special variables <code>@-</code> and <code>@+</code> were already exempt from the warning.)</p>

</li>
<li><p><code>gethostent</code> and similar functions now perform a null check internally, to avoid crashing with torsocks. This was a regression from 5.22. [perl #128740]</p>

</li>
<li><p><code>defined *{&#39;!&#39;}</code>, <code>defined *{&#39;[&#39;}</code>, and <code>defined *{&#39;-&#39;}</code> no longer leak memory if the typeglob in question has never been accessed before.</p>

</li>
<li><p>In 5.25.4 fchown() was changed not to accept negative one as an argument because in some platforms that is an error. However, in some other platforms that is an acceptable argument. This change has been reverted [perl #128967].</p>

</li>
<li><p>Mentioning the same constant twice in a row (which is a syntax error) no longer fails an assertion under debugging builds. This was a regression from 5.20. [perl #126482]</p>

</li>
<li><p>Many issues relating to <code>printf &quot;%a&quot;</code> of hexadecimal floating point were fixed. In addition, the &quot;subnormals&quot; (formerly known as &quot;denormals&quot;) floating point anumbers are now supported both with the plain IEEE 754 floating point numbers (64-bit or 128-bit) and the x86 80-bit &quot;extended precision&quot;. Note that subnormal hexadecimal floating point literals will give a warning about &quot;exponent underflow&quot;. [perl #128843, #128889, #128890, #128893, #128909, #128919]</p>

</li>
<li><p>A regression in 5.24 with <code>tr/\N{U+...}/foo/</code> when the code point was between 128 and 255 has been fixed. [perl #128734].</p>

</li>
<li><p>A regression from the previous development release, 5.23.3, where compiling a regular expression could crash the interpreter has been fixed. [perl #128686].</p>

</li>
<li><p>Use of a string delimiter whose code point is above 2**31 now works correctly on platforms that allow this. Previously, certain characters, due to truncation, would be confused with other delimiter characters with special meaning (such as <code>?</code> in <code>m?...?</code>), resulting in inconsistent behaviour. Note that this is non-portable, and is based on Perl&#39;s extension to UTF-8, and is probably not displayable nor enterable by any editor. [perl #128738]</p>

</li>
<li><p><code>@{x</code> followed by a newline where <code>x</code> represents a control or non-ASCII character no longer produces a garbled syntax error message or a crash. [perl #128951]</p>

</li>
<li><p>An assertion failure with <code>%: = 0</code> has been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128238">[perl #128238]</a></p>

</li>
<li><p>In Perl 5.18, the parsing of <code>&quot;$foo::$bar&quot;</code> was accidentally changed, such that it would be treated as <code>$foo.&quot;::&quot;.$bar</code>. The previous behavior, which was to parse it as <code>$foo:: . $bar</code>, has been restored. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128478">[perl #128478]</a></p>

</li>
<li><p>Since Perl 5.20, line numbers have been off by one when perl is invoked with the <b>-x</b> switch. This has been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128508">[perl #128508]</a></p>

</li>
<li><p>Vivifying a subroutine stub in a deleted stash (e.g., <code>delete $My::{&quot;Foo::&quot;}; \&amp;My::Foo::foo</code>) no longer crashes. It had begun crashing in Perl 5.18. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128532">[perl #128532]</a></p>

</li>
<li><p>Some obscure cases of subroutines and file handles being freed at the same time could result in crashes, but have been fixed. The crash was introduced in Perl 5.22. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128597">[perl #128597]</a></p>

</li>
<li><p>Code that looks for a variable name associated with an uninitialized value could cause an assertion in cases where magic is involved, such as <code>$ISA[0][0]</code>. This has now been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128253">[perl #128253]</a></p>

</li>
<li><p>A crash caused by code generating the warning &quot;Subroutine STASH::NAME redefined&quot; in cases such as <code>sub P::f{} undef *P::; *P::f =sub{};</code> has been fixed. In these cases, where the STASH is missing, the warning will now appear as &quot;Subroutine NAME redefined&quot;. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128257">[perl #128257]</a></p>

</li>
<li><p>Fixed an assertion triggered by some code that handles deprecated behavior in formats, e.g. in cases like this:</p>

<pre><code>    format STDOUT =
    @
    0&quot;$x&quot;</code></pre>

<p><a href="https://rt.perl.org/Public/Bug/Display.html?id=128255">[perl #128255]</a></p>

</li>
<li><p>A possible divide by zero in string transformation code on Windows has been avoided, fixing a crash when collating an empty string. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128618">[perl #128618]</a></p>

</li>
<li><p>Some regular expression parsing glitches could lead to assertion failures with regular expressions such as <code>/(?&lt;=/</code> and <code>/(?&lt;!/</code>. This has now been fixed. <a href="https://rt.perl.org/Public/Bug/Display.html?id=128170">[perl #128170]</a></p>

</li>
<li><p><code> until ($x = 1) { ... } </code> and <code> ... until $x = 1 </code> now properly warn when syntax warnings are enabled. [perl #127333]</p>

</li>
<li><p>socket() now leaves the error code returned by the system in <code>$!</code> on failure. [perl #128316]</p>

</li>
<li><p>Assignment variants of any bitwise ops under the <code>bitwise</code> feature would crash if the left-hand side was an array or hash. [perl #128204]</p>

</li>
<li><p><code>require</code> followed by a single colon (as in <code>foo() ? require : ...</code> is now parsed correctly as <code>require</code> with implicit $_, rather than <code>require &quot;&quot;</code>. [perl #128307]</p>

</li>
<li><p>Scalar <code>keys %hash</code> can now be assigned to consistently in all scalar lvalue contexts. Previously it worked for some contexts but not others.</p>

</li>
<li><p>List assignment to <code>vec</code> or <code>substr</code> with an array or hash for its first argument used to result in crashes or &quot;Can&#39;t coerce&quot; error messages at run time, unlike scalar assignment, which would give an error at compile time. List assignment now gives a compile-time error, too. [perl #128260]</p>

</li>
<li><p>Expressions containing an <code>&amp;&amp;</code> or <code>||</code> operator (or their synonyms <code>and</code> and <code>or</code>) were being compiled incorrectly in some cases. If the left-hand side consisted of either a negated bareword constant or a negated <code>do {}</code> block containing a constant expression, and the right-hand side consisted of a negated non-foldable expression, one of the negations was effectively ignored. The same was true of <code>if</code> and <code>unless</code> statement modifiers, though with the left-hand and right-hand sides swapped. This long-standing bug has now been fixed. [perl #127952]</p>

</li>
<li><p><code>reset</code> with an argument no longer crashes when encountering stash entries other than globs. [perl #128106]</p>

</li>
<li><p>Assignment of hashes to, and deletion of, typeglobs named <code>*::::::</code> no longer causes crashes. [perl #128086]</p>

</li>
<li><p>Handle SvIMMORTALs in LHS of list assign. [perl #129991]</p>

</li>
<li><p>[perl #130010] a5540cf breaks texinfo</p>

<p>This involved user-defined Unicode properties.</p>

</li>
<li><p>Fix error message for unclosed <code>\N{</code> in regcomp.</p>

<p>An unclosed <code>\N{</code> could give the wrong error message <code>&quot;\N{NAME} must be resolved by the lexer&quot;</code>.</p>

</li>
<li><p>List assignment in list context where the LHS contained aggregates and where there were not enough RHS elements, used to skip scalar lvalues. Previously, <code>(($a,$b,@c,$d) = (1))</code> in list context returned <code>($a)</code>; now it returns <code>($a,$b,$d)</code>. <code>(($a,$b,$c) = (1))</code> is unchanged: it still returns <code>($a,$b,$c)</code>. This can be seen in the following:</p>

<pre><code>    sub inc { $_++ for @_ }
    inc(($a,$b,@c,$d) = (10))</code></pre>

<p>Formerly, the values of <code>($a,$b,$d)</code> would be left as <code>(11,undef,undef)</code>; now they are <code>(11,1,1)</code>.</p>

</li>
<li><p>[perl 129903]</p>

<p>The basic problem is that code like this: /(?{ s!!! })/ can trigger infinite recursion on the C stack (not the normal perl stack) when the last successful pattern in scope is itself. Since the C stack overflows this manifests as an untrappable error/segfault, which then kills perl.</p>

<p>We avoid the segfault by simply forbidding the use of the empty pattern when it would resolve to the currently executing pattern.</p>

</li>
<li><p>[perl 128997] Avoid reading beyond the end of the line buffer when there&#39;s a short UTF-8 character at the end.</p>

</li>
<li><p>[perl 129950] fix firstchar bitmap under utf8 with prefix optimisation.</p>

</li>
<li><p>[perl 129954] Carp/t/arg_string.t: be liberal in f/p formats.</p>

</li>
<li><p>[perl 129928] make do &quot;a\0b&quot; fail silently instead of throwing.</p>

</li>
<li><p>[perl 129130] make chdir allocate the stack it needs.</p>

</li>
</ul>

<h1 id="Known-Problems">Known Problems</h1>

<ul>

<li><p>Some modules have been broken by the <a href="#Internal-Changes">context stack rework</a>. These modules were relying on non-guaranteed implementation details in perl. Their maintainers have been informed, and should contact perl5-porters for advice if needed. Below is a subset of these modules:</p>

<ul>

<li><p><a>Algorithm::Permute</a></p>

</li>
<li><p><a>Coro</a></p>

<p><a>Coro</a> and perl v5.22.0 were already incompatible due to a change in the perl, and the reworking on the perl context stack creates a further incompatibility. perl5-porters has <a href="http://www.nntp.perl.org/group/perl.perl5.porters/2016/05/msg236174.html">discussed the issue on the mailing list</a>.</p>

</li>
<li><p><a>Data::Alias</a></p>

</li>
<li><p><a>RPerl</a></p>

</li>
<li><p><a>Scope::Upper</a></p>

</li>
<li><p><a>TryCatch</a></p>

</li>
</ul>

</li>
<li><p>The module <a>lexical::underscore</a> no longer works on perl v5.24.0, because perl no longer has a lexical <code>$_</code>!</p>

</li>
<li><p><code>mod_perl</code> has been patched for compatibility for v5.22.0 and later but no release has been made. The relevant patch (and other changes) can be found in their source code repository, <a href="https://github.com/apache/mod_perl/commit/82827132efd3c2e25cc413c85af61bb63375da6e">mirrored at GitHub</a>.</p>

</li>
</ul>

<h1 id="Errata-From-Previous-Releases">Errata From Previous Releases</h1>

<ul>

<li><p>Parsing bad POSIX charclasses no longer leaks memory. This was fixed in Perl 5.25.2 <a href="https://rt.perl.org/Public/Bug/Display.html?id=128313">[perl #128313]</a></p>

</li>
<li><p>Fixed issues with recursive regexes. The behavior was fixed in Perl 5.24.0. <a href="https://rt.perl.org/Public/Bug/Display.html?id=126182">[perl #126182]</a></p>

</li>
</ul>

<h1 id="Obituary">Obituary</h1>

<p>Jon Portnoy (AVENJ), a prolific Perl author and admired Gentoo community member, has passed away on August 10, 2016. He will be remembered and missed by all those with which he came in contact and enriched with his intellect, wit, and spirit.</p>

<p>It is with great sadness we also note Kip Hampton&#39;s passing.. Probably best known as the author of the Perl &amp; XML column on XML.com, he was a core contributor to AxKit, an XML server platform that became an Apache Foundation project. He was a frequent speaker in the early days at OSCON, and most recently at YAPC::NA in Madison. He was frequently on irc.perl.org as `ubu`, generally in the #axkit-dahut community, the group responsible for YAPC::NA Asheville in 2011.</p>

<p>Kip and his constant contributions to the community will be greatly missed.</p>

<h1 id="Acknowledgements">Acknowledgements</h1>

<p>Perl 5.26.0 represents approximately 12 months of development since Perl 5.24.0 and contains approximately 370,000 lines of changes across 2,600 files from 86 authors.</p>

<p>Excluding auto-generated files, documentation and release tools, there were approximately 230,000 lines of changes to 1,800 .pm, .t, .c and .h files.</p>

<p>Perl continues to flourish into its third decade thanks to a vibrant community of users and developers. The following people are known to have contributed the improvements that became Perl 5.24.1:</p>

<p>Aaron Crane, Abigail, &AElig;var Arnfj&ouml;r&eth; Bjarmason, Alex Vandiver, Andreas K&ouml;nig, Andreas Voegele, Andrew Fresh, Andy Lester, Aristotle Pagaltzis, Chad Granum, Chase Whitener, Chris &#39;BinGOs&#39; Williams, Chris Lamb, Christian Hansen, Christian Millour, Colin Newell, Craig A. Berry, Dagfinn Ilmari Manns&aring;ker, Dan Collins, Daniel Dragan, Dave Cross, Dave Rolsky, David Golden, David H. Gutteridge, David Mitchell, Dominic Hargreaves, Doug Bell, E. Choroba, Ed Avis, Father Chrysostomos, Fran&ccedil;ois Perrad, Hauke D, H.Merijn Brand, Hugo van der Sanden, Ivan Pozdeev, James E Keenan, James Raspass, Jarkko Hietaniemi, Jerry D. Hedden, Jim Cromie, J. Nick Koston, John Lightsey, Karen Etheridge, Karl Williamson, Leon Timmermans, Lukas Mai, Matthew Horsfall, Maxwell Carey, Misty De Meo, Neil Bowers, Nicholas Clark, Nicolas R., Niko Tyni, Pali, Paul Marquess, Peter Avalos, Petr P&iacute;sa&#x159;, Pino Toscano, Rafael Garcia-Suarez, Reini Urban, Renee Baecker, Ricardo Signes, Richard Levitte, Rick Delaney, Salvador Fandi&ntilde;o, Samuel Thibault, Sawyer X, S&eacute;bastien Aperghis-Tramoni, Sergey Aleynikov, Shlomi Fish, Smylers, Stefan Seifert, Steffen M&uuml;ller, Stevan Little, Steve Hay, Steven Humphrey, Sullivan Beck, Theo Buehler, Thomas Sibley, Todd Rinaldo, Tomasz Konojacki, Tony Cook, Unicode Consortium, Yaroslav Kuzmin, Yves Orton, Zefram.</p>

<p>The list above is almost certainly incomplete as it is automatically generated from version control history. In particular, it does not include the names of the (very much appreciated) contributors who reported issues to the Perl bug tracker.</p>

<p>Many of the changes included in this version originated in the CPAN modules included in Perl&#39;s core. We&#39;re grateful to the entire CPAN community for helping Perl to flourish.</p>

<p>For a more complete list of all of Perl&#39;s historical contributors, please see the <i>AUTHORS</i> file in the Perl source distribution.</p>

<h1 id="Reporting-Bugs">Reporting Bugs</h1>

<p>If you find what you think is a bug, you might check the articles recently posted to the comp.lang.perl.misc newsgroup and the perl bug database at <a href="https://rt.perl.org/">https://rt.perl.org/</a> . There may also be information at <a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>

<p>If you believe you have an unreported bug, please run the <a>perlbug</a> program included with your release. Be sure to trim your bug down to a tiny but sufficient test case. Your bug report, along with the output of <code>perl -V</code>, will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</p>

<p>If the bug you are reporting has security implications which make it inappropriate to send to a publicly archived mailing list, then see <a href="/cperl/perlsec.html#SECURITY-VULNERABILITY-CONTACT-INFORMATION">&quot;SECURITY VULNERABILITY CONTACT INFORMATION&quot; in perlsec</a> for details of how to report the issue.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>The <i>Changes</i> file for an explanation of how to view exhaustive details on what changed.</p>

<p>The <i>INSTALL</i> file for how to build Perl.</p>

<p>The <i>README</i> file for general stuff.</p>

<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>


</body>

</html>


