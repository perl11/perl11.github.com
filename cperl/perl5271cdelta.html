<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@osx219.apple.com" />
</head>

<body style="background-color: white">



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#Notice">Notice</a></li>
  <li><a href="#Core-Enhancements">Core Enhancements</a>
    <ul>
      <li><a href="#extern-sub---libffi">extern sub - libffi</a></li>
      <li><a href="#Check-and-normalize-stringified-names">Check and normalize stringified names</a></li>
      <li><a href="#strict-names">strict names</a></li>
    </ul>
  </li>
  <li><a href="#Security">Security</a></li>
  <li><a href="#Incompatible-Changes">Incompatible Changes</a></li>
  <li><a href="#Deprecations">Deprecations</a>
    <ul>
      <li><a href="#Module-removals">Module removals</a></li>
    </ul>
  </li>
  <li><a href="#Performance-Enhancements">Performance Enhancements</a></li>
  <li><a href="#Modules-and-Pragmata">Modules and Pragmata</a>
    <ul>
      <li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a></li>
      <li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></li>
      <li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></li>
    </ul>
  </li>
  <li><a href="#Documentation">Documentation</a>
    <ul>
      <li><a href="#New-Documentation">New Documentation</a>
        <ul>
          <li><a href="#XXX1">XXX</a></li>
        </ul>
      </li>
      <li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a>
        <ul>
          <li><a href="#XXX2">XXX</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#Diagnostics">Diagnostics</a>
    <ul>
      <li><a href="#New-Diagnostics">New Diagnostics</a>
        <ul>
          <li><a href="#New-Errors">New Errors</a></li>
          <li><a href="#New-Warnings">New Warnings</a></li>
        </ul>
      </li>
      <li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></li>
    </ul>
  </li>
  <li><a href="#Utility-Changes">Utility Changes</a>
    <ul>
      <li><a href="#XXX3">XXX</a></li>
    </ul>
  </li>
  <li><a href="#Configuration-and-Compilation">Configuration and Compilation</a></li>
  <li><a href="#Testing">Testing</a></li>
  <li><a href="#Platform-Support">Platform Support</a>
    <ul>
      <li><a href="#New-Platforms">New Platforms</a></li>
      <li><a href="#Discontinued-Platforms">Discontinued Platforms</a></li>
      <li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></li>
    </ul>
  </li>
  <li><a href="#Internal-Changes">Internal Changes</a></li>
  <li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a></li>
  <li><a href="#Known-Problems">Known Problems</a></li>
  <li><a href="#Errata-From-Previous-Releases">Errata From Previous Releases</a></li>
  <li><a href="#Obituary">Obituary</a></li>
  <li><a href="#Acknowledgements">Acknowledgements</a></li>
  <li><a href="#Reporting-Bugs">Reporting Bugs</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>perlcdelta - what is new for cperl v5.27.1</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This document describes the differences between the cperl 5.27.0 and the cperl 5.27.1 releases.</p>

<p>If you are upgrading from an earlier release such as v5.24.2c, first read the <a>perl525*cdelta</a> documentation, which describes differences between v5.25.1c and v5.26.0c</p>

<h1 id="Notice">Notice</h1>

<p>XXX Any important notices here</p>

<h1 id="Core-Enhancements">Core Enhancements</h1>

<h2 id="extern-sub---libffi">extern sub - libffi</h2>

<p>A new <a href="/cperl/lib/ffi.html">ffi</a> was added to core, with a syntax resembling perl6 NativeCall. Perl6 traits are cperl <a href="/cperl/lib/attributes.html">attributes</a>, but attribute values may be deferred to run-time. Packagers need to add <b>libffi</b> to their library dependencies.</p>

<p>Not yet implemented are the :encoded() attribute for string arguments and return values, c-struct helpers, callback helpers and support for variadic (varargs) functions.</p>

<h2 id="Check-and-normalize-stringified-names">Check and normalize stringified names</h2>

<p>Before symbols and identifiers created from strings at run-time were added asis. Now those names are treated almost as in the parser at compile-time, i.e. unicode is normalized, mixed Unicode scripts are checked at run-time also. cperl-only.</p>

<p>Behaviour of <a href="/cperl/perlapi.html#valid_ident">&quot;valid_ident&quot; in perlapi</a>:</p>

<pre><code>    ${&quot;\xc3\x28&quot;}       =&gt; FALSE.  Illegal unicode, but no warning or error,
                           unless under strict names.
    ${&quot;E\x{45}\x{301}&quot;} =&gt; TRUE.   Normalized to $E\x{c9}
    ${&quot;&#x90F;x&#x1E70;&#xBB0;::&#x2A6;&#x1356;&#x3121;s&#x228;&quot;}   =&gt; FALSE. Error: Invalid script Tamil in identifier
                            &#xBB0;::&#x2A6;&#x1356;&#x3121;s&#x228; for U+0BB0. Have Devanagari</code></pre>

<p>See below <a href="#strict-names">&quot;strict names&quot;</a>. <code>use strict</code> fatalizes now any run-time identifier parsing problem.</p>

<h2 id="strict-names">strict names</h2>

<p>strict names is the default when using <code>use strict</code>. Reject illegal identifiers at run-time when created dynamically from strings, which would be rejected at compile-time. cperl-only.</p>

<pre><code>    use strict &quot;names&quot;;
    ${&quot;\$var&quot;}    =&gt; Invalid identifier &quot;$var&quot; while &quot;strict names&quot;
    ${&quot;\xff&quot;}     =&gt; Invalid identifier &quot;\377&quot; while &quot;strict names&quot;
    ${&quot;\xc3\x28&quot;} =&gt; Invalid identifier &quot;\303(&quot; while &quot;strict names&quot;</code></pre>

<p>See <a href="/cperl/perldata.html#Identifier-parsing">&quot;Identifier parsing&quot; in perldata</a> and <a href="http://perl11.org/blog/strict-names.html">http://perl11.org/blog/strict-names.html</a></p>

<h1 id="Security">Security</h1>

<p>XXX Any security-related notices go here. In particular, any security vulnerabilities closed should be noted here rather than in the <a href="#Selected-Bug-Fixes">&quot;Selected Bug Fixes&quot;</a> section.</p>

<p>[ List each security issue as a =head2 entry ]</p>

<h1 id="Incompatible-Changes">Incompatible Changes</h1>

<p>XXX For a release on a stable branch, this section aspires to be:</p>

<pre><code>    There are no changes intentionally incompatible with 5.XXX.XXX
    If any exist, they are bugs, and we request that you submit a
    report.  See L&lt;/Reporting Bugs&gt; below.</code></pre>

<p>[ List each incompatible change as a =head2 entry ]</p>

<h1 id="Deprecations">Deprecations</h1>

<p>XXX Any deprecated features, syntax, modules etc. should be listed here.</p>

<h2 id="Module-removals">Module removals</h2>

<p>XXX Remove this section if inapplicable.</p>

<p>The following modules will be removed from the core distribution in a future release, and will at that time need to be installed from CPAN. Distributions on CPAN which require these modules will need to list them as prerequisites.</p>

<p>The core versions of these modules will now issue <code>&quot;deprecated&quot;</code>-category warnings to alert you to this fact. To silence these deprecation warnings, install the modules in question from CPAN.</p>

<p>Note that these are (with rare exceptions) fine modules that you are encouraged to continue to use. Their disinclusion from core primarily hinges on their necessity to bootstrapping a fully functional, CPAN-capable Perl installation, not usually on concerns over their design.</p>

<dl>

<dt id="XXX">XXX</dt>
<dd>

<p>XXX Note that deprecated modules should be listed here even if they are listed as an updated module in the <a href="#Modules-and-Pragmata">&quot;Modules and Pragmata&quot;</a> section.</p>

</dd>
</dl>

<p>[ List each other deprecation as a =head2 entry ]</p>

<h1 id="Performance-Enhancements">Performance Enhancements</h1>

<ul>

<li><p>XS calls were made faster again. Previously cperl (with 5.22.1c) fell from pure perl calls to XS calls and changed the call type to ENTERXSSUB for faster subsequent invocations. This made bigger examples ~10% faster. Now the compiler detects calls to XS code and changes the type to ENTERXSSUB. Also the method cache code checks now for an XS call and changes the type of the next OP. Overall the improvement is ~3.5%, but it depends on the frequency of XS calls. It&#39;s 0.5-1% slower without any XS call. Note that p5p decided to delete this feature request from it&#39;s TODO list.</p>

<p>The optree is a bit slimmer. Before:</p>

<pre><code>    $ cperl5.27.0d-nt -Dt -e&#39;use strict&#39;
    (-e:1)      nextstate
    (-e:1)      const(PV(&quot;strict.pm&quot;))
    (-e:1)      require
    (-e:1)      nextstate
    (-e:1)      pushmark
    (-e:1)      const(PV(&quot;strict&quot;))
    (-e:1)      method_named(-&gt;import)
    (-e:1)      entersub(strict::import)
    (-e:1)      enterxssub(strict::import)
    (-e:1)      leavesub</code></pre>

<p>Now:</p>

<pre><code>    $ cperl5.27.1d-nt -Dt -e&#39;use strict&#39;
    (-e:1)      nextstate
    (-e:1)      const(PV(&quot;strict.pm&quot;))
    (-e:1)      require
    (-e:1)      nextstate
    (-e:1)      pushmark
    (-e:1)      const(PV(&quot;strict&quot;))
    (-e:1)      method_named(-&gt;import)
    (-e:1)      enterxssub(strict::import)
    (-e:1)      leavesub</code></pre>

<p>Note that this is still not optimal, as strict::import can be compile-time optimized from a dynamic method call to a static function call. A regression from 5.22.1c. See <a href="http://blogs.perl.org/users/rurban/2011/06/how-perl-calls-subs-and-methods.html">http://blogs.perl.org/users/rurban/2011/06/how-perl-calls-subs-and-methods.html</a></p>

</li>
</ul>

<h1 id="Modules-and-Pragmata">Modules and Pragmata</h1>

<p>XXX All changes to installed files in <i>cpan/</i>, <i>dist/</i>, <i>ext/</i> and <i>lib/</i> go here. If Module::CoreList is updated, generate an initial draft of the following sections using <i>Porting/corelist-perldelta.pl</i>. A paragraph summary for important changes should then be added by hand. In an ideal world, dual-life modules would have a <i>Changes</i> file that could be cribbed.</p>

<p>[ Within each section, list entries as a =item entry ]</p>

<h2 id="New-Modules-and-Pragmata">New Modules and Pragmata</h2>

<dl>

<dt id="ffi-0.01c"><a href="/cperl/lib/ffi.html">ffi</a> 0.01c</dt>
<dd>

<p>Helpers and more types.</p>

</dd>
</dl>

<h2 id="Updated-Modules-and-Pragmata">Updated Modules and Pragmata</h2>

<dl>

<dt id="attributes-1.12c"><a href="/cperl/lib/attributes.html">attributes</a> 1.12c</dt>
<dd>

<p>Add ffi support. Support the new core attributes :native, :native($libname), :symbol($c_name), :nativeconv(abi), :encoded(encoding) <i>(NYI)</i>.</p>

</dd>
<dt id="B-1.68_07"><a href="/cperl/lib/B.html">B</a> 1.68_07</dt>
<dd>

<p>Add ffi support</p>

</dd>
<dt id="B::Deparse-1.40_04c"><a href="/cperl/lib/B/Deparse.html">B::Deparse</a> 1.40_04c</dt>
<dd>

<p>Add ffi support</p>

</dd>
<dt id="Devel::PPPort"><a href="/cperl/lib/Devel/PPPort.html">Devel::PPPort</a></dt>
<dd>

<p>Restore silence under <code>make -s</code>. I broke it in cperl 5.27.0</p>

</dd>
<dt id="ExtUtils::Constant-0.23_09"><a href="/cperl/lib/ExtUtils/Constant.html">ExtUtils::Constant</a> 0.23_09</dt>
<dd>

<p>C++ compat fixes. -Wliteral-suffix</p>

</dd>
<dt id="ExtUtils::MakeMaker::Locale-8.04_04"><a href="/cperl/lib/ExtUtils/MakeMaker/Locale.html">ExtUtils::MakeMaker::Locale</a> 8.04_04</dt>
<dd>

<p>no strict &#39;names&#39; for <code>$ENCODING_UTF-8</code>.</p>

</dd>
<dt id="File::Spec::Functions-3.36_05"><a href="/cperl/lib/File/Spec/Functions.html">File::Spec::Functions</a> 3.36_05</dt>
<dd>

<p>Bumped version from unparsable 3.3.65, which prevented e.g. File::chdir to install.</p>

</dd>
<dt id="Opcode-1.39_02c"><a href="/cperl/lib/Opcode.html">Opcode</a> 1.39_02c</dt>
<dd>

<p>Restrict the new op enterffi.</p>

</dd>
<dt id="strict-1.13c"><a href="/cperl/lib/strict.html">strict</a> 1.13c</dt>
<dd>

<p>Implemented <code>strict &#39;names&#39;</code> to reject illegal identifiers created via <code>no strict &#39;refs&#39;</code> also at run-time, not only at compile-time. See <a href="https://github.com/perl11/cperl/issues/282">[cperl #282</a>.</p>

</dd>
<dt id="warnings-1.38"><a href="/cperl/lib/warnings.html">warnings</a> 1.38</dt>
<dd>

<p>Added the new ffi warnings category.</p>

</dd>
</dl>

<h2 id="Removed-Modules-and-Pragmata">Removed Modules and Pragmata</h2>

<ul>

<li><p>XXX</p>

</li>
</ul>

<h1 id="Documentation">Documentation</h1>

<p>XXX Changes to files in <i>pod/</i> go here. Consider grouping entries by file and be sure to link to the appropriate page, e.g. <a href="/cperl/perlfunc.html">perlfunc</a>.</p>

<h2 id="New-Documentation">New Documentation</h2>

<p>XXX Changes which create <b>new</b> files in <i>pod/</i> go here.</p>

<h3 id="XXX1"><a>XXX</a></h3>

<p>XXX Description of the purpose of the new file here</p>

<h2 id="Changes-to-Existing-Documentation">Changes to Existing Documentation</h2>

<p>XXX Changes which significantly change existing files in <i>pod/</i> go here. However, any changes to <i>pod/perldiag.pod</i> should go in the <a href="#Diagnostics">&quot;Diagnostics&quot;</a> section.</p>

<h3 id="XXX2"><a>XXX</a></h3>

<ul>

<li><p>XXX Description of the change here</p>

</li>
</ul>

<h1 id="Diagnostics">Diagnostics</h1>

<p>The following additions or changes have been made to diagnostic output, including warnings and fatal error messages. For the complete list of diagnostic messages, see <a href="/cperl/perldiag.html">perldiag</a>.</p>

<p>XXX New or changed warnings emitted by the core&#39;s <code>C</code> code go here. Also include any changes in <a href="/cperl/perldiag.html">perldiag</a> that reconcile it to the <code>C</code> code.</p>

<h2 id="New-Diagnostics">New Diagnostics</h2>

<p>XXX Newly added diagnostic messages go under here, separated into New Errors and New Warnings</p>

<h3 id="New-Errors">New Errors</h3>

<ul>

<li><p>XXX <a href="/cperl/perldiag.html#message">message</a></p>

</li>
</ul>

<h3 id="New-Warnings">New Warnings</h3>

<ul>

<li><p>XXX <a href="/cperl/perldiag.html#message">message</a></p>

</li>
</ul>

<h2 id="Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</h2>

<p>XXX Changes (i.e. rewording) of diagnostic messages go here</p>

<ul>

<li><p>XXX Describe change here</p>

</li>
</ul>

<h1 id="Utility-Changes">Utility Changes</h1>

<p>XXX Changes to installed programs such as <i>cperlbug</i> and <i>xsubpp</i> go here. Most of these are built within the directory <i>utils</i>.</p>

<p>[ List utility changes as a =head2 entry for each utility and =item entries for each change Use <a>XXX</a> with program names to get proper documentation linking. ]</p>

<h2 id="XXX3"><a>XXX</a></h2>

<ul>

<li><p>XXX</p>

</li>
</ul>

<h1 id="Configuration-and-Compilation">Configuration and Compilation</h1>

<p>XXX Changes to <i>Configure</i>, <i>installperl</i>, <i>installman</i>, and analogous tools go here. Any other changes to the Perl build process should be listed here. However, any platform-specific changes should be listed in the <a href="#Platform-Support">&quot;Platform Support&quot;</a> section, instead.</p>

<p>[ List changes as a =item entry ].</p>

<ul>

<li><p><code>inc_version_list</code> skips now older development versions. It only includes older non-devel versions with even numbers. See <a href="https://github.com/perl11/cperl/issues/284">[cperl #284]</a></p>

</li>
<li><p><code>-Dusedevel</code> is needed to be added to all development versions anymore, it is now the default on such. A big warning is still being displayed, even in the usual silent auto mode <code>-des</code>. See <a href="https://github.com/perl11/cperl/issues/283">[cperl #283]</a></p>

</li>
</ul>

<h1 id="Testing">Testing</h1>

<p>XXX Any significant changes to the testing of a freshly built perl should be listed here. Changes which create <b>new</b> files in <i>t/</i> go here as do any large changes to the testing harness (e.g. when parallel testing was added). Changes to existing files in <i>t/</i> aren&#39;t worth summarizing, although the bugs that they represent may be covered elsewhere.</p>

<p>[ List each test improvement as a =item entry ]</p>

<ul>

<li><p>XXX</p>

</li>
</ul>

<h1 id="Platform-Support">Platform Support</h1>

<p>XXX Any changes to platform support should be listed in the sections below.</p>

<p>[ Within the sections, list each platform as a =item entry with specific changes as paragraphs below it. ]</p>

<h2 id="New-Platforms">New Platforms</h2>

<p>XXX List any platforms that this version of perl compiles on, that previous versions did not. These will either be enabled by new files in the <i>hints/</i> directories, or new subdirectories and <i>README</i> files at the top level of the source tree.</p>

<dl>

<dt id="XXX-some-platform">XXX-some-platform</dt>
<dd>

<p>XXX</p>

</dd>
</dl>

<h2 id="Discontinued-Platforms">Discontinued Platforms</h2>

<p>XXX List any platforms that this version of perl no longer compiles on.</p>

<dl>

<dt id="XXX-some-platform1">XXX-some-platform</dt>
<dd>

<p>XXX</p>

</dd>
</dl>

<h2 id="Platform-Specific-Notes">Platform-Specific Notes</h2>

<p>XXX List any changes for specific platforms. This could include configuration and compilation changes or changes in portability/compatibility. However, changes within modules for platforms should generally be listed in the <a href="#Modules-and-Pragmata">&quot;Modules and Pragmata&quot;</a> section.</p>

<dl>

<dt id="XXX-some-platform2">XXX-some-platform</dt>
<dd>

<p>XXX</p>

</dd>
</dl>

<h1 id="Internal-Changes">Internal Changes</h1>

<p>XXX Changes which affect the interface available to <code>XS</code> code go here. Other significant internal changes for future core maintainers should be noted as well.</p>

<p>[ List each change as a =item entry ]</p>

<ul>

<li><p>XXX</p>

</li>
</ul>

<h1 id="Selected-Bug-Fixes">Selected Bug Fixes</h1>

<p>XXX Important bug fixes in the core language are summarized here. Bug fixes in files in <i>ext/</i> and <i>lib/</i> are best summarized in <a href="#Modules-and-Pragmata">&quot;Modules and Pragmata&quot;</a>.</p>

<p>[ List each fix as a =item entry ]</p>

<ul>

<li><p>Fixed signature corruption with skip&#39;ed arguments without default and with 0, 1, undef or op defaults, such as in <code>sub func ($, $=0, $=1, $=2, $=do{$i++} $=&quot;foo&quot;, $a=&quot;bar&quot;, $b=&quot;zoot&quot;)</code>, with the first <code>$</code>, the 2nd <code>$=0</code>, the 3rd <code>$=1</code> and the 5th <code>$=do{}</code> argument. cperl-only.</p>

</li>
</ul>

<h1 id="Known-Problems">Known Problems</h1>

<p>XXX Descriptions of platform agnostic bugs we know we can&#39;t fix go here. Any tests that had to be <code>TODO</code>ed for the release would be noted here. Unfixed platform specific bugs also go here.</p>

<p>[ List each fix as a =item entry ]</p>

<ul>

<li><p>XXX</p>

</li>
</ul>

<h1 id="Errata-From-Previous-Releases">Errata From Previous Releases</h1>

<ul>

<li><p>XXX Add anything here that we forgot to add, or were mistaken about, in the perldelta of a previous release.</p>

</li>
</ul>

<h1 id="Obituary">Obituary</h1>

<p>XXX If any significant core contributor has died, we&#39;ve added a short obituary here.</p>

<h1 id="Acknowledgements">Acknowledgements</h1>

<p>XXX Generate this with:</p>

<pre><code>    cperl Porting/acknowledgements.pl cperl-5.27.0..HEAD</code></pre>

<h1 id="Reporting-Bugs">Reporting Bugs</h1>

<p>If you find what you think is a bug, you might check the articles recently posted to the comp.lang.perl.misc newsgroup and the perl bug database at <a href="https://rt.perl.org/">https://rt.perl.org/</a> . There may also be information at <a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>

<p>If you believe you have an unreported bug, please run the <a>cperlbug</a> program included with your release. Be sure to trim your bug down to a tiny but sufficient test case. Your bug report, along with the output of <code>perl -V</code>, will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</p>

<p>If you think it&#39;s a cperl specific bug or trust the cperl developers more please file an issue at <a href="https://github.com/perl11/cperl/issues">https://github.com/perl11/cperl/issues</a>.</p>

<p>If the bug you are reporting has security implications which make it inappropriate to send to a publicly archived mailing list, then see <a href="/cperl/perlsec.html#SECURITY-VULNERABILITY-CONTACT-INFORMATION">&quot;SECURITY VULNERABILITY CONTACT INFORMATION&quot; in perlsec</a> For details of how to report the issue.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>The <i>Changes</i> file for an explanation of how to view exhaustive details on what changed.</p>

<p>The <i>INSTALL</i> file for how to build Perl.</p>

<p>The <i>README</i> file for general stuff.</p>

<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>


</body>

</html>


